<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>This world is a bridge</title>
  <icon>https://www.gravatar.com/avatar/028062b7fd7bdf46904af3a6c9c1030f</icon>
  <subtitle>One wild and precious life</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://angry-bird.github.io/"/>
  <updated>2018-06-13T15:29:02.000Z</updated>
  <id>https://angry-bird.github.io/</id>
  
  <author>
    <name>zuoshi</name>
    <email>archnewbie@163.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Training Journal</title>
    <link href="https://angry-bird.github.io/2018/12/09/Training-Journal/"/>
    <id>https://angry-bird.github.io/2018/12/09/Training-Journal/</id>
    <published>2018-12-09T00:00:00.000Z</published>
    <updated>2018-06-13T15:29:02.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#orgde2ed8a">1. <span class="timestamp-wrapper"><span class="timestamp">[2018-06-13 Wed] </span></span> 20K easy-tempo <code>20K</code></a></li><li><a href="#org571ff3f">2. <span class="timestamp-wrapper"><span class="timestamp">[2018-06-12 Tue] </span></span> 4K tempo <code>4K</code></a></li><li><a href="#org4baabc0">3. <span class="timestamp-wrapper"><span class="timestamp">[2018-06-10 Sun] </span></span> 10K easy <code>10K</code></a></li><li><a href="#org542bc4c">4. <span class="timestamp-wrapper"><span class="timestamp">[2018-06-06 Wed] </span></span> 16K easy <code>16K</code></a></li><li><a href="#orgfcd1746">5. <span class="timestamp-wrapper"><span class="timestamp">[2018-06-05 Tue] </span></span> 10K easy <code>10K</code></a></li><li><a href="#org9685b88">6. <span class="timestamp-wrapper"><span class="timestamp">[2018-05-27 Sun] </span></span> 14K tempo <code>14k</code></a></li><li><a href="#org6032cbd">7. <span class="timestamp-wrapper"><span class="timestamp">[2018-05-23 Wed] </span></span> 12K HF easy <code>12K</code></a></li><li><a href="#org79b9c32">8. <span class="timestamp-wrapper"><span class="timestamp">[2018-05-22 Tue] </span></span> 8K easy run <code>8K</code></a></li><li><a href="#orgfc1dccf">9. <span class="timestamp-wrapper"><span class="timestamp">[2018-05-18 Fri] </span></span> 6K easy-tempo <code>6K</code></a></li><li><a href="#org2e7b573">10. <span class="timestamp-wrapper"><span class="timestamp">[2018-05-17 Thu] </span></span> 5K+3K easy-tempo <code>8K</code></a></li><li><a href="#orgaef989b">11. <span class="timestamp-wrapper"><span class="timestamp">[2018-05-12 Sat 06:20] </span></span> 10K easy-tempo <code>10K</code></a></li><li><a href="#org1d00255">12. <span class="timestamp-wrapper"><span class="timestamp">[2018-05-11 Fri 06:28] </span></span> 5K easy run <code>5k</code></a></li><li><a href="#orga965e3c">13. My Philosophy of Running</a><ul><li><a href="#orgfcf68e2">13.1. <span class="timestamp-wrapper"><span class="timestamp">[2018-05-27 Sun] </span></span> 能量的释放</a></li></ul></li><li><a href="#orgf0f176a">14. <span class="timestamp-wrapper"><span class="timestamp">[2017-11-12 Sun 08:31] </span></span> 6k easy run <code>6k</code></a></li><li><a href="#org05433d9">15. <span class="timestamp-wrapper"><span class="timestamp">[2017-11-12 Sun 08:31] </span></span> 8k easy run <code>8.4k</code></a></li><li><a href="#org8f4ac93">16. <span class="timestamp-wrapper"><span class="timestamp">[2017-11-12 Sun 08:30] </span></span> 101K 12hours race <code>101k</code></a></li><li><a href="#org78648a6">17. <span class="timestamp-wrapper"><span class="timestamp">[2017-11-01 Wed 20:12] </span></span> 16K easy run <code>16K</code></a></li><li><a href="#org6e6c801">18. <span class="timestamp-wrapper"><span class="timestamp">[2017-11-01 Wed 06:10] </span></span> 10K easy run <code>10K</code></a></li><li><a href="#orgecfe5aa">19. <span class="timestamp-wrapper"><span class="timestamp">[2017-10-29 Sun 07:10] </span></span> 10K easy run <code>10K</code></a></li><li><a href="#org104c76b">20. <span class="timestamp-wrapper"><span class="timestamp">[2017-10-25 Wed 22:40] </span></span> 21K tempo run <code>21K</code></a></li><li><a href="#orgc1a8115">21. <span class="timestamp-wrapper"><span class="timestamp">[2017-10-21 Sat 22:04] </span></span> 3K*1+1K*4 interval run <code>10K</code></a></li><li><a href="#org7409bbe">22. <span class="timestamp-wrapper"><span class="timestamp">[2017-10-20 Fri 06:10] </span></span> 10K fartlek run <code>10K + 15K</code></a></li><li><a href="#orgf699312">23. <span class="timestamp-wrapper"><span class="timestamp">[2017-10-17 Tue 23:28] </span></span> 5K tempo run <code>7K</code></a></li><li><a href="#org224adb2">24. <span class="timestamp-wrapper"><span class="timestamp">[2017-10-15 Sun 19:40] </span></span> 10K Tempo Run <code>12K</code></a></li></ul></div></div><a id="more"></a><p>跑步日志</p><div id="outline-container-orgde2ed8a" class="outline-2"><h2 id="orgde2ed8a"><span class="section-number-2">1</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-06-13 Wed] </span></span> 20K easy-tempo <code>20K</code></h2><div class="outline-text-2" id="text-1"><ul class="org-ul"><li>觉得以后周二周三作为背靠背的高强度训练。周二练间歇、速度，周三练 tempo、比赛配速跑。</li><li>今天是持续雨天后的跑步好天气，白天没有日晒，气温湿度都是难得的好，所以就不准备压着心率练高步频小碎步了，改成舒服配速自由跑。找一找自己当前状态，没有比自由跑更合适的了。没有配速、心率的约束，任着心情身体地跑。很快就发现自己现在的舒适配速是 510-520，这大概是几年前首马的状态吧，半年不练就彻底回到解放前了，难怪每次跑起来都那么难受，大概就是心理还没接收身体的现实。</li><li>但一名跑马 6 年级生的优势在于我知道怎样迅速地了解身体、刺激身体、强化身体。目前把混氧能力提升作为训练重心，不偏颇长距离或是速度，把 500-530 的混氧配速作为 90%跑量的配速，仅在每次混氧训练的最后阶段，根据状态选择 400-430 配速的 1 或 2 公里冲击结束训练。</li><li>争取在这个月广马报名启动前，大概半个月内恢复到半马 135 水准，否则后期 7-11 的 5 个月时间是没法冲刺 310 乃至 303 的门槛的，还有 12 小时 118 公里的小金人。</li></ul></div></div><div id="outline-container-org571ff3f" class="outline-2"><h2 id="org571ff3f"><span class="section-number-2">2</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-06-12 Tue] </span></span> 4K tempo <code>4K</code></h2><div class="outline-text-2" id="text-2"><ul class="org-ul"><li>体能训练因为下雨只跑了 1 公里就散伙了，于是加速跑了 3 公里。后两公里提速到 415-420，实在没法稳住，第 4 公里时掉到 430 并放弃了。</li><li>速度的能力还没恢复。这个速度是去年跑半马的配速，而现在 2 公里就已经力竭了。步频在有一定速度的时候，可以自然地稳定在 185 附近，这倒是值得高兴的。</li></ul></div></div><div id="outline-container-org4baabc0" class="outline-2"><h2 id="org4baabc0"><span class="section-number-2">3</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-06-10 Sun] </span></span> 10K easy <code>10K</code></h2><div class="outline-text-2" id="text-3"><ul class="org-ul"><li>想尝试 tempo 跑，结果发现状态一般，退而求其次换成间歇跑，结果发现气温还是有点高，状态并不太佳，最后就沦为慢跑了。</li></ul></div></div><div id="outline-container-org542bc4c" class="outline-2"><h2 id="org542bc4c"><span class="section-number-2">4</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-06-06 Wed] </span></span> 16K easy <code>16K</code></h2><div class="outline-text-2" id="text-4"><ul class="org-ul"><li>步频稳在 188。步频提高确实有成就感，200 指日可待，不过心率有点高，跑姿似乎也不太好看。</li></ul></div></div><div id="outline-container-orgfcd1746" class="outline-2"><h2 id="orgfcd1746"><span class="section-number-2">5</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-06-05 Tue] </span></span> 10K easy <code>10K</code></h2><div class="outline-text-2" id="text-5"><ul class="org-ul"><li>步频到 190 了，只要降低配速还是相对容易达成的。目标 200 不是梦。</li></ul></div></div><div id="outline-container-org9685b88" class="outline-2"><h2 id="org9685b88"><span class="section-number-2">6</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-05-27 Sun] </span></span> 14K tempo <code>14k</code></h2><div class="outline-text-2" id="text-6"><ul class="org-ul"><li>难得的好天气。下午的雨让气温和湿度特别适合运动，虽然白天有别的活动，晚上吃得略晚，但还是决定去跑一会儿。离开运动状态太久，一小时出头的消化休息时间根本不足以让胃部排空，前 4 公里都是龟速慢跑，而且步频没法提高仅维持在 180 出头。第 5 公里开始提点速，决定 4'30 配速跑个五公里，第一公里竟然只有 4'37。后面虽略逼近目标配速，但还是有差，状态果然退步太过。</li><li>后面的休整跑慢慢找到提高步频的一个方法：身体增加前倾，自然地、主动地提膝、落地、弹起，不管后蹬伸髋迈腿的动作。虽然步幅小了，但步频和它相关的技术动作得以保留，这正是最近训练的目标。</li></ul></div></div><div id="outline-container-org6032cbd" class="outline-2"><h2 id="org6032cbd"><span class="section-number-2">7</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-05-23 Wed] </span></span> 12K HF easy <code>12K</code></h2><div class="outline-text-2" id="text-7"><ul class="org-ul"><li>开始尝试高步频练习，目标是 200.目前是 180-185，去年广马前后巅峰状态是 190.可以肯定的是，我这 175 不到的身高，粗短腿只适合高频跑法。趁着夏天没法练别的，好好提高步频期待能突破。今天跑起来刻意关注步频，很轻松就到了 185 的样子。</li></ul></div></div><div id="outline-container-org79b9c32" class="outline-2"><h2 id="org79b9c32"><span class="section-number-2">8</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-05-22 Tue] </span></span> 8K easy run <code>8K</code></h2><div class="outline-text-2" id="text-8"><ul class="org-ul"><li>今天的近 6 分配速慢跑，主要是想练习低心率高步频跑法，把步频从 180 提升到 190-200，如果可能，210 作为巅峰状态。之后再考虑步幅的增大训练，甚至不需考虑。所以不准备去参加下午的体能训练，一者怕晒黑，再者怕辛苦训练的成效被那些步调一致毁了。</li><li>总算又回到跑步这件事上来了。早上 5 点至 5 点半之间起床开跑，就可以完全避开早操的时机，这是个不错的选择，当然就务必加班前洗漱好、11 点回来立马入睡。</li><li>天已渐渐热起来，不太适合速度训练了，参考心率训练的 MAF 大法，准备撸半年的有氧低心率慢跑。每天早起慢跑 1 小时左右，7 点前结束开始收拾洗漱日志。</li></ul></div></div><div id="outline-container-orgfc1dccf" class="outline-2"><h2 id="orgfc1dccf"><span class="section-number-2">9</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-05-18 Fri] </span></span> 6K easy-tempo <code>6K</code></h2><div class="outline-text-2" id="text-9"><ul class="org-ul"><li>早晨再次被蚊虫扰醒了。不论前一晚如何努力地驱蚊，都无法摆脱它们的噩梦。晚上 8 点加班前，点燃了 4 颗驱蚊片，盼着 23 点的下班后的清净，回到宿舍仍是烟雾蒙蒙，折腾一番到 0 点后才睡去。尚是黑夜的凌晨 4 点半，身体终于不堪其扰，把我从睡梦中唤醒。挥赶着“嗡嗡声”起身，看到了满身红肿和墙上的小强，怒意上头地清理它们，于是再没法入睡。</li><li>5 点或是 5 点半就出门跑步一小时，似乎是比 6 点更理想的选择，没有他人的干扰，没有袭人的朝阳，唯一的缺憾是我那可怜的睡眠。不得不吐槽这个万恶的加班制度，一切都是强制性时间，毫无人性的余地。可我是无能为力的，只好让自己浪费更多的时间，牺牲更多的自由，毕竟梦想远比这个废人的单位重要多了。</li><li>今天 6 公里的配速还是很稳的，配度上比前几次少半分钟的样子，跑起来的感觉要轻快些。看来习惯的恢复性养成已有成效，同样的努力程度下，已有从轻松跑变成 Tempo 的趋势。</li></ul></div></div><div id="outline-container-org2e7b573" class="outline-2"><h2 id="org2e7b573"><span class="section-number-2">10</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-05-17 Thu] </span></span> 5K+3K easy-tempo <code>8K</code></h2><div class="outline-text-2" id="text-10"><ul class="org-ul"><li>早上 5 公里还是非常累，一是因为天突然热起来了，二是因为我突然练起来了，这些“突然”本就是累人的。</li><li>再者前一晚和滨仔他们聚餐，吃了点儿小酒和大荤，早上不可避免地肠胃承受不起。虽然速度很慢，对体能的功效微乎其微，却是对跑步养成有大益处的。</li></ul></div></div><div id="outline-container-orgaef989b" class="outline-2"><h2 id="orgaef989b"><span class="section-number-2">11</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-05-12 Sat 06:20] </span></span> 10K easy-tempo <code>10K</code></h2><div class="outline-text-2" id="text-11"><ul class="org-ul"><li>依然跑得有些难受，一者因为早上，一者因为太久没动。安全地提升训练，相信在天气变热之前就能基本恢复，然后养成每天 11 点前睡 5 点多起床跑步的好习惯。</li><li>每天定最低目标和最高目标。当状态不理想，伤痛出现时就以最低目标为准，精神高涨身体进阶时追求当日的更高目标。</li><li>别相信加班熬夜，身体就是在长坐和静养中耗费的。等到再运动时，那种难受程度和大病一场差不多。</li></ul></div></div><div id="outline-container-org1d00255" class="outline-2"><h2 id="org1d00255"><span class="section-number-2">12</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-05-11 Fri 06:28] </span></span> 5K easy run <code>5k</code></h2><div class="outline-text-2" id="text-12"><p>时隔半年，经历了很多个人生活上的大变化，准备向两人一家的目标奔去。再者工作极其磨人耗时，所以跑步健身全都没有下功夫了。大不了重头再来，又有何愁虑呢？</p><p>5 公里 5 分出头配速跑得极其难受，左膝在这种石板路上会难受，毕竟这么久没运动，又有那么多熬夜，身体已经极差。自制自律的作息生活，以及能自由安排的闲暇时间，是快速恢复运动和体能的根本。给自己定几个简单的原则：</p><ul class="org-ul"><li>晚上 12 点前必须睡觉</li><li>早上 6 点前起床跑步</li><li>周五周六必须 10 点左右睡觉</li><li>周末早上 5-6 点能起床拉 20-30 公里长距离。</li><li>每次跑步日记于此，即便不跑步也作为早起晨思的一个窗口。</li></ul><p>现在的状态和跑步新手一模一样，除了有更老道的方法和沧桑的心态，身体的状态是完全一致的。用这篇日志来记录我的训练提升，是再好不过了。</p></div></div><div id="outline-container-orga965e3c" class="outline-2"><h2 id="orga965e3c"><span class="section-number-2">13</span> My Philosophy of Running</h2><div class="outline-text-2" id="text-13"></div><div id="outline-container-orgfcf68e2" class="outline-3"><h3 id="orgfcf68e2"><span class="section-number-3">13.1</span> <span class="timestamp-wrapper"><span class="timestamp">[2018-05-27 Sun] </span></span> 能量的释放</h3><div class="outline-text-3" id="text-13-1"><p>跑步的本质是做功，跑者的功力在于释放能量的控制力，当然这一切都需要数月数年的漫长训练期积攒耐力。随着流畅的步伐一起轻盈的，还有压抑已久的思绪。</p></div></div></div><div id="outline-container-orgf0f176a" class="outline-2"><h2 id="orgf0f176a"><span class="section-number-2">14</span> <span class="timestamp-wrapper"><span class="timestamp">[2017-11-12 Sun 08:31] </span></span> 6k easy run <code>6k</code></h2><div class="outline-text-2" id="text-14"><p>左膝一周过去后仍然没有恢复好，可能是弯道的压力，也可能是旧伤。看来需要每天搓揉、按摩、靠墙深蹲和一些力量训练，来强化膝关节相关的支撑肌肉和筋膜，从而刺激关节迅速修复。</p></div></div><div id="outline-container-org05433d9" class="outline-2"><h2 id="org05433d9"><span class="section-number-2">15</span> <span class="timestamp-wrapper"><span class="timestamp">[2017-11-12 Sun 08:31] </span></span> 8k easy run <code>8.4k</code></h2></div><div id="outline-container-org8f4ac93" class="outline-2"><h2 id="org8f4ac93"><span class="section-number-2">16</span> <span class="timestamp-wrapper"><span class="timestamp">[2017-11-12 Sun 08:30] </span></span> 101K 12hours race <code>101k</code></h2><div class="outline-text-2" id="text-16"><p>这个 12 小时赛的准备，一如既往的准备不足。跑量太少，长距离训练少得可怜。赛前觉得完赛就不错了，跑起来后竟然状态极好，前 6 小时轻松过了 62 公里，直到 80 公里都是稳稳 120K 以上成绩的状态，但后期因为成绩和名次的记录错误，心理很快崩坏。最终 10 小时只完成了 99 公里，117 以上的梦想从现实的激励变成了纠结挣扎的痛处，于是在 100 公里后彻底失去了斗志，剩下的距离和时间，留给下一次 12 小时赛吧。</p></div></div><div id="outline-container-org78648a6" class="outline-2"><h2 id="org78648a6"><span class="section-number-2">17</span> <span class="timestamp-wrapper"><span class="timestamp">[2017-11-01 Wed 20:12] </span></span> 16K easy run <code>16K</code></h2></div><div id="outline-container-org6e6c801" class="outline-2"><h2 id="org6e6c801"><span class="section-number-2">18</span> <span class="timestamp-wrapper"><span class="timestamp">[2017-11-01 Wed 06:10] </span></span> 10K easy run <code>10K</code></h2><div class="outline-text-2" id="text-18"><p>自从周日的银翼杀手 2049 看完，就着凉进入要感冒的节奏，嗓子疼，要发烧。明显地跑不起来、膝盖有轻微痛感，可佛山 12 小时就要到了，争取 100-110，所以还是要练的。</p></div></div><div id="outline-container-orgecfe5aa" class="outline-2"><h2 id="orgecfe5aa"><span class="section-number-2">19</span> <span class="timestamp-wrapper"><span class="timestamp">[2017-10-29 Sun 07:10] </span></span> 10K easy run <code>10K</code></h2><div class="outline-text-2" id="text-19"><p>10 月总跑量 177K，还是停留在了 200K 以下的随意跑的阶段，11 月要进入认真跑的 300+跑量。</p></div></div><div id="outline-container-org104c76b" class="outline-2"><h2 id="org104c76b"><span class="section-number-2">20</span> <span class="timestamp-wrapper"><span class="timestamp">[2017-10-25 Wed 22:40] </span></span> 21K tempo run <code>21K</code></h2><div class="outline-text-2" id="text-20"><p>最近跑步次数和总量太少了，上周也就 4 次不到 50 公里，这周第一次跑就是 21 公里的 Tempo，完成效果还算理想，133 完成，到最后几公里整个腿部的肌肉已经乏力，配速掉了半分钟，膝盖的关节分摊了太多的冲击力，这是伤害膝关节的隐患，务必关注跑动的发力和意念所在，充分热身和放松拉伸。</p></div></div><div id="outline-container-orgc1a8115" class="outline-2"><h2 id="orgc1a8115"><span class="section-number-2">21</span> <span class="timestamp-wrapper"><span class="timestamp">[2017-10-21 Sat 22:04] </span></span> 3K*1+1K*4 interval run <code>10K</code></h2><div class="outline-text-2" id="text-21"><p>今天很想尝试 130 内的半马，但 4'10 内配速才 3 公里就已很勉强，于是换成变速跑，保证今天的训练强度足够大。变速的配速也仅能在 3'52 水平，离预期的水准还有很大差距。</p></div></div><div id="outline-container-org7409bbe" class="outline-2"><h2 id="org7409bbe"><span class="section-number-2">22</span> <span class="timestamp-wrapper"><span class="timestamp">[2017-10-20 Fri 06:10] </span></span> 10K fartlek run <code>10K + 15K</code></h2><div class="outline-text-2" id="text-22"><p>早上气温还是很适合跑步的，本意是慢跑 50 分钟，结果第 3 公里开始提速了，最后完成 10K 的混合速度的跑步。</p><p>晚上跑一个 15K 的 tempo，状态非常理想，4'10 配速完成，10K 跑到了 41'多。可以尝试 21K 的 130 内 PB。</p><p>昨天下午有跑几公里，但属于热身性质.</p></div></div><div id="outline-container-orgf699312" class="outline-2"><h2 id="orgf699312"><span class="section-number-2">23</span> <span class="timestamp-wrapper"><span class="timestamp">[2017-10-17 Tue 23:28] </span></span> 5K tempo run <code>7K</code></h2><div class="outline-text-2" id="text-23"><p>温度开始略微回升，依然是气温舒适、湿度合意的一天，20'10 内完成 5K，结束后 2K 冷身。由于一小时前刚吃晚饭，第三公里肠胃有略微有不适感，稍微降速完成 5K 而非预先想的 10K。估计 PB 能到 20 分内。</p><p>这两天的晨跑因为下雨和加班睡过了 20 分钟，而犹豫不决导致放弃了。明天开始 5:40 起床，当然每天加班回来，务必迅速准备入睡。每天整理床铺、折叠衣服，及时清洗衣服鞋子，做个合格的强迫症患者和处女座完美主义者。</p></div></div><div id="outline-container-org224adb2" class="outline-2"><h2 id="org224adb2"><span class="section-number-2">24</span> <span class="timestamp-wrapper"><span class="timestamp">[2017-10-15 Sun 19:40] </span></span> 10K Tempo Run <code>12K</code></h2><div class="outline-text-2" id="text-24"><p>昨天开始降温至 25 度左右，小雨，43'30 以内完成 10K，结束后降速至 4'50 完成 2.4K 冷身。估计这样的气温下 10K 能 pb 到 42'30 以内，5K 到 21 分内无压力。</p><p>计划每周晨跑 3 次，周末长距离 1 次、夜跑 1 次，这个月跑量必须上 300，下个月的佛山超马基本无望刷数据了，只好用 100 公里完赛作为保底，后续生活稳定了就开始稳定地、连续地跑步训练。</p></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orgde2ed8a&quot;&gt;1. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-06-13 Wed] &lt;/span&gt;&lt;/span&gt; 20K easy-tempo &lt;code&gt;20K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org571ff3f&quot;&gt;2. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-06-12 Tue] &lt;/span&gt;&lt;/span&gt; 4K tempo &lt;code&gt;4K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org4baabc0&quot;&gt;3. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-06-10 Sun] &lt;/span&gt;&lt;/span&gt; 10K easy &lt;code&gt;10K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org542bc4c&quot;&gt;4. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-06-06 Wed] &lt;/span&gt;&lt;/span&gt; 16K easy &lt;code&gt;16K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgfcd1746&quot;&gt;5. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-06-05 Tue] &lt;/span&gt;&lt;/span&gt; 10K easy &lt;code&gt;10K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org9685b88&quot;&gt;6. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-05-27 Sun] &lt;/span&gt;&lt;/span&gt; 14K tempo &lt;code&gt;14k&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org6032cbd&quot;&gt;7. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-05-23 Wed] &lt;/span&gt;&lt;/span&gt; 12K HF easy &lt;code&gt;12K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org79b9c32&quot;&gt;8. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-05-22 Tue] &lt;/span&gt;&lt;/span&gt; 8K easy run &lt;code&gt;8K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgfc1dccf&quot;&gt;9. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-05-18 Fri] &lt;/span&gt;&lt;/span&gt; 6K easy-tempo &lt;code&gt;6K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org2e7b573&quot;&gt;10. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-05-17 Thu] &lt;/span&gt;&lt;/span&gt; 5K+3K easy-tempo &lt;code&gt;8K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgaef989b&quot;&gt;11. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-05-12 Sat 06:20] &lt;/span&gt;&lt;/span&gt; 10K easy-tempo &lt;code&gt;10K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org1d00255&quot;&gt;12. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-05-11 Fri 06:28] &lt;/span&gt;&lt;/span&gt; 5K easy run &lt;code&gt;5k&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orga965e3c&quot;&gt;13. My Philosophy of Running&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orgfcf68e2&quot;&gt;13.1. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2018-05-27 Sun] &lt;/span&gt;&lt;/span&gt; 能量的释放&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgf0f176a&quot;&gt;14. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2017-11-12 Sun 08:31] &lt;/span&gt;&lt;/span&gt; 6k easy run &lt;code&gt;6k&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org05433d9&quot;&gt;15. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2017-11-12 Sun 08:31] &lt;/span&gt;&lt;/span&gt; 8k easy run &lt;code&gt;8.4k&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org8f4ac93&quot;&gt;16. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2017-11-12 Sun 08:30] &lt;/span&gt;&lt;/span&gt; 101K 12hours race &lt;code&gt;101k&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org78648a6&quot;&gt;17. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2017-11-01 Wed 20:12] &lt;/span&gt;&lt;/span&gt; 16K easy run &lt;code&gt;16K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org6e6c801&quot;&gt;18. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2017-11-01 Wed 06:10] &lt;/span&gt;&lt;/span&gt; 10K easy run &lt;code&gt;10K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgecfe5aa&quot;&gt;19. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2017-10-29 Sun 07:10] &lt;/span&gt;&lt;/span&gt; 10K easy run &lt;code&gt;10K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org104c76b&quot;&gt;20. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2017-10-25 Wed 22:40] &lt;/span&gt;&lt;/span&gt; 21K tempo run &lt;code&gt;21K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgc1a8115&quot;&gt;21. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2017-10-21 Sat 22:04] &lt;/span&gt;&lt;/span&gt; 3K*1+1K*4 interval run &lt;code&gt;10K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org7409bbe&quot;&gt;22. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2017-10-20 Fri 06:10] &lt;/span&gt;&lt;/span&gt; 10K fartlek run &lt;code&gt;10K + 15K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgf699312&quot;&gt;23. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2017-10-17 Tue 23:28] &lt;/span&gt;&lt;/span&gt; 5K tempo run &lt;code&gt;7K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org224adb2&quot;&gt;24. &lt;span class=&quot;timestamp-wrapper&quot;&gt;&lt;span class=&quot;timestamp&quot;&gt;[2017-10-15 Sun 19:40] &lt;/span&gt;&lt;/span&gt; 10K Tempo Run &lt;code&gt;12K&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="runner" scheme="https://angry-bird.github.io/categories/runner/"/>
    
    
      <category term="marathon" scheme="https://angry-bird.github.io/tags/marathon/"/>
    
      <category term="training" scheme="https://angry-bird.github.io/tags/training/"/>
    
  </entry>
  
  <entry>
    <title>Shell Text Stream</title>
    <link href="https://angry-bird.github.io/2018/08/30/Shell%20Text%20Stream/"/>
    <id>https://angry-bird.github.io/2018/08/30/Shell Text Stream/</id>
    <published>2018-08-30T00:00:00.000Z</published>
    <updated>2018-08-30T06:48:34.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#org50f4573">1. Query with column in text</a><ul><li><a href="#org4096f5b">1.1. Preprocess of text</a></li><li><a href="#org08f0401">1.2. Query IP GeoLocation</a></li><li><a href="#org3dad054">1.3. Query MAC Vendor</a></li></ul></li></ul></div></div><a id="more"></a><p>Deal text with sort, tail, head, cut, diff, grep, sed, awk.</p><div id="outline-container-org50f4573" class="outline-2"><h2 id="org50f4573"><span class="section-number-2">1</span> Query with column in text</h2><div class="outline-text-2" id="text-1"></div><div id="outline-container-org4096f5b" class="outline-3"><h3 id="org4096f5b"><span class="section-number-3">1.1</span> Preprocess of text</h3><div class="outline-text-3" id="text-1-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">awk -F <span class="string">'[@-]'</span> <span class="string">'/@gmail.com/{print $1,$3}'</span> access.log | awk -F <span class="string">'[[/=]'</span> <span class="string">'{print $1, $NF}'</span>&gt;ip_user.txt | sort -V | uniq -c &gt; ip_user_sort.txt</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org08f0401" class="outline-3"><h3 id="org08f0401"><span class="section-number-3">1.2</span> Query IP GeoLocation</h3><div class="outline-text-3" id="text-1-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### Default delimiter is blankspace.</span></span><br><span class="line">awk <span class="string">'{print $1}'</span> hosts.txt</span><br><span class="line">awk <span class="string">'BEGIN {print "IP\n---"} {print $1}'</span> hosts.txt</span><br><span class="line">awk <span class="string">'BEGIN {print "IP"; print "---"} {print $1} END {print "---"}'</span> hosts.txt</span><br><span class="line"><span class="comment">### Define another delimiter with -f 'x'.</span></span><br><span class="line">awk -F <span class="string">':'</span> <span class="string">'{print $1}'</span> hosts.txt</span><br><span class="line">awk -F: <span class="string">'{print $1}'</span> hosts.txt</span><br><span class="line"><span class="comment">###</span></span><br><span class="line">awk -F <span class="string">'[::]'</span> <span class="string">'{print $1}'</span> hosts.txt</span><br><span class="line"><span class="comment">### Default action is print the line.</span></span><br><span class="line">awk -F: <span class="string">'/root/'</span> /etc/passwd</span><br><span class="line">awk -F: <span class="string">'/root/{print $1}'</span> /etc/passwd</span><br></pre></td></tr></table></figure></div></div><div id="outline-container-org758472e" class="outline-4"><h4 id="org758472e">Detect Private IP</h4><div class="outline-text-4" id="text-org758472e"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-org3dad054" class="outline-3"><h3 id="org3dad054"><span class="section-number-3">1.3</span> Query MAC Vendor</h3><div class="outline-text-3" id="text-1-3"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></div></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org50f4573&quot;&gt;1. Query with column in text&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org4096f5b&quot;&gt;1.1. Preprocess of text&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org08f0401&quot;&gt;1.2. Query IP GeoLocation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org3dad054&quot;&gt;1.3. Query MAC Vendor&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="linux" scheme="https://angry-bird.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://angry-bird.github.io/tags/linux/"/>
    
      <category term="shell" scheme="https://angry-bird.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>Python3 UDP</title>
    <link href="https://angry-bird.github.io/2018/08/25/Python3-UDP/"/>
    <id>https://angry-bird.github.io/2018/08/25/Python3-UDP/</id>
    <published>2018-08-25T00:00:00.000Z</published>
    <updated>2018-08-25T10:49:54.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#org12a3a26">1. socket</a><ul><li><a href="#org9529d22">1.1. Python3 Coding Style</a></li><li><a href="#orga5b145b">1.2. TCP Client</a></li><li><a href="#orga4f8c29">1.3. UDP Client</a></li><li><a href="#org50444f8">1.4. test</a></li><li><a href="#org1397777">1.5. UDP Server</a></li></ul></li><li><a href="#org203bb5a">2. Scan</a><ul><li><a href="#org7ff439d">2.1. class IP</a></li><li><a href="#org4259b7b">2.2. class ICMP</a></li><li><a href="#org288c449">2.3. scan.py</a></li></ul></li></ul></div></div><a id="more"></a><p>Memos to socket programming in python3.</p><div id="outline-container-org12a3a26" class="outline-2"><h2 id="org12a3a26"><span class="section-number-2">1</span> socket</h2><div class="outline-text-2" id="text-1"><ul class="org-ul"><li>Tcp socket is a little different but common and reliable connection.</li><li>Linux must run python as sudo.</li><li>Python3 socket only deal with binary data, must encode user data.</li><li>Host IP must be actual address, not 127.0.0.1.</li></ul></div><div id="outline-container-org9529d22" class="outline-3"><h3 id="org9529d22"><span class="section-number-3">1.1</span> Python3 Coding Style</h3><div class="outline-text-3" id="text-1-1"><p>Add this info at head of every <b>filename.py</b>.</p><div class="org-src-container"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*-coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span><br><span class="line">| author: demo@demo.com</span><br><span class="line">| date: 08/24/2018</span><br><span class="line">| desc: Learn Socket</span><br><span class="line">| version: 0.1</span><br><span class="line">'''</span></span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orga5b145b" class="outline-3"><h3 id="orga5b145b"><span class="section-number-3">1.2</span> TCP Client</h3><div class="outline-text-3" id="text-1-2"><div class="org-src-container"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">target_host = <span class="string">"www.baidu.com"</span></span><br><span class="line">target_port = <span class="number">80</span></span><br><span class="line"></span><br><span class="line">client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">client.connect((target_host,target_port))</span><br><span class="line">client.send(<span class="string">"GET / HTTP/1.1\r\nHost: baidu.com\r\n\r\n"</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">response = client.recv(<span class="number">4096</span>)</span><br><span class="line">print(response)</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orga4f8c29" class="outline-3"><h3 id="orga4f8c29"><span class="section-number-3">1.3</span> UDP Client</h3><div class="outline-text-3" id="text-1-3"><div class="org-src-container"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">host = <span class="string">"192.168.11.113"</span></span><br><span class="line">port = <span class="number">32000</span></span><br><span class="line">udp_client = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    <span class="comment"># data = 'hello'.encode(encoding='utf-8')</span></span><br><span class="line">    data = input(<span class="string">'&gt;&gt;&gt;'</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    addr = (host, port)</span><br><span class="line"><span class="comment">### Python3 socket only deal with binary data, must encode user data.</span></span><br><span class="line">    udp_client.sendto(data.encode(encoding=<span class="string">'utf-8'</span>), addr)</span><br><span class="line">    print(<span class="string">'Sending: '</span>, addr, data)</span><br><span class="line">    data,addr = udp_client.recvfrom(<span class="number">1024</span>)</span><br><span class="line">    print(<span class="string">'Recv from'</span>, addr, data)</span><br><span class="line"></span><br><span class="line">udp_client.close()</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org50444f8" class="outline-3"><h3 id="org50444f8"><span class="section-number-3">1.4</span> test</h3><div class="outline-text-3" id="text-1-4"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### Must run .py as sudo</span></span><br><span class="line">sudo python udp.py</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org1397777" class="outline-3"><h3 id="org1397777"><span class="section-number-3">1.5</span> UDP Server</h3><div class="outline-text-3" id="text-1-5"><div class="org-src-container"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment">### Make sure the host's IP is empty to listen on all IP.</span></span><br><span class="line"><span class="comment">### Or actual IP addr, not 127.0.0.1 which make trouble.</span></span><br><span class="line">ip_port=(<span class="string">''</span>,<span class="number">32000</span>)</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">udp_server=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)</span><br><span class="line">udp_server.bind(ip_port)</span><br><span class="line">print(<span class="string">'Waiting for connection...'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    msg,addr=udp_server.recvfrom(BUFSIZE)</span><br><span class="line">    print(<span class="string">'Recv from'</span>, addr, msg)</span><br><span class="line">    udp_server.sendto(msg, addr)</span><br><span class="line">    print(<span class="string">'Send back'</span>, addr, msg)</span><br><span class="line"></span><br><span class="line">udp_server.close()</span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-org203bb5a" class="outline-2"><h2 id="org203bb5a"><span class="section-number-2">2</span> Scan</h2><div class="outline-text-2" id="text-2"><ul class="org-ul"><li>TCP, UDP, ICMP are IP packets.</li><li>Use struct.unpack network stream to C strings.</li><li>Send UDP packets, and decode ICMP packets.</li></ul></div><div id="outline-container-org7ff439d" class="outline-3"><h3 id="org7ff439d"><span class="section-number-3">2.1</span> class IP</h3><div class="outline-text-3" id="text-2-1"><div class="org-src-container"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IP</span><span class="params">(ctypes.Structure)</span>:</span></span><br><span class="line">    _fields_ = [</span><br><span class="line">        (<span class="string">'ihl'</span>, ctypes.c_ubyte, <span class="number">4</span>),</span><br><span class="line">        (<span class="string">'ver'</span>, ctypes.c_ubyte, <span class="number">4</span>),</span><br><span class="line">        (<span class="string">'tos'</span>, ctypes.c_ubyte),</span><br><span class="line">        (<span class="string">'len'</span>, ctypes.c_ushort),</span><br><span class="line">        (<span class="string">'id'</span>, ctypes.c_ushort),</span><br><span class="line">        (<span class="string">'offset'</span>, ctypes.c_ushort),</span><br><span class="line">        (<span class="string">'ttl'</span>, ctypes.c_ubyte),</span><br><span class="line">        (<span class="string">'pro'</span>, ctypes.c_ubyte),</span><br><span class="line">        (<span class="string">'sum'</span>, ctypes.c_ushort),</span><br><span class="line">        (<span class="string">'src'</span>, ctypes.c_uint),</span><br><span class="line">        (<span class="string">'dst'</span>, ctypes.c_uint),</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(self, socket_buffer)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.from_buffer_copy(socket_buffer)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, socket_buffer)</span>:</span></span><br><span class="line">        self.protocol_map = {<span class="number">1</span>:<span class="string">"ICMP"</span>, <span class="number">6</span>:<span class="string">"TCP"</span>, <span class="number">17</span>:<span class="string">"UDP"</span>}</span><br><span class="line">        self.src_addr = socket.inet_ntoa(struct.pack(<span class="string">"&lt;L"</span>,self.src))</span><br><span class="line">        self.dst_addr = socket.inet_ntoa(struct.pack(<span class="string">"&lt;L"</span>,self.dst))</span><br><span class="line">        self.ihlen = self.ihl * <span class="number">4</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.protocol = self.protocol_map[self.pro]</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            self.protocol = str(self.pro)</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org4259b7b" class="outline-3"><h3 id="org4259b7b"><span class="section-number-3">2.2</span> class ICMP</h3><div class="outline-text-3" id="text-2-2"><div class="org-src-container"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ICMP</span><span class="params">(ctypes.Structure)</span>:</span></span><br><span class="line">    _fields_ = [</span><br><span class="line">        (<span class="string">'type'</span>, ctypes.c_ubyte),</span><br><span class="line">        (<span class="string">'code'</span>, ctypes.c_ubyte),</span><br><span class="line">        (<span class="string">'sum'</span>, ctypes.c_ushort),</span><br><span class="line">        (<span class="string">'id'</span>, ctypes.c_ushort),</span><br><span class="line">        (<span class="string">'seq'</span>, ctypes.c_ushort),</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(self, socket_buffer)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.from_buffer_copy(socket_buffer)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, socket_buffer)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org288c449" class="outline-3"><h3 id="org288c449"><span class="section-number-3">2.3</span> scan.py</h3><div class="outline-text-3" id="text-2-3"><div class="org-src-container"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*-coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span><br><span class="line">| author: demo@echo.com</span><br><span class="line">| date: 08/24/2018</span><br><span class="line">| desc: UDP tools</span><br><span class="line">| version: 0.1</span><br><span class="line">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> ctypes</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="keyword">import</span> netaddr</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> fcntl</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ColorTxt</span>:</span></span><br><span class="line">    imp = <span class="string">'\033[1;33m[!]\033[1;m '</span></span><br><span class="line">    err = <span class="string">'\033[1;35m[*]\033[1;m '</span></span><br><span class="line">    que = <span class="string">'\033[1;34m[?]\033[1;m '</span></span><br><span class="line">    ski = <span class="string">'\033[1;31m[-]\033[1;m '</span></span><br><span class="line">    tar = <span class="string">'\033[1;32m[+]\033[1;m '</span></span><br><span class="line">    run = <span class="string">'\033[1;36m[~]\033[1;m '</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IP</span><span class="params">(ctypes.Structure)</span>:</span></span><br><span class="line">    _fields_ = [</span><br><span class="line">        (<span class="string">'ihl'</span>, ctypes.c_ubyte, <span class="number">4</span>),</span><br><span class="line">        (<span class="string">'ver'</span>, ctypes.c_ubyte, <span class="number">4</span>),</span><br><span class="line">        (<span class="string">'tos'</span>, ctypes.c_ubyte),</span><br><span class="line">        (<span class="string">'len'</span>, ctypes.c_ushort),</span><br><span class="line">        (<span class="string">'id'</span>, ctypes.c_ushort),</span><br><span class="line">        (<span class="string">'offset'</span>, ctypes.c_ushort),</span><br><span class="line">        (<span class="string">'ttl'</span>, ctypes.c_ubyte),</span><br><span class="line">        (<span class="string">'pro'</span>, ctypes.c_ubyte),</span><br><span class="line">        (<span class="string">'sum'</span>, ctypes.c_ushort),</span><br><span class="line">        (<span class="string">'src'</span>, ctypes.c_uint),</span><br><span class="line">        (<span class="string">'dst'</span>, ctypes.c_uint),</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(self, socket_buffer)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.from_buffer_copy(socket_buffer)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, socket_buffer)</span>:</span></span><br><span class="line">        self.protocol_map = {<span class="number">1</span>:<span class="string">"ICMP"</span>, <span class="number">6</span>:<span class="string">"TCP"</span>, <span class="number">17</span>:<span class="string">"UDP"</span>}</span><br><span class="line">        self.src_addr = socket.inet_ntoa(struct.pack(<span class="string">"&lt;L"</span>,self.src))</span><br><span class="line">        self.dst_addr = socket.inet_ntoa(struct.pack(<span class="string">"&lt;L"</span>,self.dst))</span><br><span class="line">        self.ihlen = self.ihl * <span class="number">4</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.protocol = self.protocol_map[self.pro]</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            self.protocol = str(self.pro)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ICMP</span><span class="params">(ctypes.Structure)</span>:</span></span><br><span class="line">    _fields_ = [</span><br><span class="line">        (<span class="string">'type'</span>, ctypes.c_ubyte),</span><br><span class="line">        (<span class="string">'code'</span>, ctypes.c_ubyte),</span><br><span class="line">        (<span class="string">'sum'</span>, ctypes.c_ushort),</span><br><span class="line">        (<span class="string">'id'</span>, ctypes.c_ushort),</span><br><span class="line">        (<span class="string">'seq'</span>, ctypes.c_ushort),</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(self, socket_buffer)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.from_buffer_copy(socket_buffer)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, socket_buffer)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">HOST = <span class="string">"192.168.11.113"</span></span><br><span class="line">SUBNET = <span class="string">'192.168.11.0/24'</span></span><br><span class="line">MESSAGE = <span class="string">'hello'</span>.encode(encoding=<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">udp_sender</span><span class="params">(SUBNET, MESSAGE)</span>:</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    sender = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">    <span class="keyword">for</span> ip <span class="keyword">in</span> netaddr.IPNetwork(SUBNET):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            sender.sendto(MESSAGE, (<span class="string">"%s"</span> % ip, <span class="number">32000</span>))</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">if</span> os.name==<span class="string">'nt'</span>:</span><br><span class="line">        socket_protocol = socket.IPPROTO_IP</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        socket_protocol = socket.IPPROTO_ICMP</span><br><span class="line"></span><br><span class="line">    sniffer = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket_protocol)</span><br><span class="line">    sniffer.bind((HOST, <span class="number">0</span>))</span><br><span class="line">    sniffer.setsockopt(socket.IPPROTO_IP, socket.IP_HDRINCL, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> os.name == <span class="string">'nt'</span>:</span><br><span class="line">        sniffer.ioctl(socket.SIO_RCVALL, socket.RCVALL_ON)</span><br><span class="line"></span><br><span class="line">    t = threading.Thread(target = udp_sender, args = (SUBNET, MESSAGE))</span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">            raw_buffer = sniffer.recvfrom(<span class="number">65565</span>)[<span class="number">0</span>]</span><br><span class="line">            ip_header = IP(raw_buffer)</span><br><span class="line"></span><br><span class="line">            buf = raw_buffer[ip_header.ihlen:ip_header.ihlen + ctypes.sizeof(ICMP)]</span><br><span class="line">            icmp_header = ICMP(buf)</span><br><span class="line">            <span class="comment"># print ("[*] Received -&gt; Protocol:%s, Source:%s, TTL:%d, Type:%d, Code:%d" % (ip_header.protocol, ip_header.src_addr, ip_header.ttl, icmp_header.type, icmp_header.code))</span></span><br><span class="line">            <span class="keyword">if</span> icmp_header.code == <span class="number">3</span> <span class="keyword">and</span> icmp_header.type == <span class="number">3</span>:</span><br><span class="line">                <span class="keyword">if</span> netaddr.IPAddress(ip_header.src_addr) <span class="keyword">in</span> netaddr.IPNetwork(SUBNET):</span><br><span class="line">                    <span class="comment"># print(raw_buffer[len(raw_buffer) - len(MESSAGE):])</span></span><br><span class="line">                    <span class="keyword">if</span> raw_buffer[len(raw_buffer) - len(MESSAGE):] == MESSAGE:</span><br><span class="line">                        <span class="keyword">print</span> (<span class="string">'%s%s is up'</span> %  (ColorTxt.tar, ip_header.src_addr))</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        <span class="keyword">print</span> (<span class="string">'%s%s appears to be up'</span> %  (ColorTxt.tar, ip_header.src_addr))</span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt <span class="keyword">as</span> e:</span><br><span class="line">        print(ColorTxt.err, <span class="string">'Quit'</span>)</span><br><span class="line">        <span class="keyword">if</span> os.name == <span class="string">'nt'</span>:</span><br><span class="line">            sniffer.ioctl(socket.SIO_RCVALL, socket.RCVALL_OFF)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></div></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org12a3a26&quot;&gt;1. socket&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org9529d22&quot;&gt;1.1. Python3 Coding Style&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orga5b145b&quot;&gt;1.2. TCP Client&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orga4f8c29&quot;&gt;1.3. UDP Client&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org50444f8&quot;&gt;1.4. test&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org1397777&quot;&gt;1.5. UDP Server&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org203bb5a&quot;&gt;2. Scan&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org7ff439d&quot;&gt;2.1. class IP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org4259b7b&quot;&gt;2.2. class ICMP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org288c449&quot;&gt;2.3. scan.py&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="python3" scheme="https://angry-bird.github.io/categories/python3/"/>
    
    
      <category term="UDP" scheme="https://angry-bird.github.io/tags/UDP/"/>
    
      <category term="socket" scheme="https://angry-bird.github.io/tags/socket/"/>
    
      <category term="python3" scheme="https://angry-bird.github.io/tags/python3/"/>
    
  </entry>
  
  <entry>
    <title>ffmpeg</title>
    <link href="https://angry-bird.github.io/2018/02/24/ffmpeg/"/>
    <id>https://angry-bird.github.io/2018/02/24/ffmpeg/</id>
    <published>2018-02-24T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#orgf5eeded">1. About</a></li><li><a href="#org9321903">2. concat</a></li><li><a href="#org7610a6b">3. split</a></li><li><a href="#org8d71104">4. convert</a></li></ul></div></div><a id="more"></a><div id="outline-container-orgf5eeded" class="outline-2"><h2 id="orgf5eeded"><span class="section-number-2">1</span> About</h2><div class="outline-text-2" id="text-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ffmpeg -i video.avi</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org9321903" class="outline-2"><h2 id="org9321903"><span class="section-number-2">2</span> concat</h2><div class="outline-text-2" id="text-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment"># ls *.mkv &gt;&gt; list.txt</span></span><br><span class="line">file <span class="string">'/path/to/file1'</span></span><br><span class="line">file <span class="string">'/path/to/file2'</span></span><br><span class="line">file <span class="string">'/path/to/file3'</span></span><br><span class="line"></span><br><span class="line">ffmpeg <span class="operator">-f</span> concat -i list.txt -c copy output</span><br><span class="line">ffmpeg -i <span class="string">"concat:file1.mpg|file2.mpg|file3.mpg"</span> -c copy output.mpg</span><br><span class="line"></span><br><span class="line"><span class="comment">### Merge images as video</span></span><br><span class="line">ffmpeg <span class="operator">-f</span> image2 -i img%d.jpg video.mpg</span><br><span class="line"><span class="comment">### Or the opposite way</span></span><br><span class="line">ffmpeg -i video.mpg img%d.gif</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org7610a6b" class="outline-2"><h2 id="org7610a6b"><span class="section-number-2">3</span> split</h2><div class="outline-text-2" id="text-3"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### Crop to 1080x1080</span></span><br><span class="line">ffmpeg -i input.mp4 strict -<span class="number">2</span> -vf crop=<span class="number">1080</span>:<span class="number">1080</span>:<span class="number">0</span>:<span class="number">420</span> output.mp4</span><br><span class="line"><span class="comment">### Split with timestamp</span></span><br><span class="line">ffmpeg -i input.mp4 -vcodec copy -acodec copy -ss <span class="number">0</span>:<span class="number">12</span>:<span class="number">34</span> -t <span class="number">0</span>:<span class="number">10</span>:<span class="number">00</span> <span class="number">10</span>.mins.split.mp4</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org8d71104" class="outline-2"><h2 id="org8d71104"><span class="section-number-2">4</span> convert</h2><div class="outline-text-2" id="text-4"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### Scale 1080p to 480p</span></span><br><span class="line">ffmpeg -i input.mp4 -vf scale=<span class="number">853</span>:<span class="number">480</span> -acodec aac -vcodec h264 output.mp4</span><br><span class="line"><span class="comment">### Convert avi to mp4</span></span><br><span class="line">ffmpeg -i input.avi -c:v h264 output.mp4</span><br><span class="line">ffmpeg -i input.avi -c:v libx264 -crf <span class="number">24</span> output.mp4</span><br><span class="line"><span class="comment">### Convert between avi and mpg, gif</span></span><br><span class="line">ffmpeg -i video.avi video.mpg</span><br><span class="line">ffmpeg -i video.mpg video.avi</span><br><span class="line">ffmpeg -i video.avi anime.gif</span><br><span class="line"><span class="comment">### Extract audio from video</span></span><br><span class="line">ffmpeg -i video.avi -vn -ar <span class="number">44100</span> -ac <span class="number">2</span> -ab <span class="number">192</span> <span class="operator">-f</span> mp3 sound.mp3</span><br><span class="line"><span class="comment">### Encapsulation video and audio files into mp4/mkv</span></span><br><span class="line">ffmpeg -i video.avi -i audio.aac -vcodec copy -acodec copy output.mp4</span><br></pre></td></tr></table></figure></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orgf5eeded&quot;&gt;1. About&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org9321903&quot;&gt;2. concat&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org7610a6b&quot;&gt;3. split&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org8d71104&quot;&gt;4. convert&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="linux" scheme="https://angry-bird.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://angry-bird.github.io/tags/linux/"/>
    
      <category term="ffmpeg" scheme="https://angry-bird.github.io/tags/ffmpeg/"/>
    
  </entry>
  
  <entry>
    <title>odoo</title>
    <link href="https://angry-bird.github.io/2018/02/24/odoo/"/>
    <id>https://angry-bird.github.io/2018/02/24/odoo/</id>
    <published>2018-02-24T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#org13e0a33">1. Installing odoo CE11 on Ubuntu16.04</a></li><li><a href="#org59afe48">2. Configuration</a></li><li><a href="#org4b60c94">3. Modules/Addon</a></li><li><a href="#orgecfb3ad">4. API</a></li><li><a href="#org785056a">5. Issues</a></li></ul></div></div><a id="more"></a><p>odoo<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> is a suite of web based open source apps of Enterprise Resource Planning(ERP).</p><div id="outline-container-org13e0a33" class="outline-2"><h2 id="org13e0a33"><span class="section-number-2">1</span> Installing odoo CE11 on Ubuntu16.04</h2><div class="outline-text-2" id="text-1"></div><div id="outline-container-org6bb9957" class="outline-3"><h3 id="org6bb9957"><span class="section-number-3">1.1</span> Prepare</h3><div class="outline-text-3" id="text-1-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> sudo adduser -m -g sudo <span class="operator">-s</span> /bin/bash odoo</span><br><span class="line"> sudo passwd odoo</span><br><span class="line"> sudo vi /etc/sudoers</span><br><span class="line"> <span class="comment">### Add odoo to sudoer group.</span></span><br><span class="line"> <span class="comment">### Then change root to odoo.</span></span><br><span class="line"> su odoo</span><br><span class="line"></span><br><span class="line"> sudo apt-get update &amp;&amp; sudo apt-get upgrade</span><br><span class="line"> sudo apt-get install -y wget git zsh postgresql npm python3-pip</span><br><span class="line"> sudo ln <span class="operator">-s</span> /usr/bin/nodejs /usr/bin/node</span><br><span class="line"> sudo npm install -g less</span><br><span class="line"> sudo pip3 install Babel decorator docutils ebaysdk feedparser gevent greenlet html2text Jinja2 lxml Mako MarkupSafe mock num2words ofxparse passlib Pillow psutil psycogreen psycopg2 pydot pyparsing PyPDF2 pyserial python-dateutil python-openid pytz pyusb PyYAML qrcode reportlab requests six suds-jurko vatnumber vobject Werkzeug XlsxWriter xlwt xlrd</span><br><span class="line"></span><br><span class="line">wget http://download.gna.org/wkhtmltopdf/<span class="number">0.12</span>/<span class="number">0.12</span>.<span class="number">3</span>/wkhtmltox-<span class="number">0.12</span>.<span class="number">3</span>_linux-generic-amd64.tar.xz /opt/</span><br><span class="line">tar -xJf wkhtmlox-<span class="number">0.12</span>.<span class="number">3</span>_linux-generic-amd64.tar.xz</span><br><span class="line">sudo chown root:root /opt/wkhtmltopdf</span><br><span class="line">sudo chmod +x /opt/wkhtmltopdf</span><br><span class="line">sudo ln <span class="operator">-s</span> /opt/wkhtmltopdf /usr/<span class="built_in">local</span>/bin/wkhtmltopdf</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgbf72aa7" class="outline-3"><h3 id="orgbf72aa7"><span class="section-number-3">1.2</span> Odoo</h3><div class="outline-text-3" id="text-1-2"></div><div id="outline-container-org1df2e67" class="outline-4"><h4 id="org1df2e67">from nightly</h4><div class="outline-text-4" id="text-org1df2e67"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget -O - https://nightly.odoo.com/odoo.key | sudo apt-key add -</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"deb http://nightly.odoo.com/11.0/nightly/deb/ ./"</span> &gt;&gt; odoo.list</span><br><span class="line">sudo mv odoo.list /etc/apt/sources.list.d/</span><br><span class="line">sudo apt-get update &amp;&amp; sudo apt-get install odoo</span><br></pre></td></tr></table></figure></div><p>If it returns error with chown /var/odoo, just mkdir of this repository.</p></div></div><div id="outline-container-org27da744" class="outline-4"><h4 id="org27da744">from github source code</h4><div class="outline-text-4" id="text-org27da744"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/odoo/odoo.git odoo11 -b <span class="number">11.0</span> --depth=<span class="number">1</span></span><br><span class="line">sudo chown -R odoo:odoo odoo11</span><br><span class="line"><span class="built_in">cd</span> odoo11</span><br><span class="line">./odoo-bin <span class="operator">-s</span></span><br><span class="line">ps aux | grep odoo</span><br></pre></td></tr></table></figure></div></div></div></div></div><div id="outline-container-org59afe48" class="outline-2"><h2 id="org59afe48"><span class="section-number-2">2</span> Configuration</h2><div class="outline-text-2" id="text-2"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line"># sudo vi /etc/odoo/odoo.conf&#10;### Custom addons path&#10;addons_path = /usr/lib/python3/dist-packages/odoo/addons/,/home/odoo/addons&#10;### Custom http port&#10;http_port = 8089</span><br></pre></td></tr></table></figure></div></div><div id="outline-container-org25e3e70" class="outline-3"><h3 id="org25e3e70"><span class="section-number-3">2.1</span> nginx reverse proxy<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup></h3><div class="outline-text-3" id="text-2-1"></div><div id="outline-container-org9f69283" class="outline-4"><h4 id="org9f69283">https 443</h4><div class="outline-text-4" id="text-org9f69283"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br><span class="line"><span class="comment">### Remove nginx's default config of port 80, or just change 80 to 8080 in this file</span></span><br><span class="line">sudo rm /etc/nginx/sites-avaliable/default</span><br><span class="line">sudo vim /etc/nginx/sites-avalibale/odoo.conf</span><br><span class="line"><span class="comment"># openssl req -x509 -days 3650 -subj '/CN=your.domain/' -nodes -newkey rsa:2048 -keyout server.key -out server.crt</span></span><br><span class="line">openssl req -x509 -days <span class="number">3650</span> -nodes -newkey rsa:<span class="number">2048</span> -keyout server.key -out server.crt</span><br><span class="line">sudo mkdir /etc/ssl/nginx</span><br><span class="line">sudo mv server.crt server.key /etc/ssl/nginx</span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">server {&#10;    listen      443 default;&#10;    server_name odoo11s;&#10;&#10;    access_log /var/log/nginx/odoo.access.log;&#10;    error_log  /var/log/nginx/odoo.error.log;&#10;&#10;    ssl on;&#10;    ssl_certificate     /etc/ssl/nginx/server.crt;&#10;    ssl_certificate_key /etc/ssl/nginx/server.key;&#10;    ssl_ciphers             HIGH:!ADH:!MD5;&#10;    ssl_protocols           SSLv3 TLSv1;&#10;    ssl_prefer_server_ciphers on;&#10;&#10;    location / {&#10;        proxy_pass http://127.0.0.1:8089;&#10;        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;&#10;&#10;        proxy_buffer_size 128k;&#10;        proxy_buffers 16 64k;&#10;        proxy_redirect off;&#10;&#10;        proxy_set_header Host $host;&#10;        proxy_set_header X-Real-IP $remote_addr;&#10;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&#10;        proxy_set_header X-Forwarded-Host $host;&#10;        proxy_set_header X-Forwarded-Proto https;&#10;    }&#10;&#10;   location ~* /web/static/ {&#10;        proxy_cache_valid 200 60m;&#10;        proxy_buffering    on;&#10;        expires 864000;&#10;        proxy_pass http://127.0.0.1:8089;&#10;    }&#10;}&#10;&#10;# port proxy 80 to 443&#10;server {&#10;    listen 80;&#10;    server_name odoo11s;&#10;&#10;    add_header Strict-Transport-Security max-age=2592000;&#10;    rewrite ^/.*$ https://$host$request_uri? permanent;&#10;}</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgaefc2db" class="outline-4"><h4 id="orgaefc2db">http port 8089 to http 80<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup></h4><div class="outline-text-4" id="text-orgaefc2db"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo rm /etc/nginx/sites-enabled/default</span><br><span class="line"><span class="comment">### Paste following area codes to this file.</span></span><br><span class="line">sudo vim /etc/nginx/sites-available/odoo</span><br><span class="line"><span class="comment"># sudo ln -s /etc/nginx/sites-available/odoo /etc/nginx/sites-enabled/odoo</span></span><br><span class="line"><span class="comment">### Test nginx's new config</span></span><br><span class="line">sudo nginx -t</span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">upstream odoo {&#10;    server 127.0.0.1:8089;&#10;}&#10;server {&#10;    listen      80 default;&#10;    server_name odoo11;&#10;&#10;    # log files&#10;    access_log  /var/log/nginx/odoo.access.log;&#10;    error_log   /var/log/nginx/odoo.error.log;&#10;&#10;    # proxy buffers&#10;    proxy_buffers 16 64k;&#10;    proxy_buffer_size 128k;&#10;    proxy_read_timeout 600s;&#10;&#10;    ## default location&#10;    location / {&#10;        proxy_pass http://0.0.0.0:8089;&#10;&#10;        # force timeouts if the backend dies&#10;        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;&#10;        proxy_redirect off;&#10;&#10;&#10;        # set headers&#10;        proxy_set_header    Host            $host;&#10;        proxy_set_header    X-Real-IP       $remote_addr;&#10;        proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;&#10;        proxy_set_header    X-Forwarded-Proto https;&#10;    }&#10;&#10;    # cache some static data in memory for 60mins&#10;    location ~* /web/static/ {&#10;        proxy_cache_valid 60m;&#10;        proxy_buffering on;&#10;        expires 864000;&#10;        proxy_pass http://0.0.0.0:8089;&#10;    }&#10;}</span><br></pre></td></tr></table></figure></div><p>Restrict uploading file size.</p><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line"># sudo /etc/nginx/nginx.conf&#10;### Add this in http area&#10;client_max_body_size 100m;&#10;# sudo /etc/init.d/nginx reload</span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-orgcd0bd59" class="outline-3"><h3 id="orgcd0bd59"><span class="section-number-3">2.2</span> git clone</h3><div class="outline-text-3" id="text-2-2"><p>If your odoo server is running on cloud server, work with git between local and cloud.</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### Cloud</span></span><br><span class="line">sudo adduser git -g git</span><br><span class="line">sudo passwd git</span><br><span class="line">sudo vim /etc/passwd</span><br><span class="line"><span class="comment">## git:x:1001:1001:git,,,:/home/git:/usr/bin/git-shell</span></span><br><span class="line">sudo mkdir -p /home/git/.ssh</span><br><span class="line">sudo vim /home/git/.ssh/authorized_keys</span><br><span class="line">sudo mkdir -p /var/git</span><br><span class="line">sudo chown -R git:git /var/git</span><br><span class="line">sudo chmod <span class="number">777</span> /var/git</span><br><span class="line"><span class="built_in">cd</span> /var/git</span><br><span class="line">git init --bare odoo11.git</span><br><span class="line">sudo chown -R git:git /var/git</span><br><span class="line"><span class="comment">### Local</span></span><br><span class="line">git pull git@<span class="number">111.230</span>.<span class="number">172.145</span>:/var/git/odoo-dev/odoo11.git</span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-org4b60c94" class="outline-2"><h2 id="org4b60c94"><span class="section-number-2">3</span> Modules/Addon</h2><div class="outline-text-2" id="text-3"></div><div id="outline-container-orgbf0d6ca" class="outline-3"><h3 id="orgbf0d6ca"><span class="section-number-3">3.1</span> web responsive</h3><div class="outline-text-3" id="text-3-1"><p>Pages adapted to mobile/pad screensize.</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget -O web_responsive.zip <span class="string">"https://apps.odoo.com/loempia/download/web_responsive/11.0.1.0.2/2M0BvhXUoNhxY3BrtIRd1Q.zip?deps"</span></span><br><span class="line"><span class="comment"># wget -O web_responsive.zip https://apps.odoo.com/loempia/download/web_responsive/11.0.1.0.2/2M0BvhXUoNhxY3BrtIRd1Q.zip?deps</span></span><br><span class="line"><span class="comment"># curl -o web_responsive.zip https://apps.odoo.com/loempia/download/web_responsive/11.0.1.0.2/2M0BvhXUoNhxY3BrtIRd1Q.zip?deps</span></span><br><span class="line">unzip web_responsive.zip <span class="operator">-d</span> /home/odoo/addons/</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org1ec52ad" class="outline-3"><h3 id="org1ec52ad"><span class="section-number-3">3.2</span> chinese</h3><div class="outline-text-3" id="text-3-2"><p>Reload all module language.</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -O base_translation_name.zip <span class="string">"https://apps.odoo.com/loempia/download/base_translation_module_name_reload/11.0.1.0/7mu1fkVg7RMJyfTk1HQiBF.zip?deps"</span></span><br><span class="line">sudo unzip base_translation_name.zip <span class="operator">-d</span> /home/odoo/addons/</span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-orgecfb3ad" class="outline-2"><h2 id="orgecfb3ad"><span class="section-number-2">4</span> API</h2><div class="outline-text-2" id="text-4"><p>REST or XML-RPC</p><ol class="org-ol"><li>Developer<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup></li><li>odoouse<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup></li><li>odoomobile<sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup></li><li>odoo community association<sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup></li></ol></div></div><div id="outline-container-org785056a" class="outline-2"><h2 id="org785056a"><span class="section-number-2">5</span> Issues</h2><div class="outline-text-2" id="text-5"></div><div id="outline-container-org800f72b" class="outline-3"><h3 id="org800f72b"><span class="section-number-3">5.1</span> Deny ssh users/groups</h3><div class="outline-text-3" id="text-5-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sudo vim /etc/ssh/sshd_config</span></span><br><span class="line"><span class="comment">## DenyGroups git</span></span><br></pre></td></tr></table></figure></div></div></div></div><div id="footnotes"><h2 class="footnotes">Footnotes: </h2><div id="text-footnotes"><div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara"><a href="https://github.com/odoo/odoo" target="_blank" rel="noopener">https://github.com/odoo/odoo</a></p></div></div><div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara"><a href="http://blog.csdn.net/J_z10/article/details/51959067" target="_blank" rel="noopener">http://blog.csdn.net/J_z10/article/details/51959067</a></p></div></div><div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara"><a href="http://blog.csdn.net/cmzhuang/article/details/53766040" target="_blank" rel="noopener">http://blog.csdn.net/cmzhuang/article/details/53766040</a></p></div></div><div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara"><a href="https://renjie.me/" target="_blank" rel="noopener">https://renjie.me/</a></p></div></div><div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara"><a href="http://www.cnblogs.com/odoouse/p/4690390.html" target="_blank" rel="noopener">http://www.cnblogs.com/odoouse/p/4690390.html</a></p></div></div><div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara"><a href="http://0.0.0.0%3A8089-mobile-doc-v2.readthedocs.io/en/latest/about/about.html" target="_blank" rel="noopener">http://0.0.0.0:8089-mobile-doc-v2.readthedocs.io/en/latest/about/about.html</a></p></div></div><div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara"><p class="footpara"><a href="https://github.com/OCA" target="_blank" rel="noopener">https://github.com/OCA</a></p></div></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org13e0a33&quot;&gt;1. Installing odoo CE11 on Ubuntu16.04&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org59afe48&quot;&gt;2. Configuration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org4b60c94&quot;&gt;3. Modules/Addon&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgecfb3ad&quot;&gt;4. API&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org785056a&quot;&gt;5. Issues&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="odoo" scheme="https://angry-bird.github.io/categories/odoo/"/>
    
    
      <category term="odoo" scheme="https://angry-bird.github.io/tags/odoo/"/>
    
  </entry>
  
  <entry>
    <title>vsftp</title>
    <link href="https://angry-bird.github.io/2018/02/09/vsftp/"/>
    <id>https://angry-bird.github.io/2018/02/09/vsftp/</id>
    <published>2018-02-09T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#org658759c">1. Demo</a></li><li><a href="#org5b67be5">2. Details</a><ul><li><a href="#orgc163040">2.1. Add user group for vsftpd</a></li><li><a href="#org9b735f8">2.2. Add users to ftp group</a></li><li><a href="#org8d97de6">2.3. Install vsftpd</a></li><li><a href="#org0b2e241">2.4. Config vsftpd</a></li><li><a href="#org5448a5a">2.5. Run vsftpd</a></li></ul></li><li><a href="#orgbd85edf">3. Issues</a><ul><li><a href="#org87a5608">3.1. 530</a></li><li><a href="#org08eaf73">3.2. 500</a></li></ul></li></ul></div></div><a id="more"></a><div id="outline-container-org658759c" class="outline-2"><h2 id="org658759c"><span class="section-number-2">1</span> Demo</h2><div class="outline-text-2" id="text-1"><p>Scenario of a super user(full access to all folders) and multi normal users(only their own folders).</p><ol class="org-ol"><li><p>Add group <b>gftp</b> for all ftp users;</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">groupadd gftp</span><br></pre></td></tr></table></figure></div></li><li><p>Set super user's home directory as <span class="underline">/srv/ftp/echo</span>;</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /srv/ftp/<span class="built_in">echo</span></span><br><span class="line">chown <span class="built_in">echo</span>:gftp /srv/ftp/<span class="built_in">echo</span> -R</span><br><span class="line">useradd <span class="operator">-d</span> /srv/ftp/<span class="built_in">echo</span> -g gftp <span class="built_in">echo</span></span><br><span class="line">passwd <span class="built_in">echo</span></span><br></pre></td></tr></table></figure></div></li><li><p>Set all normal users' home to subdirectory like <span class="underline">/srv/ftp/echo/demo</span>;</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /srv/ftp/<span class="built_in">echo</span>/demo</span><br><span class="line">chown demo:gftp /srv/ftp/<span class="built_in">echo</span>/demo -R</span><br><span class="line">useradd <span class="operator">-d</span> /srv/ftp/<span class="built_in">echo</span>/demo -g gftp demo</span><br><span class="line">passwd demo</span><br></pre></td></tr></table></figure></div></li><li><p>Set all normal users' home directory to be accessed by group <b>gftp</b> by <code>chmod</code>;</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">chmod g+rw /srv/ftp/<span class="built_in">echo</span>/demo -R</span><br></pre></td></tr></table></figure></div></li><li>Add <code>allow_writeable_chroot=YES</code> and <code>chroot_local_user=YES</code> in  <span class="underline">/etc/vsftpd.conf</span></li></ol></div></div><div id="outline-container-org5b67be5" class="outline-2"><h2 id="org5b67be5"><span class="section-number-2">2</span> Details</h2><div class="outline-text-2" id="text-2"></div><div id="outline-container-orgc163040" class="outline-3"><h3 id="orgc163040"><span class="section-number-3">2.1</span> Add user group for vsftpd</h3><div class="outline-text-3" id="text-2-1"><p>Setting a group for ftp, and ftp users are add to this group. This will be more appropriate for security and privacy.</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">groupadd gftp</span><br><span class="line"><span class="comment"># groups</span></span><br><span class="line"><span class="comment"># newgrp</span></span><br><span class="line"><span class="comment"># groupdel</span></span><br><span class="line"><span class="comment"># groupmod</span></span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org9b735f8" class="outline-3"><h3 id="org9b735f8"><span class="section-number-3">2.2</span> Add users to ftp group</h3><div class="outline-text-3" id="text-2-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mkdir /srv/ftp/<span class="built_in">echo</span></span><br><span class="line">chown <span class="built_in">echo</span>:gftp /srv/ftp/<span class="built_in">echo</span> -R</span><br><span class="line">useradd <span class="operator">-d</span> /srv/ftp/<span class="built_in">echo</span> -g gftp <span class="built_in">echo</span></span><br><span class="line">passwd <span class="built_in">echo</span></span><br><span class="line"><span class="comment">### Another User that sharing all files with OTHER GROUP USERS.</span></span><br><span class="line">mkdir /srv/ftp/<span class="built_in">echo</span>/demo</span><br><span class="line">useradd <span class="operator">-d</span> /srv/ftp/<span class="built_in">echo</span>/demo -g gftp demo</span><br><span class="line"><span class="comment">### Group own this folder, that means demo is the least privilege user.</span></span><br><span class="line">chown demo:gftp /srv/ftp/<span class="built_in">echo</span>/demo -R</span><br><span class="line">chmod g+rw /srv/ftp/<span class="built_in">echo</span>/demo -R</span><br><span class="line">passwd demo</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org8d97de6" class="outline-3"><h3 id="org8d97de6"><span class="section-number-3">2.3</span> Install vsftpd</h3><div class="outline-text-3" id="text-2-3"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install vsftpd</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org0b2e241" class="outline-3"><h3 id="org0b2e241"><span class="section-number-3">2.4</span> Config vsftpd</h3><div class="outline-text-3" id="text-2-4"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/vsftpd.conf</span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">anonymous_enable=NO&#10;write_enable=YES&#10;utf8_filesystem=YES&#10;### Restrict user to their own/local root directory, without access to upper folders.&#10;### And this config may cause 500 ERROR.&#10;chroot_local_user=YES&#10;### If you want to specify users having access to other folders exclusively,&#10;### then users in ~chroot_list_file~ are exceptions with ~chroot_local_user~ being ~YES~.&#10;chroot_list_enable=YES&#10;chroot_list_file=/etc/vsftpd/chroot_list</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org5448a5a" class="outline-3"><h3 id="org5448a5a"><span class="section-number-3">2.5</span> Run vsftpd</h3><div class="outline-text-3" id="text-2-5"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service vsftpd start</span><br><span class="line">service vsftpd stop</span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ftp localhost</span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-orgbd85edf" class="outline-2"><h2 id="orgbd85edf"><span class="section-number-2">3</span> Issues</h2><div class="outline-text-2" id="text-3"></div><div id="outline-container-org87a5608" class="outline-3"><h3 id="org87a5608"><span class="section-number-3">3.1</span> 530</h3><div class="outline-text-3" id="text-3-1"><p>Comment the last line of this file.</p><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line"># vim /etc/pam.d/vsftpd&#10;auth required  pam_shells.so</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org08eaf73" class="outline-3"><h3 id="org08eaf73"><span class="section-number-3">3.2</span> 500</h3><div class="outline-text-3" id="text-3-2"><pre class="example">500 OOPS: vsftpd: refusing to run with writable root inside chroot()</pre><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line"># For old versions&#10;allow_writeable_chroot=YES&#10;# For extended vsftp&#10;allow_writable_chroot=YES</span><br></pre></td></tr></table></figure></div></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org658759c&quot;&gt;1. Demo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org5b67be5&quot;&gt;2. Details&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orgc163040&quot;&gt;2.1. Add user group for vsftpd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org9b735f8&quot;&gt;2.2. Add users to ftp group&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org8d97de6&quot;&gt;2.3. Install vsftpd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org0b2e241&quot;&gt;2.4. Config vsftpd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org5448a5a&quot;&gt;2.5. Run vsftpd&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgbd85edf&quot;&gt;3. Issues&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org87a5608&quot;&gt;3.1. 530&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org08eaf73&quot;&gt;3.2. 500&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="linux" scheme="https://angry-bird.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://angry-bird.github.io/tags/linux/"/>
    
      <category term="ftp" scheme="https://angry-bird.github.io/tags/ftp/"/>
    
  </entry>
  
  <entry>
    <title>Linux shell commands 104</title>
    <link href="https://angry-bird.github.io/2017/10/31/Linux-shell-commands-104/"/>
    <id>https://angry-bird.github.io/2017/10/31/Linux-shell-commands-104/</id>
    <published>2017-10-31T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#org3b9b5cc">1. regular expression</a><ul><li><a href="#org53afb29">1.1. 基础的正则表达式</a></li><li><a href="#org7c0c171">1.2. POSIX 字符集</a></li><li><a href="#org3687355">1.3. Perl-style</a></li></ul></li><li><a href="#org6048910">2. grep</a></li><li><a href="#org4c1e6fc">3. cut &amp; concatenate</a></li><li><a href="#org0a883c3">4. sed</a></li><li><a href="#orgb9ed2ba">5. awk</a></li><li><a href="#org8447f3b">6. Misc</a><ul><li><a href="#orgdbbcb4c">6.1. Parsing email address or url from text</a></li><li><a href="#org8a51185">6.2. delete a sentence containing a word</a></li></ul></li></ul></div></div><a id="more"></a><p>Chapter 4 About Text Edit</p><div id="outline-container-org3b9b5cc" class="outline-2"><h2 id="org3b9b5cc"><span class="section-number-2">1</span> regular expression</h2><div class="outline-text-2" id="text-1"></div><div id="outline-container-org53afb29" class="outline-3"><h3 id="org53afb29"><span class="section-number-3">1.1</span> 基础的正则表达式</h3><div class="outline-text-3" id="text-1-1"><table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"><colgroup><col class="org-left"><col class="org-left"></colgroup><thead><tr><th scope="col" class="org-left">regex</th><th scope="col" class="org-left">Desription</th></tr></thead><tbody><tr><td class="org-left">^</td><td class="org-left">start of line</td></tr><tr><td class="org-left">$</td><td class="org-left">end of line</td></tr><tr><td class="org-left">.</td><td class="org-left">matches any one character</td></tr><tr><td class="org-left">[]</td><td class="org-left">matches any one char in [chars]</td></tr><tr><td class="org-left">[^]</td><td class="org-left">matches any one char EXCEPT in [chars]</td></tr><tr><td class="org-left">[-]</td><td class="org-left">matches any char within range [chars]</td></tr><tr><td class="org-left">?</td><td class="org-left">matches one or zero times</td></tr><tr><td class="org-left">+</td><td class="org-left">matches one or more times</td></tr><tr><td class="org-left">*</td><td class="org-left">matches zero or more times</td></tr><tr><td class="org-left">()</td><td class="org-left">substring as one item to match</td></tr><tr><td class="org-left">{n}</td><td class="org-left">match n times</td></tr><tr><td class="org-left">{n,}</td><td class="org-left">match at least n times</td></tr><tr><td class="org-left">{n, m}</td><td class="org-left">match n to m times</td></tr><tr><td class="org-left">&vert;</td><td class="org-left">alternation, OR</td></tr><tr><td class="org-left">\</td><td class="org-left">escape</td></tr></tbody></table></div></div><div id="outline-container-org7c0c171" class="outline-3"><h3 id="org7c0c171"><span class="section-number-3">1.2</span> POSIX 字符集</h3><div class="outline-text-3" id="text-1-2"><table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"><colgroup><col class="org-left"><col class="org-left"></colgroup><thead><tr><th scope="col" class="org-left">regex</th><th scope="col" class="org-left">Desription</th></tr></thead><tbody><tr><td class="org-left">[:alpha:]</td><td class="org-left">alphabet</td></tr><tr><td class="org-left">[:digit:]</td><td class="org-left">digit</td></tr><tr><td class="org-left">[:alnum:]</td><td class="org-left">alp &amp; number</td></tr><tr><td class="org-left">[:lower:]</td><td class="org-left">lowercase</td></tr><tr><td class="org-left">[:upper:]</td><td class="org-left">uppercase</td></tr><tr><td class="org-left">[:punct:]</td><td class="org-left">punctuation</td></tr><tr><td class="org-left">[:blank:]</td><td class="org-left">space &amp; tab</td></tr><tr><td class="org-left">[:space:]</td><td class="org-left">whitespace</td></tr></tbody></table></div></div><div id="outline-container-org3687355" class="outline-3"><h3 id="org3687355"><span class="section-number-3">1.3</span> Perl-style</h3><div class="outline-text-3" id="text-1-3"><table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"><colgroup><col class="org-left"><col class="org-left"></colgroup><thead><tr><th scope="col" class="org-left">regex</th><th scope="col" class="org-left">Desription</th></tr></thead><tbody><tr><td class="org-left">\b</td><td class="org-left">word boundary</td></tr><tr><td class="org-left">\B</td><td class="org-left">non-word boundary</td></tr><tr><td class="org-left">\d</td><td class="org-left">single digit</td></tr><tr><td class="org-left">\D</td><td class="org-left">single non-digit</td></tr><tr><td class="org-left">\w</td><td class="org-left">single word</td></tr><tr><td class="org-left">\W</td><td class="org-left">single non-word</td></tr><tr><td class="org-left">\n</td><td class="org-left">newline</td></tr><tr><td class="org-left">\s</td><td class="org-left">single whitespace</td></tr><tr><td class="org-left">&sect;</td><td class="org-left">single non-space</td></tr><tr><td class="org-left">\r</td><td class="org-left">return</td></tr></tbody></table><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># IP address</span></span><br><span class="line">[<span class="number">0</span>-<span class="number">9</span>]{<span class="number">1</span>,<span class="number">3</span>}\.[<span class="number">0</span>-<span class="number">9</span>]{<span class="number">1</span>,<span class="number">3</span>}\.[<span class="number">0</span>-<span class="number">9</span>]{<span class="number">1</span>,<span class="number">3</span>}\.[<span class="number">0</span>-<span class="number">9</span>]{<span class="number">1</span>,<span class="number">3</span>}</span><br><span class="line">[[:digit:]]{<span class="number">1</span>,<span class="number">3</span>}\.[[:digit:]]{<span class="number">1</span>,<span class="number">3</span>}\.[[:digit:]]{<span class="number">1</span>,<span class="number">3</span>}\.[[:digit:]]{<span class="number">1</span>,<span class="number">3</span>}</span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-org6048910" class="outline-2"><h2 id="org6048910"><span class="section-number-2">2</span> grep</h2><div class="outline-text-2" id="text-2"><p>The master unix utility for searching in the text.</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">grep PATTERN FILE</span><br><span class="line"><span class="comment"># Extented regular expression</span></span><br><span class="line">grep -E PATTERN</span><br><span class="line">egrep PATTERN</span><br><span class="line"><span class="comment"># Only matched portion</span></span><br><span class="line">grep -o -E PATTERN</span><br><span class="line"><span class="comment"># Except lines containing PATTERN</span></span><br><span class="line">grep -v PATTERN FILE</span><br><span class="line"><span class="comment"># Count number of lines</span></span><br><span class="line">grep -c PATTERN FILE</span><br><span class="line"><span class="comment"># Recursively</span></span><br><span class="line">grep -R -n DIRE</span><br><span class="line"><span class="comment"># Byte Offset</span></span><br><span class="line">grep -b -o PATTERN FILE</span><br><span class="line"><span class="comment"># Locate matched pattern</span></span><br><span class="line">grep <span class="operator">-l</span> PATTERN FILE</span><br><span class="line"><span class="comment"># Locate non-matched files</span></span><br><span class="line">grep -L PATTERN FILE</span><br><span class="line"><span class="comment"># Ignore case of pattern</span></span><br><span class="line">grep -i PATTERN FILE</span><br><span class="line"><span class="comment"># Multi patterns</span></span><br><span class="line">grep <span class="operator">-e</span> PATTERN1 <span class="operator">-e</span> PATTERN2 FILE</span><br><span class="line"><span class="comment"># Print 4 lines After matched pattern</span></span><br><span class="line">grep PATTERN -A <span class="number">4</span></span><br><span class="line"><span class="comment"># Print 4 lines Before matched pattern</span></span><br><span class="line">grep PATTERN -B <span class="number">4</span></span><br><span class="line"><span class="comment"># Print 4 lines that matched pattern as Center</span></span><br><span class="line">grep PATTERN -C <span class="number">4</span></span><br><span class="line"><span class="comment"># include &amp; exclude</span></span><br><span class="line">grep PATTERN DIRE -r --include *.{c,cpp}</span><br><span class="line">grep PATTERN DIRE -r --exclude <span class="string">"readme"</span></span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org4c1e6fc" class="outline-2"><h2 id="org4c1e6fc"><span class="section-number-2">3</span> cut &amp; concatenate</h2><div class="outline-text-2" id="text-3"><p>Column-wise cutting of a file</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Field 2 in file</span></span><br><span class="line">cut <span class="operator">-f</span>2 FIELD FILE</span><br><span class="line"><span class="comment"># Bytes 1st to 5th</span></span><br><span class="line">cut -b1-<span class="number">5</span> BYTE FILE</span><br><span class="line"><span class="comment"># Character since 3rd</span></span><br><span class="line">cut -c3- CHAR FILE</span><br><span class="line"><span class="comment"># Delimiter</span></span><br><span class="line">cut FILE -c1-<span class="number">3</span>,<span class="number">5</span>- --output-delimiter <span class="string">","</span></span><br></pre></td></tr></table></figure></div><p>Column-wise concatenate of files</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">paste FILE1 FILE2</span><br><span class="line"><span class="comment"># Delimiter</span></span><br><span class="line">paste FILE1 FILE2 <span class="operator">-d</span> <span class="string">','</span></span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org0a883c3" class="outline-2"><h2 id="org0a883c3"><span class="section-number-2">4</span> sed</h2><div class="outline-text-2" id="text-4"><p>Stream editor</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># First occurrence of pattern in each line</span></span><br><span class="line">sed <span class="string">'s/PATTERN/REPLACE/'</span> FILE</span><br><span class="line"><span class="comment"># Write changes Into file</span></span><br><span class="line">sed -i <span class="string">'s/PATTERN/REPLACE/'</span> FILE</span><br><span class="line"><span class="comment"># Global replace</span></span><br><span class="line">sed <span class="string">'s/PATTERN/REPLACE/g'</span> FILE</span><br><span class="line">sed <span class="string">'s:PATTERN:REPLACE:g'</span> FILE</span><br><span class="line">sed <span class="string">'s|PATTERN|REPLACE|g'</span> FILE</span><br><span class="line"><span class="comment"># Global replace since N+1th occurrence</span></span><br><span class="line">sed <span class="string">'s/PATTERN/REPLACE/2g'</span> FILE</span><br><span class="line"><span class="comment"># Delete blank lines</span></span><br><span class="line">sed <span class="string">'/^$/d'</span> FILE</span><br><span class="line"><span class="comment"># Delete line</span></span><br><span class="line">sed <span class="string">'/PATTERN/d'</span> FILE</span><br><span class="line"><span class="comment"># Matched string notation &amp; -- \w\+</span></span><br><span class="line">sed <span class="string">'s/\w\+/[&amp;]/g'</span> FILE</span><br><span class="line"><span class="comment"># Matched substring notation \1 -- \(PATTERN\)</span></span><br><span class="line">sed <span class="string">'s/STRING\(PATTERN\)/\1/'</span></span><br><span class="line"><span class="comment"># Multiple expressions</span></span><br><span class="line">sed <span class="string">'exp'</span> | sed <span class="string">'exp'</span></span><br><span class="line">sed <span class="string">'exp; exp'</span></span><br><span class="line"><span class="comment"># Quoting</span></span><br><span class="line">sed <span class="string">"s/<span class="variable">$VAR</span>/REPLACE/"</span></span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgb9ed2ba" class="outline-2"><h2 id="orgb9ed2ba"><span class="section-number-2">5</span> awk</h2><div class="outline-text-2" id="text-5"><p>Data streams</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'BEGIN {statements} {statements} END {end statements}'</span></span><br><span class="line">awk <span class="string">"BEGIN {statements} {statements} END {end statements}"</span></span><br><span class="line"><span class="comment"># Print 3rd &amp; 2nd field of every line</span></span><br><span class="line">awk <span class="string">'{ print $3, $2 }'</span> FILE</span><br><span class="line"><span class="comment"># Count number of lines, NR -- records, NF -- fields</span></span><br><span class="line">awk <span class="string">'END{ print NR}'</span> FILE</span><br><span class="line"><span class="comment"># Variable passed from outside to awk</span></span><br><span class="line">awk -v VARI=<span class="variable">$VAR</span> <span class="string">'{print VARI}'</span></span><br><span class="line">awk <span class="string">'{print v1, v2}'</span> v1=<span class="variable">$var1</span> v2=<span class="variable">$var2</span> FILE</span><br><span class="line"><span class="comment"># Filtering lines</span></span><br><span class="line">awk <span class="string">'/START_PATTERN/, /END_PATTERN/'</span> FILE</span><br><span class="line">awk <span class="string">'NR==1,NR==4'</span> FILE</span><br><span class="line">awk <span class="string">'NR &lt; 5'</span> FILE</span><br><span class="line">awk <span class="string">'!/linux/'</span> FILE</span><br><span class="line"><span class="comment"># Setting delimiter</span></span><br><span class="line">awk -F: <span class="string">'{ print $NF }'</span> /etc/passwd</span><br><span class="line">awk <span class="string">'BEGIN { FS=":" } { print $NF }'</span> /etc/passwd</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org8447f3b" class="outline-2"><h2 id="org8447f3b"><span class="section-number-2">6</span> Misc</h2><div class="outline-text-2" id="text-6"></div><div id="outline-container-orgdbbcb4c" class="outline-3"><h3 id="orgdbbcb4c"><span class="section-number-3">6.1</span> Parsing email address or url from text</h3><div class="outline-text-3" id="text-6-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">egrep -o <span class="string">'[A-Za-z0-9]+@[A-Za-z0-9]+\.[a-zA-Z]{2,4}'</span> FILE</span><br><span class="line">egrep -o <span class="string">"http://[A-Za-z0-9]+\.[a-zA-Z]{2,3}"</span> FILE</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org8a51185" class="outline-3"><h3 id="org8a51185"><span class="section-number-3">6.2</span> delete a sentence containing a word</h3><div class="outline-text-3" id="text-6-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># [^.]* -- any char except ., and comb of it any times</span></span><br><span class="line">sed <span class="string">'s/ [^.]*PATTERN[^.]*\.//g'</span> FILE</span><br></pre></td></tr></table></figure></div></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org3b9b5cc&quot;&gt;1. regular expression&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org53afb29&quot;&gt;1.1. 基础的正则表达式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org7c0c171&quot;&gt;1.2. POSIX 字符集&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org3687355&quot;&gt;1.3. Perl-style&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org6048910&quot;&gt;2. grep&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org4c1e6fc&quot;&gt;3. cut &amp;amp; concatenate&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org0a883c3&quot;&gt;4. sed&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgb9ed2ba&quot;&gt;5. awk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org8447f3b&quot;&gt;6. Misc&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orgdbbcb4c&quot;&gt;6.1. Parsing email address or url from text&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org8a51185&quot;&gt;6.2. delete a sentence containing a word&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="linux" scheme="https://angry-bird.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://angry-bird.github.io/tags/linux/"/>
    
      <category term="shell" scheme="https://angry-bird.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>Linux shell commands 103</title>
    <link href="https://angry-bird.github.io/2017/10/30/Linux-shell-commands-103/"/>
    <id>https://angry-bird.github.io/2017/10/30/Linux-shell-commands-103/</id>
    <published>2017-10-30T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#org561a19b">1. Downloads utils</a><ul><li><a href="#orgaa52d09">1.1. wget</a></li><li><a href="#orga8a6500">1.2. curl</a></li><li><a href="#orgb0764a9">1.3. others</a></li></ul></li></ul></div></div><a id="more"></a><p>Chapter 3 About Network</p><div id="outline-container-org561a19b" class="outline-2"><h2 id="org561a19b"><span class="section-number-2">1</span> Downloads utils</h2><div class="outline-text-2" id="text-1"></div><div id="outline-container-orgaa52d09" class="outline-3"><h3 id="orgaa52d09"><span class="section-number-3">1.1</span> wget</h3><div class="outline-text-3" id="text-1-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">wget URL</span><br><span class="line">wget URL1 URL2</span><br><span class="line"><span class="comment"># Downloaded file name and print logs to file</span></span><br><span class="line">wget URL -O down.file -o down.log</span><br><span class="line"><span class="comment"># Try 5 times</span></span><br><span class="line">wget -t <span class="number">5</span> URL</span><br><span class="line"><span class="comment"># Limit speed</span></span><br><span class="line">wget --limit-rate <span class="number">20</span>k URL</span><br><span class="line"><span class="comment"># Quota of download</span></span><br><span class="line">wget -Q <span class="number">100</span>m URL</span><br><span class="line"><span class="comment"># Resume downloading and continue</span></span><br><span class="line">wget -c URL</span><br><span class="line"><span class="comment"># Authentication for HTTP FTP</span></span><br><span class="line">wget --user NAME --password PASS URL</span><br><span class="line"><span class="comment"># Copy webpage as formatted txt</span></span><br><span class="line">lynx -dump URL &gt; webpage.txt</span><br><span class="line"><span class="comment"># Copy a complete website</span></span><br><span class="line">wget --mirror URL</span><br><span class="line">wget -r -N <span class="operator">-l</span> DEPTH URL</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orga8a6500" class="outline-3"><h3 id="orga8a6500"><span class="section-number-3">1.2</span> curl</h3><div class="outline-text-3" id="text-1-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># More powerful tool</span></span><br><span class="line">curl URL --slient</span><br><span class="line">curl URL &gt; index.html</span><br><span class="line"><span class="comment"># Write to file not ~stdout~</span></span><br><span class="line">curl URL --slient -O</span><br><span class="line">curl URL --slient -o NEW_FILE</span><br><span class="line"><span class="comment"># Progress bar</span></span><br><span class="line">curl URL --progress -o NEW_FILE</span><br><span class="line"><span class="comment"># Resume</span></span><br><span class="line">curl URL/file -C offset</span><br><span class="line"><span class="comment"># Cookies</span></span><br><span class="line">curl URL --cookie-jar cookie_file</span><br><span class="line"><span class="comment"># User agent</span></span><br><span class="line">curl URL --user-agent <span class="string">"Mozilla/5.0"</span></span><br><span class="line"><span class="comment"># Header</span></span><br><span class="line">curl -H <span class="string">"Host: www.archlinux.org"</span> -H <span class="string">"Accept-language: en"</span> URL</span><br><span class="line"><span class="comment"># Limit speed/bandwidth</span></span><br><span class="line">curl URL --limit-rate <span class="number">20</span>k</span><br><span class="line"><span class="comment"># Quota of download</span></span><br><span class="line">curl URL --max-filesize bytes</span><br><span class="line"><span class="comment"># Authentication for HTTP FTP</span></span><br><span class="line">curl -u USER:PASS URL</span><br><span class="line">curl -u USER URL</span><br><span class="line"><span class="comment"># Dump only HTTP headers without downloading file</span></span><br><span class="line">curl -I URL</span><br><span class="line">curl -head URL</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgb0764a9" class="outline-3"><h3 id="orgb0764a9"><span class="section-number-3">1.3</span> others</h3><div class="outline-text-3" id="text-1-3"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">axel URL --slient -o</span><br><span class="line">httpie URL</span><br></pre></td></tr></table></figure></div></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org561a19b&quot;&gt;1. Downloads utils&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orgaa52d09&quot;&gt;1.1. wget&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orga8a6500&quot;&gt;1.2. curl&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgb0764a9&quot;&gt;1.3. others&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="linux" scheme="https://angry-bird.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://angry-bird.github.io/tags/linux/"/>
    
      <category term="shell" scheme="https://angry-bird.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>Linux shell commands 102</title>
    <link href="https://angry-bird.github.io/2017/10/29/Linux-shell-commands-102/"/>
    <id>https://angry-bird.github.io/2017/10/29/Linux-shell-commands-102/</id>
    <published>2017-10-29T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#orgb4cd564">1. file name</a><ul><li><a href="#org0192654">1.1. temp file</a></li><li><a href="#org87c3f13">1.2. splitting file</a></li><li><a href="#org11a72b1">1.3. slicing filename</a></li></ul></li><li><a href="#org116ba8b">2. find</a><ul><li><a href="#orgcc9aed7">2.1. list all files with path</a></li><li><a href="#org6b63bbd">2.2. search by name</a></li><li><a href="#org022c3ba">2.3. search by attributes</a></li><li><a href="#orgfd3b5fc">2.4. operations</a></li></ul></li><li><a href="#org8088c80">3. comparison</a><ul><li><a href="#org2a82a8f">3.1. math comparison</a></li><li><a href="#org86a8dfa">3.2. logical comparison</a></li><li><a href="#orga2acef8">3.3. filesystem conditions</a></li><li><a href="#org98e00ef">3.4. string conditions / comparisons</a></li></ul></li><li><a href="#org3a58dde">4. input</a><ul><li><a href="#orgdaa37f1">4.1. read</a></li><li><a href="#org6bd9d8c">4.2. IFS</a></li><li><a href="#org648db6c">4.3. xarg</a></li></ul></li><li><a href="#org2d011f6">5. translate</a><ul><li><a href="#org2fa045e">5.1. 将输入中的一组字符串转换成另一组字符串。</a></li><li><a href="#orgb9cee3f">5.2. 删除特定字符串</a></li><li><a href="#orgb7e3270">5.3. 补充特定字符串</a></li><li><a href="#org8ce5e80">5.4. 集合分类</a></li></ul></li><li><a href="#orgaac8fe2">6. sort</a></li><li><a href="#orgda77f44">7. diff</a></li><li><a href="#org9de5436">8. head &amp; tail</a></li></ul></div></div><a id="more"></a><p>Chapter 2   介绍关于文件的命令，包括文件命名、文件分割、文件查找、文件条件判断、文件输入、文件内容排序除重、文件内容对比、文件首尾</p><div id="outline-container-orgb4cd564" class="outline-2"><h2 id="orgb4cd564"><span class="section-number-2">1</span> file name</h2><div class="outline-text-2" id="text-1"><p>重命名文件</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rename *.jpg *.png</span><br><span class="line">rename <span class="string">'s/ /_/g'</span> *</span><br></pre></td></tr></table></figure></div><p>临时文件命名，分割文件，提取文件名</p></div><div id="outline-container-org0192654" class="outline-3"><h3 id="org0192654"><span class="section-number-3">1.1</span> temp file</h3><div class="outline-text-3" id="text-1-1"><p>$(tempfile)$RANDOM$$ is PID of current script</p></div></div><div id="outline-container-org87c3f13" class="outline-3"><h3 id="org87c3f13"><span class="section-number-3">1.2</span> splitting file</h3><div class="outline-text-3" id="text-1-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># generate one test file of 100Kb</span></span><br><span class="line">dd <span class="keyword">if</span>=/dev/zero bs=<span class="number">100</span>k count=<span class="number">1</span> of=data.file</span><br><span class="line">split -b <span class="number">10</span>k data.file</span><br><span class="line"><span class="comment"># -d numeric suffixes, -a suffix length</span></span><br><span class="line">split -b <span class="number">10</span>k data.file <span class="operator">-d</span> <span class="operator">-a</span> <span class="number">3</span></span><br><span class="line"><span class="comment"># prefix filename for split files</span></span><br><span class="line">split -b <span class="number">10</span>k data.file <span class="operator">-d</span> <span class="operator">-a</span> <span class="number">3</span> sfile</span><br><span class="line"><span class="comment"># 10 lines in each split</span></span><br><span class="line">split <span class="operator">-l</span> <span class="number">10</span> data.file</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org11a72b1" class="outline-3"><h3 id="org11a72b1"><span class="section-number-3">1.3</span> slicing filename</h3><div class="outline-text-3" id="text-1-3"><p>提取文件名 <code>${VAR%.*}</code> 或者文件后缀名 <code>${VAR#.*}</code> 。 <code>%</code> 为非贪婪模式，从右至左匹配一个 <code>.*</code> ， <code>#</code> 从左至右匹配一个 <code>.*</code> 。提取方式是贪婪模式是使用两个 <code>%%</code> 或 <code>##</code> 即可。</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name=<span class="variable">${file%.*}</span></span><br><span class="line">extn=<span class="variable">${file#.*}</span></span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-org116ba8b" class="outline-2"><h2 id="org116ba8b"><span class="section-number-2">2</span> find</h2><div class="outline-text-2" id="text-2"><p>find your files with <code>find</code>.</p></div><div id="outline-container-orgcc9aed7" class="outline-3"><h3 id="orgcc9aed7"><span class="section-number-3">2.1</span> list all files with path</h3><div class="outline-text-3" id="text-2-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># '\n' as the delimitor</span></span><br><span class="line">find .. -print</span><br><span class="line"><span class="comment"># '\0' as the delimitor, useful for filename contains space</span></span><br><span class="line">find .. -print0</span><br><span class="line"></span><br><span class="line"><span class="comment"># list only directories</span></span><br><span class="line">ls <span class="operator">-d</span> */</span><br><span class="line">ls -F | grep <span class="string">"/$"</span></span><br><span class="line">ls <span class="operator">-l</span> | grep <span class="string">"^d"</span></span><br><span class="line">find . -type d -maxdepth <span class="number">1</span> -print</span><br></pre></td></tr></table></figure></div><p>If there are blanks, use <code>print0</code>.</p></div></div><div id="outline-container-org6b63bbd" class="outline-3"><h3 id="org6b63bbd"><span class="section-number-3">2.2</span> search by name</h3><div class="outline-text-3" id="text-2-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find / -name <span class="string">"*.txt"</span> –<span class="built_in">print</span></span><br><span class="line">find . \( -name <span class="string">"*.txt"</span> -o -iname <span class="string">"readme*"</span> \) -print</span><br></pre></td></tr></table></figure></div><p><code>name</code> to match files, <code>iname</code> to ignore case. <code>path</code> to match <b>whole file paths</b>.<code>regex</code> <code>iregex</code> to match file paths based on <i>regular expression</i>, which specify a pattern.</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">find . ! -name <span class="string">"*.dll"</span> -print</span><br><span class="line">find devel/<span class="built_in">source</span>_path \( -name <span class="string">".git"</span> -prune \) -o \( -type f -print \)</span><br><span class="line">find . -maxdepth <span class="number">1</span> -type f -print</span><br><span class="line">find . -mindepth <span class="number">2</span> -type f -print</span><br></pre></td></tr></table></figure></div><p><code>!</code> is nagating argument. It matches file names that not end with <i>.txt</i>.<code>prune</code> exclude portion<code>maxdepth</code> or <code>mindepth</code> specify directory depths.</p></div></div><div id="outline-container-org022c3ba" class="outline-3"><h3 id="org022c3ba"><span class="section-number-3">2.3</span> search by attributes</h3><div class="outline-text-3" id="text-2-3"><p><code>atime</code> to last access time<code>mtime</code> to last modify time<code>ctime</code> to last metadata modify time</p><p><code>amin</code>, <code>mmin</code>, <code>cmin</code> are minutes, instead of days in <code>atime</code>.<code>newer</code> specify a reference file to compare timestamp.</p><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">$ find . -type f -atime +7 -size +2k -user allen -perm 644 -delete</span><br></pre></td></tr></table></figure></div><p><i>+, -, / are older, last, exact days or minutes.<code>size</code> to file size, /b, c, w, k, M, G</i>.</p><p><code>user</code> to file owner<code>perm</code> to file permissions</p></div></div><div id="outline-container-orgfd3b5fc" class="outline-3"><h3 id="orgfd3b5fc"><span class="section-number-3">2.4</span> operations</h3><div class="outline-text-3" id="text-2-4"><p><code>delete</code> to delete, instead of print<code>exec</code> to execute command on files sorted out.</p><div class="org-src-container"><figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line"># <span class="built_in">find</span> . -<span class="built_in">type</span> f –user root –exec chown allen {} \;</span><br></pre></td></tr></table></figure></div><p><code>{}</code> is a match, <code>\;</code> is the end of <code>find</code>.</p></div></div></div><div id="outline-container-org8088c80" class="outline-2"><h2 id="org8088c80"><span class="section-number-2">3</span> comparison</h2><div class="outline-text-2" id="text-3"><p>程序中的条件判断（比较）形成了 <code>流控制</code></p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">command</span>;</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">command</span>;</span><br><span class="line"><span class="keyword">elif</span> condition; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">command</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">command</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[[ condition ]] &amp;&amp; <span class="literal">true</span>_cmd || <span class="literal">false</span>_cmd</span><br></pre></td></tr></table></figure></div></div><div id="outline-container-org2a82a8f" class="outline-3"><h3 id="org2a82a8f"><span class="section-number-3">3.1</span> math comparison</h3><div class="outline-text-3" id="text-3-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[ <span class="variable">$var</span> <span class="operator">-eq</span> <span class="number">0</span> ]</span><br></pre></td></tr></table></figure></div><dl class="org-dl"><dt>-eq</dt><dd>equal</dd><dt>-ne</dt><dd>not equal</dd><dt>-gt</dt><dd>greater than</dd><dt>-lt</dt><dd>less than</dd><dt>-ge</dt><dd>greater or equal</dd><dt>-le</dt><dd>less or equal</dd></dl></div></div><div id="outline-container-org86a8dfa" class="outline-3"><h3 id="org86a8dfa"><span class="section-number-3">3.2</span> logical comparison</h3><div class="outline-text-3" id="text-3-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="variable">$var1</span> <span class="operator">-ne</span> <span class="number">0</span> <span class="operator">-a</span> <span class="variable">$var2</span> <span class="operator">-gt</span> <span class="number">2</span> ]</span><br><span class="line">[ <span class="variable">$var1</span> <span class="operator">-ne</span> <span class="number">0</span> ] &amp;&amp; [ <span class="variable">$var2</span> <span class="operator">-gt</span> <span class="number">2</span> ]</span><br></pre></td></tr></table></figure></div><dl class="org-dl"><dt>-a</dt><dd>AND</dd><dt>-o</dt><dd>OR</dd></dl></div></div><div id="outline-container-orga2acef8" class="outline-3"><h3 id="orga2acef8"><span class="section-number-3">3.3</span> filesystem conditions</h3><div class="outline-text-3" id="text-3-3"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[[ <span class="operator">-e</span> ~/.bash_aliases ]] &amp;&amp; . ~/.bash_aliases</span><br></pre></td></tr></table></figure></div><dl class="org-dl"><dt>-f $var</dt><dd>true if $file holds a regular file path</dd><dt>-x $var</dt><dd>true if $var bolds a executable file path</dd><dt>-e $var</dt><dd>true if $var holds an existing file</dd><dt>-d $var</dt><dd>true if $var holds a directory path</dd><dt>-c $var</dt><dd>true if $var holds a char dev file</dd><dt>-b $var</dt><dd>true if $var holds a block dev file</dd><dt>-w $var</dt><dd>true if $var holds a writable file</dd><dt>-r $var</dt><dd>true if $var holds a readable file</dd><dt>-L $var</dt><dd>true if $var holds a symlink</dd></dl></div></div><div id="outline-container-org98e00ef" class="outline-3"><h3 id="org98e00ef"><span class="section-number-3">3.4</span> string conditions / comparisons</h3><div class="outline-text-3" id="text-3-4"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[[ <span class="variable">$str1</span> = <span class="variable">$str2</span> ]] <span class="comment"># true if $str1 equals $str2</span></span><br><span class="line">[[ <span class="variable">$str1</span> == <span class="variable">$str2</span> ]] <span class="comment"># true if $str1 equals $str2</span></span><br><span class="line">[[ <span class="variable">$str1</span> != <span class="variable">$str2</span> ]] <span class="comment"># true if $str1 mismatches $str2</span></span><br><span class="line">[[ <span class="variable">$str1</span> &gt; <span class="variable">$str2</span> ]] <span class="comment"># true if $str1 alphabetically greater than $str2</span></span><br><span class="line">[[ -z <span class="variable">$str1</span> ]] <span class="comment"># true if $str1 holds an empty string</span></span><br><span class="line">[[ -n <span class="variable">$str1</span> ]] <span class="comment"># true if $str1 holds an non-empty string</span></span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-org3a58dde" class="outline-2"><h2 id="org3a58dde"><span class="section-number-2">4</span> input</h2><div class="outline-text-2" id="text-4"><p>标准输入，或是读取文件，作为脚本输入。输入的其他重要细节之一，是设定分隔符。</p></div><div id="outline-container-orgdaa37f1" class="outline-3"><h3 id="orgdaa37f1"><span class="section-number-3">4.1</span> read</h3><div class="outline-text-3" id="text-4-1"><dl class="org-dl"><dt>读取 n 个字符到 to_var 中</dt><dd>read -n num_chars to_var</dd><dt>输出消息的读取</dt><dd>read -p "message" to_var</dd><dt>屏幕不显示输入内容地读取到 to_var</dt><dd>read -s to_var</dd><dt>设定读取字符的超时</dt><dd>read -t timeout to_var</dd><dt>设定读取字符的分隔符</dt><dd>read -d delim_char to_var</dd></dl><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> -n <span class="number">3</span> var &amp;&amp; <span class="built_in">echo</span> <span class="variable">$var</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Please Enter your name:"</span> var</span><br><span class="line"><span class="built_in">read</span> <span class="operator">-s</span> password</span><br><span class="line"><span class="built_in">read</span> -t <span class="number">3</span> var</span><br><span class="line"><span class="built_in">read</span> <span class="operator">-d</span> <span class="string">":"</span> var</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org6bd9d8c" class="outline-3"><h3 id="org6bd9d8c"><span class="section-number-3">4.2</span> IFS</h3><div class="outline-text-3" id="text-4-2"><p>另一个分隔符工具 : internal field separator. <code>$IFS</code></p></div></div><div id="outline-container-org648db6c" class="outline-3"><h3 id="org648db6c"><span class="section-number-3">4.3</span> xarg</h3><div class="outline-text-3" id="text-4-3"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat file.txt | xargs</span><br><span class="line">cat file.txt | xargs -n <span class="number">3</span></span><br><span class="line">cat file.txt | xargs -n <span class="number">3</span> <span class="operator">-d</span> _</span><br><span class="line">find . -type f -name <span class="string">"*.txt"</span> -print0 | xargs -<span class="number">0</span> rm <span class="operator">-f</span></span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-org2d011f6" class="outline-2"><h2 id="org2d011f6"><span class="section-number-2">5</span> translate</h2><div class="outline-text-2" id="text-5"></div><div id="outline-container-org2fa045e" class="outline-3"><h3 id="org2fa045e"><span class="section-number-3">5.1</span> 将输入中的一组字符串转换成另一组字符串。</h3><div class="outline-text-3" id="text-5-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tr [option] <span class="built_in">set</span>1 <span class="built_in">set</span>2</span><br><span class="line">cat file.txt | tr <span class="string">'A-Z'</span> <span class="string">'a-z'</span></span><br><span class="line"><span class="built_in">echo</span> <span class="number">12345</span> | tr <span class="string">'0-9'</span> <span class="string">'9876543210'</span></span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgb9cee3f" class="outline-3"><h3 id="orgb9cee3f"><span class="section-number-3">5.2</span> 删除特定字符串</h3><div class="outline-text-3" id="text-5-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat file.txt | tr <span class="operator">-d</span> <span class="string">'0-9'</span></span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgb7e3270" class="outline-3"><h3 id="orgb7e3270"><span class="section-number-3">5.3</span> 补充特定字符串</h3><div class="outline-text-3" id="text-5-3"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat file.txt | tr -c <span class="built_in">set</span>1</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org8ce5e80" class="outline-3"><h3 id="org8ce5e80"><span class="section-number-3">5.4</span> 集合分类</h3><div class="outline-text-3" id="text-5-4"><dl class="org-dl"><dt>alnum</dt><dd>alphanumeric characters</dd><dt>alpha</dt><dd>alphabetic characters</dd><dt>cntrl</dt><dd>control characters</dd><dt>digit</dt><dd>numeric characters</dd><dt>xdigit</dt><dd>hexadecimal characters</dd><dt>graph</dt><dd>graphic characters</dd><dt>print</dt><dd>printable characters</dd><dt>punct</dt><dd>punctuation characters</dd><dt>space</dt><dd>whitespace characters</dd><dt>lower</dt><dd>lower-case alpha</dd><dt>upper</dt><dd>upper-case alpha</dd></dl><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tr <span class="string">'[:lower:]'</span> <span class="string">'[:upper:]'</span></span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-orgaac8fe2" class="outline-2"><h2 id="orgaac8fe2"><span class="section-number-2">6</span> sort</h2><div class="outline-text-2" id="text-6"><p>排序文件内容，并剔除重复</p><pre class="example">sort file1.txt file2.txt &gt; sorted.txtsort file1.txt file2.txt -o sorted.txt# numeric sort &amp;&amp; reverse ordersort -n file.txtsort -r file.txt# specify key of column 2sort -k 2 file.txt# ignore leading blanks &amp;&amp; directory ordersort -bd unsorted.txt# sort by monthssort -M file.txt# merge sorted files without sorting againsort -m sorted1 sorted2</pre><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sort unsorted.txt | uniq</span><br><span class="line">sort -u unsorted.txt</span><br><span class="line">uniq sorted.txt</span><br><span class="line"><span class="comment"># display only unique lines</span></span><br><span class="line">uniq -u sorted.txt</span><br><span class="line"><span class="comment"># display counts</span></span><br><span class="line">sort unsorted.txt | uniq -c</span><br><span class="line"><span class="comment"># display duplicate lines</span></span><br><span class="line">sort unsorted.txt | uniq <span class="operator">-d</span></span><br><span class="line"><span class="comment"># -s skip first N characters</span></span><br><span class="line"><span class="comment"># -w maximum characters to compare</span></span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">comm sorted1.txt sorted2.txt</span><br><span class="line">comm sorted1.txt sorted2.txt -<span class="number">3</span></span><br><span class="line">comm sorted1.txt sorted2.txt -<span class="number">1</span> -<span class="number">2</span></span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgda77f44" class="outline-2"><h2 id="orgda77f44"><span class="section-number-2">7</span> diff</h2><div class="outline-text-2" id="text-7"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">diff file1.txt file2.txt</span><br><span class="line"><span class="comment"># Unified output will be like git</span></span><br><span class="line">diff -u file1.txt file2.txt</span><br><span class="line"><span class="comment"># Save differences to file.patch</span></span><br><span class="line">diff -u file1.txt file2.txt &gt; file.patch</span><br><span class="line"><span class="comment"># Apply patch, i.e. having same contents of file2.txt</span></span><br><span class="line">patch -p1 file1.txt &lt; file.patch</span><br><span class="line"><span class="comment"># Revert patch</span></span><br><span class="line">patch -p1 file1.txt &lt; file.patch -R</span><br><span class="line"><span class="comment"># Recursively generating diff</span></span><br><span class="line">diff -Naur dire1 dire2</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org9de5436" class="outline-2"><h2 id="org9de5436"><span class="section-number-2">8</span> head &amp; tail</h2><div class="outline-text-2" id="text-8"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Print first 10 lines</span></span><br><span class="line">head file</span><br><span class="line">cat ~/.spacemacs | head</span><br><span class="line"><span class="comment"># First 4 lines to be printed</span></span><br><span class="line">head -n <span class="number">4</span> file</span><br><span class="line"><span class="comment"># All lines except last 5 lines</span></span><br><span class="line">head -n -<span class="number">5</span> file</span><br><span class="line"><span class="comment"># Print last 10 lines</span></span><br><span class="line">tail file</span><br><span class="line"><span class="comment"># Last 4 lines to be printed</span></span><br><span class="line">tail -n <span class="number">4</span> file</span><br><span class="line"><span class="comment"># All lines except first (5-1) line</span></span><br><span class="line">tail -n +<span class="number">5</span></span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Reading a growing file, using pid</span></span><br><span class="line">PID=$(pidof emacs)</span><br><span class="line">tail <span class="operator">-f</span> file.txt --pid <span class="variable">$PID</span></span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Count number of lines</span></span><br><span class="line">wc <span class="operator">-l</span> file</span><br><span class="line"><span class="comment"># print the length of longest line</span></span><br><span class="line">wc file -L</span><br><span class="line"><span class="comment"># Tree view of files and directories</span></span><br><span class="line">tree ~/Documents</span><br><span class="line"><span class="comment"># -P PATTERN highlight only files matched by pattern</span></span><br><span class="line">tree path -P <span class="string">"*.sh"</span></span><br><span class="line"><span class="comment"># -I PATTERN highlight only files excluding the match pattern</span></span><br><span class="line">tree path -I <span class="string">"*.org"</span></span><br><span class="line"><span class="comment"># Print size along with them</span></span><br><span class="line">tree -h</span><br><span class="line"><span class="comment"># Generate HTML output at directory PATH</span></span><br><span class="line">tree PATH -H http://localhost -o out.html</span><br></pre></td></tr></table></figure></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orgb4cd564&quot;&gt;1. file name&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org0192654&quot;&gt;1.1. temp file&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org87c3f13&quot;&gt;1.2. splitting file&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org11a72b1&quot;&gt;1.3. slicing filename&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org116ba8b&quot;&gt;2. find&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orgcc9aed7&quot;&gt;2.1. list all files with path&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org6b63bbd&quot;&gt;2.2. search by name&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org022c3ba&quot;&gt;2.3. search by attributes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgfd3b5fc&quot;&gt;2.4. operations&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org8088c80&quot;&gt;3. comparison&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org2a82a8f&quot;&gt;3.1. math comparison&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org86a8dfa&quot;&gt;3.2. logical comparison&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orga2acef8&quot;&gt;3.3. filesystem conditions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org98e00ef&quot;&gt;3.4. string conditions / comparisons&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org3a58dde&quot;&gt;4. input&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orgdaa37f1&quot;&gt;4.1. read&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org6bd9d8c&quot;&gt;4.2. IFS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org648db6c&quot;&gt;4.3. xarg&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org2d011f6&quot;&gt;5. translate&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org2fa045e&quot;&gt;5.1. 将输入中的一组字符串转换成另一组字符串。&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgb9cee3f&quot;&gt;5.2. 删除特定字符串&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgb7e3270&quot;&gt;5.3. 补充特定字符串&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org8ce5e80&quot;&gt;5.4. 集合分类&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgaac8fe2&quot;&gt;6. sort&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgda77f44&quot;&gt;7. diff&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org9de5436&quot;&gt;8. head &amp;amp; tail&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="linux" scheme="https://angry-bird.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://angry-bird.github.io/tags/linux/"/>
    
      <category term="shell" scheme="https://angry-bird.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>Linux shell commands 101</title>
    <link href="https://angry-bird.github.io/2017/10/20/Linux-shell-commands-101/"/>
    <id>https://angry-bird.github.io/2017/10/20/Linux-shell-commands-101/</id>
    <published>2017-10-20T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#org758d537">1. 文件</a><ul><li><a href="#org859a9ff">1.1. 文件创建、显示内容、修改属主属性</a></li><li><a href="#org429d9b8">1.2. Loopback filesystem vs. loopback file</a></li><li><a href="#org7e2ce21">1.3. Creating &amp; Mounting ISO files as loopback</a></li><li><a href="#org520f738">1.4. Compression</a></li><li><a href="#org92de7f1">1.5. Archiving</a></li></ul></li><li><a href="#orgbdd953f">2. 用户</a><ul><li><a href="#orga83108a">2.1. 添加、修改、删除</a></li><li><a href="#orgb915441">2.2. 登录信息</a></li></ul></li><li><a href="#orgf00981c">3. 系统</a><ul><li><a href="#org959e48f">3.1. 硬盘使用量</a></li><li><a href="#org192f84c">3.2. CPU 时间使用量</a></li><li><a href="#org5bd9510">3.3. 系统资源使用量</a></li><li><a href="#org8024edb">3.4. 计划任务</a></li></ul></li><li><a href="#orgdce861e">4. 网络</a><ul><li><a href="#org7923e5b">4.1. ip</a></li><li><a href="#org70fb1fe">4.2. ifconfig</a></li><li><a href="#orgef8a765">4.3. networkmanager</a></li><li><a href="#orga119d7c">4.4. write static ip</a></li><li><a href="#orgea2ecf3">4.5. network communication</a></li></ul></li></ul></div></div><a id="more"></a><p>第 1 篇 介绍 Linux 系统配置命令，包括文件修改，用户添加、删除、修改，网络配置</p><div id="outline-container-org758d537" class="outline-2"><h2 id="org758d537"><span class="section-number-2">1</span> 文件</h2><div class="outline-text-2" id="text-1"></div><div id="outline-container-org859a9ff" class="outline-3"><h3 id="org859a9ff"><span class="section-number-3">1.1</span> 文件创建、显示内容、修改属主属性</h3><div class="outline-text-3" id="text-1-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/dev/zero bs=<span class="number">100</span>k count=<span class="number">1</span> of=data.file</span><br><span class="line"><span class="comment"># touch modify files, create them if they not exist</span></span><br><span class="line">touch file{<span class="number">1</span>..<span class="number">100</span>}.sh</span><br><span class="line"><span class="comment"># modify access &amp; modification time</span></span><br><span class="line">touch <span class="operator">-a</span> file.sh</span><br><span class="line">touch -m file.sh</span><br><span class="line">touch <span class="operator">-d</span> <span class="string">"jan 20 2017"</span> file.sh</span><br><span class="line">ln <span class="operator">-s</span> target_file symlink_name</span><br><span class="line">find . -type l -print</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">test</span>&gt;&gt;file.sh</span><br><span class="line">file file.sh</span><br><span class="line">file -b file.sh</span><br><span class="line">cat file.sh</span><br><span class="line">chmod <span class="number">755</span> file.sh</span><br><span class="line">chmod u=rwx g=rw o=r file.sh</span><br><span class="line">chmod a+x file.sh</span><br><span class="line"><span class="comment">## Recursively change permissions to current directory</span></span><br><span class="line">chmod <span class="number">777</span> . -R</span><br><span class="line"><span class="comment"># chown user.group filename</span></span><br><span class="line">chown zuoshi.kali file.sh</span><br><span class="line">chown zuoshi.kali . -R</span><br><span class="line"><span class="comment"># make immutable file</span></span><br><span class="line">chattr +i file.sh</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org429d9b8" class="outline-3"><h3 id="org429d9b8"><span class="section-number-3">1.2</span> Loopback filesystem vs. loopback file</h3><div class="outline-text-3" id="text-1-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/dev/zero of=loopbackfile.img bs=<span class="number">1</span>G count=<span class="number">1</span></span><br><span class="line">mkfs.ext4 loopbackfile.img</span><br><span class="line">sudo mkdir /mnt/lookback</span><br><span class="line">mount -o loop loopbackfile.img /mnt/loopback</span><br><span class="line"><span class="comment"># Or use follow steps to mount loopbackfile</span></span><br><span class="line">losetup /dev/loop1 loopbackfile.img</span><br><span class="line">mount /dev/loop1 /mnt/loopback</span><br><span class="line"><span class="comment"># 1st partition on disk img file, just like sda1 on sda</span></span><br><span class="line"><span class="comment"># offset is 32256 byte</span></span><br><span class="line">losetup -o <span class="number">32256</span> /dev/loop2 loopbackfile.img</span><br><span class="line">umount /dev/loop1</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org7e2ce21" class="outline-3"><h3 id="org7e2ce21"><span class="section-number-3">1.3</span> Creating &amp; Mounting ISO files as loopback</h3><div class="outline-text-3" id="text-1-3"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">cat /dev/cdrom &gt; linux.iso</span><br><span class="line"><span class="comment"># The preferred way</span></span><br><span class="line">dd <span class="keyword">if</span>=/dev/cdrom of=linux.iso</span><br><span class="line"><span class="comment"># Another way</span></span><br><span class="line">mkisofs -V <span class="string">"Label"</span> -o linux.iso <span class="built_in">source</span>_dir/</span><br><span class="line"><span class="comment"># Hybrid ISO can be written to USB sd as a bootable USB device,</span></span><br><span class="line"><span class="comment"># So convernt bootable ISO file to Hybrid ISO</span></span><br><span class="line">isohybrid linux.iso</span><br><span class="line"><span class="comment"># Write it to usb sd</span></span><br><span class="line">dd <span class="keyword">if</span>=linux.iso of=/dev/sdb1</span><br><span class="line"><span class="comment"># Or just use cat</span></span><br><span class="line">cat linux.iso &gt; /dev/sdb1</span><br><span class="line"><span class="comment"># Burning an iso file into CD ROM or DVD ROM</span></span><br><span class="line">cdrecord -v dev=/dev/cdrom linux.iso</span><br><span class="line"><span class="comment"># mounting iso files</span></span><br><span class="line">mkdir /mnt/iso</span><br><span class="line">mount -o loop linux.iso /mnt/iso</span><br><span class="line"><span class="comment"># Flush into iso file</span></span><br><span class="line">sync</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org520f738" class="outline-3"><h3 id="org520f738"><span class="section-number-3">1.4</span> Compression</h3><div class="outline-text-3" id="text-1-4"></div><div id="outline-container-orgff650aa" class="outline-4"><h4 id="orgff650aa">zip</h4><div class="outline-text-4" id="text-orgff650aa"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">zip arch.zip file</span><br><span class="line">zip -r arch.zip dire file</span><br><span class="line"><span class="comment"># Delete file from arch.zip</span></span><br><span class="line">zip <span class="operator">-d</span> arch.zip file</span><br><span class="line"><span class="comment"># Update</span></span><br><span class="line">zip arch.zip -u newfile</span><br><span class="line"><span class="comment"># List</span></span><br><span class="line">unzip <span class="operator">-l</span> arch.zip</span><br><span class="line"><span class="comment"># Extract</span></span><br><span class="line">unzip file.zip</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgb4d30de" class="outline-4"><h4 id="orgb4d30de">gz, bz2, xz</h4><div class="outline-text-4" id="text-orgb4d30de"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">gzip file</span><br><span class="line">gunzip arch.gz</span><br><span class="line"><span class="comment"># List</span></span><br><span class="line">gzip <span class="operator">-l</span> arch.gz</span><br><span class="line"><span class="comment"># Read from =stdio= and compress output file</span></span><br><span class="line">cat file | gzip -c &gt; arch.gz</span><br><span class="line"><span class="comment"># Dump extracted file without extracting gz</span></span><br><span class="line">zcat arch.gz</span><br><span class="line"><span class="comment"># Compression ratio</span></span><br><span class="line">gzip -<span class="number">9</span> file</span><br><span class="line"><span class="comment"># bzip &amp; bzip2</span></span><br><span class="line">bzip2 file</span><br><span class="line">bunzip2 arch.bz2</span><br><span class="line">bunzip2 arch.bz2 -k</span><br><span class="line">cat file | bzip2 -c &gt; arch.tar.bz2</span><br><span class="line"><span class="comment"># lzma</span></span><br><span class="line">lzma file</span><br><span class="line">unlzma file</span><br><span class="line">cat file | lzma -c &gt; file.lzma</span><br><span class="line"><span class="comment"># xz</span></span><br><span class="line">xz -z file</span><br><span class="line">xz <span class="operator">-d</span> arch.xz</span><br><span class="line">xz <span class="operator">-d</span> arch.xz -k</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org44e1948" class="outline-4"><h4 id="org44e1948">squashfs</h4><div class="outline-text-4" id="text-org44e1948"><p>只读压缩文件，可以将 2-3G 的数据压缩到 700M 大小的文件，正如 Linux 的 Live CD 一样。配合 loopback 模式挂载压缩文件，因每次只解压少量文件，而能维持较高访问速度。</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mksquashfs SOURCES comp.squashfs</span><br><span class="line">mkdir -p /mnt/squash</span><br><span class="line">mount -o loop comp.squashfs /mnt/squash</span><br><span class="line"><span class="comment"># Exclude</span></span><br><span class="line">sudo mksquashfs /etc comp.squashfs <span class="operator">-e</span> /etc/passwd /etc/shadow</span><br><span class="line">sudo mksquashfs /etc comp.squashfs -ef exclude.list</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgdf836c1" class="outline-4"><h4 id="orgdf836c1">crypo tools</h4><div class="outline-text-4" id="text-orgdf836c1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">crypt PASSPHRASE input encrypted</span><br><span class="line">gpg -c input</span><br><span class="line">gpg file.gpg</span><br><span class="line">base64 file &gt; out_file</span><br><span class="line">md5sum file</span><br><span class="line">sha1sum file</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgd27242b" class="outline-4"><h4 id="orgd27242b">sync &amp; backup</h4><div class="outline-text-4" id="text-orgd27242b"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rsync -az /home/zuoshi /home/backup</span><br><span class="line">rsync -az <span class="built_in">source</span>_path dest_path --exclude <span class="string">"*.txt"</span></span><br><span class="line">rsync -az <span class="built_in">source</span>_path dest_path --exclude-from exclude.list</span><br><span class="line"><span class="comment"># Delete non-exist files from destination path</span></span><br><span class="line">rsync -az <span class="built_in">source</span>_path dest_path --delete</span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-org92de7f1" class="outline-3"><h3 id="org92de7f1"><span class="section-number-3">1.5</span> Archiving</h3><div class="outline-text-3" id="text-1-5"></div><div id="outline-container-orge8c96e4" class="outline-4"><h4 id="orge8c96e4">tar</h4><div class="outline-text-4" id="text-orge8c96e4"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create and compress after archiving</span></span><br><span class="line">tar -cf output.tar file1 file2 folder1 ..</span><br><span class="line"><span class="comment">#-a --auto-compress with extension</span></span><br><span class="line">tar -caf output.tar.xz file1 file2</span><br><span class="line">tar -czf output.tar.gz file1 file2</span><br><span class="line">tar -cjf output.tar.bz2 file1 file2</span><br><span class="line"><span class="comment"># --lzma xz</span></span><br><span class="line">tar -cJf output.tar.xz file1 file2</span><br><span class="line"><span class="comment"># --total printing total bytes after archiving</span></span><br><span class="line"><span class="comment"># Exclude a set of file from archiving</span></span><br><span class="line">tar -cf arch.tar * --exclude <span class="string">"*.txt"</span></span><br><span class="line">tar -cf arch.tar * -X EXCLUED.LIST</span><br><span class="line"><span class="comment"># Exclude version control directory</span></span><br><span class="line">tar --exclude-vcs -czvvf <span class="built_in">source</span>_code.tar.gz DIRE</span><br><span class="line"><span class="comment"># Extract to</span></span><br><span class="line">tar -xf archive.tar -C /path/to/extra_dir</span><br><span class="line">tar -xJf output.tar.gz</span><br><span class="line"><span class="comment"># Extract and delete</span></span><br><span class="line">tar -xzf output.tar.gz --remove-files</span><br><span class="line"><span class="comment"># Update</span></span><br><span class="line">tar -rf output.tar new_file</span><br><span class="line"><span class="comment"># Updating only file1 has newer modification timestamp</span></span><br><span class="line">tar -uf archive.tar file1</span><br><span class="line"><span class="comment"># Merge tarballs</span></span><br><span class="line">tar -Af file1.tar file2.tar</span><br><span class="line"><span class="comment"># List = test</span></span><br><span class="line">tar -tf output.tar</span><br><span class="line"><span class="comment"># Differ</span></span><br><span class="line">tar -df archive.tar file1 file2</span><br><span class="line"><span class="comment"># Delete files in archive</span></span><br><span class="line">tar <span class="operator">-f</span> archive.tar --delete file1 file2</span><br><span class="line">tar --delete --file archive.tar file1 file2</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org1c2aec5" class="outline-4"><h4 id="org1c2aec5">cpio</h4><div class="outline-text-4" id="text-org1c2aec5"><p>文件夹和带有路径的文件， <code>cpio</code> 压缩解压时会遵守绝对路径， <code>tar</code> 则移除 <code>/</code> 转换成当前目录的相对路径。</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Archiving to output file</span></span><br><span class="line"><span class="built_in">echo</span> file1 file2 | cpio -o &gt; arch.cpio</span><br><span class="line"><span class="comment"># List file in archive file</span></span><br><span class="line">cpio -it &lt; arch.cpio</span><br><span class="line"><span class="comment"># Extract from archive</span></span><br><span class="line">cpio -id &lt; arch.cpio</span><br></pre></td></tr></table></figure></div></div></div></div></div><div id="outline-container-orgbdd953f" class="outline-2"><h2 id="orgbdd953f"><span class="section-number-2">2</span> 用户</h2><div class="outline-text-2" id="text-2"></div><div id="outline-container-orga83108a" class="outline-3"><h3 id="orga83108a"><span class="section-number-3">2.1</span> 添加、修改、删除</h3><div class="outline-text-3" id="text-2-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">useradd -g users <span class="operator">-s</span> /bin/bash -m name</span><br><span class="line">usermod <span class="operator">-d</span> /mnt/usb/home -m name</span><br><span class="line">passwd name</span><br><span class="line">userdel name</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgb915441" class="outline-3"><h3 id="orgb915441"><span class="section-number-3">2.2</span> 登录信息</h3><div class="outline-text-3" id="text-2-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">who</span><br><span class="line">w</span><br><span class="line">users</span><br><span class="line">uptime</span><br><span class="line">last</span><br><span class="line">lastb</span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-orgf00981c" class="outline-2"><h2 id="orgf00981c"><span class="section-number-2">3</span> 系统</h2><div class="outline-text-2" id="text-3"></div><div id="outline-container-org959e48f" class="outline-3"><h3 id="org959e48f"><span class="section-number-3">3.1</span> 硬盘使用量</h3><div class="outline-text-3" id="text-3-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Disk usage</span></span><br><span class="line">du -sh</span><br><span class="line">du -ch</span><br><span class="line">du file</span><br><span class="line">du <span class="operator">-a</span> directory</span><br><span class="line"><span class="comment"># Print size in bytes(default), kilobytes, megabytes, Block size(n bytes)</span></span><br><span class="line">du -b file</span><br><span class="line">du -k file</span><br><span class="line">du -m file</span><br><span class="line">du -B <span class="number">4</span> file</span><br><span class="line"><span class="comment"># Exclude files</span></span><br><span class="line">du --exclude <span class="string">"*.org"</span> deft</span><br><span class="line">du --exclude-from exclude.txt deft</span><br><span class="line">du --max-depth <span class="number">2</span> deft</span><br><span class="line"><span class="comment"># 10 largest size file</span></span><br><span class="line">du -ak deft | sort -nrk <span class="number">1</span> | head</span><br><span class="line"><span class="comment"># Disk free space</span></span><br><span class="line">df -h</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org192f84c" class="outline-3"><h3 id="org192f84c"><span class="section-number-3">3.2</span> CPU 时间使用量</h3><div class="outline-text-3" id="text-3-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">time COMMAND</span><br><span class="line">time ls</span><br><span class="line">time -o output.txt COMMAND</span><br><span class="line">time <span class="operator">-f</span> <span class="string">"Time: %U"</span> <span class="operator">-a</span> -o output.txt ls</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org5bd9510" class="outline-3"><h3 id="org5bd9510"><span class="section-number-3">3.3</span> 系统资源使用量</h3><div class="outline-text-3" id="text-3-3"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ps</span><br><span class="line">ps -fe | head</span><br><span class="line">top</span><br><span class="line">pgrep</span><br><span class="line">lsof</span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> <span class="operator">-l</span></span><br><span class="line"><span class="built_in">kill</span> <span class="operator">-s</span> SIGNAL PID</span><br><span class="line"><span class="built_in">kill</span> -<span class="number">9</span> PID</span><br><span class="line">killall PName</span><br><span class="line">killall -<span class="number">9</span> emacs</span><br><span class="line">killall -u USER PName</span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hostname</span><br><span class="line">uname -n</span><br><span class="line">uname <span class="operator">-a</span></span><br><span class="line">uname -r</span><br><span class="line">uname -m</span><br><span class="line">cat /proc/cpuinfo</span><br><span class="line">cat /proc/meninfo</span><br><span class="line">cat /proc/partitions</span><br><span class="line">fdisk <span class="operator">-l</span></span><br><span class="line">lshw</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org8024edb" class="outline-3"><h3 id="org8024edb"><span class="section-number-3">3.4</span> 计划任务</h3><div class="outline-text-3" id="text-3-4"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create a scheduling task</span></span><br><span class="line">crontab <span class="operator">-e</span></span><br><span class="line"><span class="comment"># 02 02 * * * /home/zuoshi/test.sh</span></span><br><span class="line">crontab task.cron</span><br><span class="line">crontab &lt;&lt; EOF</span><br><span class="line">http_proxy=http://<span class="number">192.168</span>.<span class="number">0.3</span>:<span class="number">3128</span></span><br><span class="line"><span class="number">00</span> * * * * /home/zuoshi/download.sh</span><br><span class="line"><span class="comment"># Viewing the cron table</span></span><br><span class="line">crontab <span class="operator">-l</span> -u zuoshi</span><br><span class="line"><span class="comment"># Removing the cron table</span></span><br><span class="line">crontab -r</span><br></pre></td></tr></table></figure></div></div></div></div><div id="outline-container-orgdce861e" class="outline-2"><h2 id="orgdce861e"><span class="section-number-2">4</span> 网络</h2><div class="outline-text-2" id="text-4"></div><div id="outline-container-org7923e5b" class="outline-3"><h3 id="org7923e5b"><span class="section-number-3">4.1</span> ip</h3><div class="outline-text-3" id="text-4-1"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> nameserver <span class="number">8.8</span>.<span class="number">8.8</span> &gt;&gt; /etc/resolv.conf</span><br><span class="line">ip addr show</span><br><span class="line">ip link status</span><br><span class="line">ip addr add <span class="number">192.168</span>.<span class="number">0.10</span>/<span class="number">24</span> broadcast <span class="number">192.168</span>.<span class="number">0.255</span> dev ens33</span><br><span class="line">ip link <span class="built_in">set</span> ens33 up</span><br><span class="line">ip route add default via <span class="number">192.168</span>.<span class="number">0.1</span></span><br><span class="line">ping -c2 github.com</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org70fb1fe" class="outline-3"><h3 id="org70fb1fe"><span class="section-number-3">4.2</span> ifconfig</h3><div class="outline-text-3" id="text-4-2"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 up</span><br><span class="line">ifconfig eth0 <span class="number">192.168</span>.<span class="number">0.1</span> netmask <span class="number">255.255</span>.<span class="number">255.0</span> broadcast <span class="number">192.168</span>.<span class="number">0.255</span></span><br><span class="line">route add default gw <span class="number">192.168</span>.<span class="number">0.100</span></span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgef8a765" class="outline-3"><h3 id="orgef8a765"><span class="section-number-3">4.3</span> networkmanager</h3><div class="outline-text-3" id="text-4-3"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nmcli connection add con-name <span class="string">"static"</span> ifname eth0 <span class="built_in">type</span> ethernet autoconnect yes ip4 <span class="number">192.168</span>.<span class="number">0.1</span> gw4 <span class="number">192.168</span>.<span class="number">0.101</span></span><br><span class="line">nmcli connection modify <span class="string">"static"</span> ipv4.dns <span class="number">8.8</span>.<span class="number">4.4</span></span><br><span class="line">nmcli connection modify <span class="string">"static"</span> +ipv4.dns <span class="number">8.8</span>.<span class="number">8.8</span></span><br><span class="line">nmcli connection modify <span class="string">"static"</span> +ipv4.addresses <span class="number">192.168</span>.<span class="number">0.2</span>/<span class="number">24</span></span><br><span class="line">nmcli connection up static</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orga119d7c" class="outline-3"><h3 id="orga119d7c"><span class="section-number-3">4.4</span> write static ip</h3><div class="outline-text-3" id="text-4-4"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">## /etc/network/interfaces&#10;# This file describes the network interfaces available on your system&#10;# and how to activate them. For more information, see interfaces(5).&#10;source /etc/network/interfaces.d/*&#10;# The loopback network interface&#10;auto lo&#10;iface lo inet loopback&#10;# Static inet&#10;auto eth0&#10;iface eth0 inet static&#10;    address 192.168.0.1&#10;    netmask 255.255.255.0&#10;    broadcast 192.168.0.255&#10;    gateway 192.168.0.100</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgea2ecf3" class="outline-3"><h3 id="orgea2ecf3"><span class="section-number-3">4.5</span> network communication</h3><div class="outline-text-3" id="text-4-5"><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsof -i</span><br><span class="line">netstat -antp</span><br></pre></td></tr></table></figure></div></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org758d537&quot;&gt;1. 文件&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org859a9ff&quot;&gt;1.1. 文件创建、显示内容、修改属主属性&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org429d9b8&quot;&gt;1.2. Loopback filesystem vs. loopback file&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org7e2ce21&quot;&gt;1.3. Creating &amp;amp; Mounting ISO files as loopback&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org520f738&quot;&gt;1.4. Compression&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org92de7f1&quot;&gt;1.5. Archiving&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgbdd953f&quot;&gt;2. 用户&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orga83108a&quot;&gt;2.1. 添加、修改、删除&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgb915441&quot;&gt;2.2. 登录信息&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgf00981c&quot;&gt;3. 系统&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org959e48f&quot;&gt;3.1. 硬盘使用量&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org192f84c&quot;&gt;3.2. CPU 时间使用量&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org5bd9510&quot;&gt;3.3. 系统资源使用量&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org8024edb&quot;&gt;3.4. 计划任务&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgdce861e&quot;&gt;4. 网络&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org7923e5b&quot;&gt;4.1. ip&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org70fb1fe&quot;&gt;4.2. ifconfig&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgef8a765&quot;&gt;4.3. networkmanager&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orga119d7c&quot;&gt;4.4. write static ip&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgea2ecf3&quot;&gt;4.5. network communication&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="linux" scheme="https://angry-bird.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://angry-bird.github.io/tags/linux/"/>
    
      <category term="shell" scheme="https://angry-bird.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>Snippet</title>
    <link href="https://angry-bird.github.io/2017/10/18/snippet/"/>
    <id>https://angry-bird.github.io/2017/10/18/snippet/</id>
    <published>2017-10-18T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>Snipppet 是非常棒的代码编辑工具，能极大地提高代码开发效率。Snippet 其实就是一段源代码或文字，由编辑器以模块的形式存放、以索引方式调用和管理它，达到实际开发中的复用。开发者在编程或写作时，只需要输入 Snippet 名（索引名），即可提供补全（以索引名调用此 Snippet）选项。在 Emacs 中，yassnippet 是我用过的最棒的，有了它再也不怕繁琐的重复性工作了。</p><a id="more"></a><div id="outline-container-org7de2ef2" class="outline-2"><h2 id="org7de2ef2"><span class="section-number-2">1</span> yassnippet</h2><div class="outline-text-2" id="text-1"><p><a href="https://github.com/joaotavora/yasnippet%0A" target="_blank" rel="noopener">yassnippet</a> 已经是 spacemacs 中 auto-complete layer 自带的 snippet 工具了。因为它是真的很棒呀！</p></div><div id="outline-container-org15d046b" class="outline-3"><h3 id="org15d046b"><span class="section-number-3">1.1</span> config</h3><div class="outline-text-3" id="text-1-1"><p>安装完 yassnippet，就可以从其下 snippets/ 中看到自带的大量 snippets，当然也建议自行修改、创建适合自己的 Snippet，存放在自己的目录下。</p><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">(setq yas-snippet-dirs&#10;      &#39;(&#34;~/.emacs.d/private/snippets&#34;&#10;        &#34;~/.emacs.d/elpa/yasnippet*/snippets&#34;&#10;        ))</span><br></pre></td></tr></table></figure></div><p>如果是 spacemacs 用户，这些全都是默认配置了</p><pre class="example">The following directories are added by default:- =~/.emacs.d/elpa/yasnippet-xxxxx/snippets=- =~/.emacs.d/layers/auto-completion/snippets=- =~/.emacs.d/private/snippets= (conditional to the value of =auto-completion-private-snippets-directory=)- =~/.spacemacs.d/snippets= (conditional to the existence of =~/.spacemacs.d= directory)</pre><p>我的.spacemacs 中 auto-complete 设置如下：</p><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">(auto-completion :variables&#10;                 auto-completion-return-key-behavior &#39;complete&#10;                 auto-completion-tab-key-behavior &#39;cycle&#10;                 auto-completion-complete-with-key-sequence nil&#10;                 auto-completion-complete-with-key-sequence-delay 0.1&#10;                 auto-completion-enable-snippets-in-popup t&#10;                 auto-completion-enable-help-tooltip t&#10;                 auto-completion-enable-sort-by-usage t&#10;                 )</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org5e43f53" class="outline-3"><h3 id="org5e43f53"><span class="section-number-3">1.2</span> snippets for org-mode</h3><div class="outline-text-3" id="text-1-2"></div><div id="outline-container-org57a8068" class="outline-4"><h4 id="org57a8068">head</h4><div class="outline-text-4" id="text-org57a8068"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line"># -*- mode: snippet -*-&#10;# name: head&#10;# key: head_&#10;# --&#10;#+OPTIONS: ^:{} toc:2 num:t &#60;:nil c:nil \n:nil email:nil f:t todo:t date:nil timestamp:nil creator:nil author:nil&#10;#+BIND: org-html-validation-link nil&#10;#+STARTUP: indent align content latexpreview&#10;#+EXPORT_EXCLUDE_TAGS: noexport&#10;#+AUTHOR: zuoshi\thanks{This document is generated by Emacs org-mode.}&#10;#+TITLE:$1&#10;#+LATEX_CLASS: article&#10;#+LATEX_CLASS_OPTIONS: [12pt, a4paper]&#10;#+LATEX_HEADER: \usepackage[total={6in, 8in}]{geometry}&#10;#+LATEX_HEADER: \usepackage{xeCJK}&#10;#+LATEX_HEADER_EXTRA: \setCJKmainfont{Source Han Sans UI SC}&#10;#+LATEX_HEADER_EXTRA: \hypersetup{CJKbookmarks=true, colorlinks=true, linkcolor=magenta, urlcolor=blue, filecolor=green, citecolor=red, menucolor=cyan}&#10;# #+STARTUP: beamer&#10;# #+LATEX_HEADER: \usetheme{Warsaw}&#10;# #+LATEX_HEADER: \usecolortheme{whale}&#10;$0</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org193bf4a" class="outline-4"><h4 id="org193bf4a">tab</h4><div class="outline-text-4" id="text-org193bf4a"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line"># -*- mode: snippet -*-&#10;# name: tab&#10;# key: tab_&#10;# --&#10;#+CAPTION: $1&#10;#+NAME: tab:$2&#10;#+TBLFM:$3</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orge0bf5f8" class="outline-4"><h4 id="orge0bf5f8">wtab</h4><div class="outline-text-4" id="text-orge0bf5f8"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line"># -*- mode: snippet -*-&#10;# name: wtab&#10;# key: wtab_&#10;# --&#10;|-|-|-|&#10;|function |shortcuts | note|&#10;|-|-|-|&#10;|-|-|-|</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org3dc3a98" class="outline-4"><h4 id="org3dc3a98">img</h4><div class="outline-text-4" id="text-org3dc3a98"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line"># -*- mode: snippet -*-&#10;# name: img&#10;# key: img_&#10;# --&#10;#+CAPTION: $1&#10;#+NAME: img:$2</span><br></pre></td></tr></table></figure></div></div></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;
Snipppet 是非常棒的代码编辑工具，能极大地提高代码开发效率。Snippet 其实就是一段源代码或文字，由编辑器以模块的形式存放、以索引方式调用和管理它，达到实际开发中的复用。开发者在编程或写作时，只需要输入 Snippet 名（索引名），即可提供补全（以索引名调用此 Snippet）选项。
在 Emacs 中，yassnippet 是我用过的最棒的，有了它再也不怕繁琐的重复性工作了。
&lt;/p&gt;
    
    </summary>
    
      <category term="emacs" scheme="https://angry-bird.github.io/categories/emacs/"/>
    
    
      <category term="emacs" scheme="https://angry-bird.github.io/tags/emacs/"/>
    
      <category term="yasnippet" scheme="https://angry-bird.github.io/tags/yasnippet/"/>
    
  </entry>
  
  <entry>
    <title>Rime custom</title>
    <link href="https://angry-bird.github.io/2017/10/17/rime-custom/"/>
    <id>https://angry-bird.github.io/2017/10/17/rime-custom/</id>
    <published>2017-10-17T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#orgec972bb">1. About Rime</a></li><li><a href="#orga5d6a0e">2. ibus-rime</a><ul><li><a href="#org0961f0e">2.1. installation</a></li><li><a href="#org25c7b0e">2.2. issues</a></li></ul></li><li><a href="#org8f26adf">3. squirrel</a><ul><li><a href="#orgf7dc5b4">3.1. <code>squirrel.custom.yaml</code></a></li><li><a href="#orgcde26fd">3.2. modified color scheme</a></li><li><a href="#org0afb434">3.3. <code>luna_pinyin.custom.yaml</code></a></li></ul></li></ul></div></div><a id="more"></a><div id="outline-container-orgec972bb" class="outline-2"><h2 id="orgec972bb"><span class="section-number-2">1</span> About Rime</h2><div class="outline-text-2" id="text-1"><p>Rime is the best chinese input method that I have ever met. It can be customized according to my habits and perferred settings.</p></div></div><div id="outline-container-orga5d6a0e" class="outline-2"><h2 id="orga5d6a0e"><span class="section-number-2">2</span> ibus-rime</h2><div class="outline-text-2" id="text-2"></div><div id="outline-container-org0961f0e" class="outline-3"><h3 id="org0961f0e"><span class="section-number-3">2.1</span> installation</h3><div class="outline-text-3" id="text-2-1"><p><code>fcitx-rime</code> is a better choice for vim users. But <code>ibus-rime</code> is more stable and updated.</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install ibus ibus-rime fcitx-rime</span><br></pre></td></tr></table></figure></div><p><code>~/.config/ibus/rime</code> is <code>ibus-rime</code>'s default config file path. It's recommended to use <code>*.custom.yaml</code> to save user's own configuration instead of modifying default files.</p></div></div><div id="outline-container-org25c7b0e" class="outline-3"><h3 id="org25c7b0e"><span class="section-number-3">2.2</span> issues</h3><div class="outline-text-3" id="text-2-2"><p>Run <code>ibus-setup</code> to set pannel and candidate preference, for <code>ibus-rime</code> having no permissions to modify <code>ibus</code> configuration.</p><p>If <code>ibus-rime</code> is missing in system tray, check <code>/usr/share/ibus-rime/icons/zhung.svg</code>. Copy it as zhung.png, then open and save as zhung.svg.</p></div></div></div><div id="outline-container-org8f26adf" class="outline-2"><h2 id="org8f26adf"><span class="section-number-2">3</span> squirrel</h2><div class="outline-text-2" id="text-3"><p>MacOS version of rime is named <code>squirrel</code>, and with <code>fcitx-remote-for-osx</code> it become an amazing input-method.</p></div><div id="outline-container-orgf7dc5b4" class="outline-3"><h3 id="orgf7dc5b4"><span class="section-number-3">3.1</span> <code>squirrel.custom.yaml</code></h3><div class="outline-text-3" id="text-3-1"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">patch:&#10;&#10;  # us_keyboard_layout: true&#10;  show_notifications_when: appropriate&#10;&#10;  ## disable chinese character input as defaut&#10;  app_options/com.runningwithcrayons.Alfred-3:&#10;    ascii_mode: true&#10;  # app_options/org.gnu.Emacs :&#10;  #   ascii_mode: true&#10;  app_options/com.tencent.qq: {}&#10;&#10;  ## other color schemes aqua&#65292;azure&#65292;luna, ink, starcraft, solarized_rock, dark_temple&#10;  # style/color_scheme : lost_temple&#10;  # style/color_scheme : clean_white&#10;  style/color_scheme : google&#10;  style/horizontal : false&#10;  style/inline_preedit : false&#10;  style/corner_radius : 3&#10;  style/border_height : 4&#10;  style/border_width : 4&#10;  style/line_spacing : 1&#10;  style/spacing : 5&#10;  style/font_point : 20&#10;  style/font_face : &#34;Hiragino Sans GB W3&#34;</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgcde26fd" class="outline-3"><h3 id="orgcde26fd"><span class="section-number-3">3.2</span> modified color scheme</h3><div class="outline-text-3" id="text-3-2"><pre class="example">patch:  # us_keyboard_layout: true  show_notifications_when: appropriate  style:    color_scheme: apathy  preset_color_schemes:    apathy:      name: "冷漠 / Apathy"      author: "LIANG Hai "      horizontal: true  # 水平排列      inline_preedit: true #单行显示，false 双行显示      candidate_format: "%c\u2005%@\u2005"  # 用 1/6 em 空格 U+2005 来控制编号 %c 和候选词 %@ 前后的空间。      corner_radius: 5  #候选条圆角      border_height: 6                                   # 窗口边界高度，大于圆角半径才生效      border_width: 6                                    # 窗口边界宽度，大于圆角半径才生效      back_color: 0xFFFFFF  #候选条背景色      border_color: 0xE0B693                             # 边框色      font_face: ".AdobeSHSDeskSC-Regular"  #候选词字体      font_point: 16  #候选字词大小      text_color: 0x424242  #高亮选中词颜色      label_font_face: "SourceCodePro-Regular"   #候选词编号字体      label_font_point: 13   #候选编号大小      label_color: 0x9e9e9e                              # 预选栏编号颜色      candidate_text_color: 0x000000                     # 预选项文字颜色      text_color: 0x9e9e9e                               # 拼音行文字颜色，24 位色值，16 进制，BGR 顺序      comment_text_color: 0x999999                       # 拼音等提示文字颜色      hilited_text_color: 0x9e9e9e                       # 高亮拼音 (需要开启内嵌编码)      hilited_candidate_text_color: 0x000000             # 第一候选项文字颜色      hilited_candidate_back_color: 0xfff0e4             # 第一候选项背景背景色      hilited_candidate_label_color: 0x9e9e9e            # 第一候选项编号颜色      hilited_comment_text_color: 0x9e9e9e               # 注解文字高亮  "app_options/com.runningwithcrayons.Alfred-3/ascii_mode": true  # "app_options/org.gnu.Emacs/ascii_mode": true</pre></div></div><div id="outline-container-org0afb434" class="outline-3"><h3 id="org0afb434"><span class="section-number-3">3.3</span> <code>luna_pinyin.custom.yaml</code></h3><div class="outline-text-3" id="text-3-3"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line"># luna_pinyin.custom.yaml&#10;#&#10;# &#35036;&#38762;&#21151;&#33021;&#65306;&#23559;&#26393;&#26376;&#25340;&#38899;&#30340;&#35422;&#24235;&#20462;&#25913;&#29234;&#26393;&#26376;&#25340;&#38899;&#25844;&#20805;&#35422;&#24235;&#10;#&#10;# &#20316;&#32773;&#65306;&#29822;&#26112; &#60;cokunhui@gmail.com&#62;&#10;#&#10;# &#27880;&#24847;&#65306;&#26412;&#35036;&#38762;&#36969;&#29992;&#26044;&#25152;&#26377;&#26393;&#26376;&#25340;&#38899;&#31995;&#21015;&#26041;&#26696;&#65288;&#12300;&#26393;&#26376;&#25340;&#38899;&#12301;&#12289;&#12300;&#26393;&#26376;&#25340;&#38899;&#183;&#31616;&#21270;&#23383;&#12301;&#12289;&#12300;&#26393;&#26376;&#25340;&#38899;&#183;&#33274;&#28771;&#27491;&#39636;&#12301;&#12289;&#12300;&#26393;&#26376;&#25340;&#38899;&#183;&#35486;&#21477;&#27969;&#12301;&#65289;&#12290;&#10;# &#21482;&#38920;&#23559;&#26412; custom.yaml &#30340;&#21069;&#38754;&#21517;&#23383;&#25913;&#29234;&#23565;&#25033;&#30340;&#36664;&#20837;&#26041;&#26696;&#21517;&#23383;&#28982;&#24460;&#25918;&#20837;&#29992;&#25142;&#25991;&#20214;&#22846;&#37325;&#26032;&#37096;&#32626;&#21363;&#21487;&#12290;&#22914; luna_pinyin_simp.custom.yaml&#12290;&#10;# &#38617;&#25340;&#29992;&#25142;&#35531;&#20351;&#29992; double_pinyin.custom.yaml&#12290;&#10;#&#10;# &#38468;&#26393;&#26376;&#25340;&#38899;&#31995;&#21015;&#26041;&#26696;&#33287;&#20854;&#23565;&#25033;&#30340; id &#19968;&#35261;&#34920;&#65306;&#10;# &#36664;&#20837;&#26041;&#26696;  id&#10;# &#26393;&#26376;&#25340;&#38899;  luna_pinyin&#10;# &#26393;&#26376;&#25340;&#38899;&#183;&#31616;&#21270;&#23383;      luna_pinyin_simp&#10;# &#26393;&#26376;&#25340;&#38899;&#183;&#33274;&#28771;&#27491;&#39636;     luna_pinyin_tw&#10;# &#26393;&#26376;&#25340;&#38899;&#183;&#35486;&#21477;&#27969;      luna_pinyin_fluency&#10;&#10;patch:&#10;  switches:&#10;    - name: ascii_mode&#10;      reset: 0&#10;      states: [&#34;&#20013;&#25991;&#34;, &#34;&#35199;&#25991;&#34;]&#10;    - name: full_shape&#10;      states: [&#34;&#21322;&#35282;&#34;, &#34;&#20840;&#35282;&#34;]&#10;    - name: zh_simp                      # (&#8251;1) &#32321;&#31616;&#36716;&#25442;&#10;      reset: 1&#10;      states: [&#34;&#28450;&#23383;&#34;, &#34;&#27721;&#23383;&#34;]&#10;    - name: ascii_punct&#10;      states: [&#34;&#12290;&#65292;&#34;, &#34;&#65294;&#65292;&#34;]&#10;#    - options: [&#34;utf8&#34;, &#34;gbk&#34;, &#34;gb2312&#34;] # (&#8251;2)&#23383;&#31526;&#38598;&#36873;&#21333;&#10;#      reset: 0                           #     &#40664;&#35748; UTF8&#10;#      states:&#10;#        - UTF-8&#10;#        - GBK&#10;#        - GB2312&#10;  simplifier:&#10;    option_name: zh_simp&#10;&#10;  engine/filters:&#10;      - simplifier&#10;      - uniquifier&#10;#      - charset_filter@gbk               # (&#8251;3) GBK &#36807;&#28388;&#10;#  &#32232;&#35695;&#29256;&#26412;&#30340;&#40736;&#39706;&#31649;&#21487;&#20197;&#21435;&#25481;&#19978;&#38754;&#24190;&#34892;&#30340;&#35387;&#37323;&#31526;&#34399;&#65292;&#21843;&#29992;&#23383;&#31526;&#38598;&#36942;&#28670;&#21151;&#33021;&#10;&#10;  &#34;speller/algebra/@before 0&#34;: xform/^([b-df-hj-np-tv-z])$/$1_/&#10;&#10;# &#21152;&#36617; easy_en &#20381;&#36084;&#10;  &#34;schema/dependencies/@next&#34;: easy_en&#10;# &#36617;&#20837;&#32763;&#35695;&#33521;&#25991;&#30340;&#30908;&#34920;&#32763;&#35695;&#22120;&#65292;&#21462;&#21517;&#29234; english&#10;  &#34;engine/translators/@next&#34;: table_translator@english&#10;# english &#32763;&#35695;&#22120;&#30340;&#35373;&#23450;&#38917;&#10;  english:&#10;    dictionary: easy_en&#10;    spelling_hints: 9&#10;    enable_completion: true&#10;    enable_sentence: true&#10;    initial_quality: 0&#10;&#10;#  &#36617;&#20837;&#26393;&#26376;&#25340;&#38899;&#25844;&#20805;&#35422;&#24235;&#10;  &#34;translator/dictionary&#34;: luna_pinyin.extended&#10;&#10;#  &#31526;&#21495;&#24555;&#36895;&#36755;&#20837;&#21644;&#37096;&#20998;&#31526;&#21495;&#30340;&#24555;&#36895;&#19978;&#23631;&#10;  punctuator:&#10;    import_preset: symbols&#10;    symbols:&#10;      &#34;/fs&#34;: [&#189;, &#8240;, &#188;, &#8531;, &#8532;, &#190;, &#8530; ]&#10;      &#34;/bq&#34;: [&#128514;&#65039;, &#128517;&#65039;, &#9786;&#65039;, &#128561;&#65039;, &#128557;&#65039;, &#128519;&#65039;, &#128579;&#65039;, &#129300;&#65039;, &#128138;&#65039;, &#128175;&#65039;, &#128077;&#65039;, &#128584;&#65039;, &#128169;&#65039;, &#128520;&#65039; ]&#10;      &#34;/dn&#34;: [&#8984;, &#8997;, &#8679;, &#8963;, &#9099;, &#8682;, &#63743;, &#9003;, &#8998;, &#8617;&#65038;, &#9166;, &#8593;, &#8595;, &#8592;, &#8594;, &#8598;, &#8600;, &#8671;, &#8670;]&#10;      &#34;/fh&#34;: [ &#8226;, &#9834;, &#169;, &#9773;, &#9774;, &#10016;, &#9884;, &#9883;, &#9764;, &#9775;, &#174;, &#8471;, &#8480;, &#8482;, &#8481;, &#9249;, &#9794;, &#9792;, &#9737;, &#9738;, &#9739;, &#9740;, &#9741;, &#9744;, &#9745;&#65038;, &#9746;, &#9756;, &#9757;, &#9758;, &#9759;, &#9998;, &#9988;, &#9842;, &#9851;, &#9872;, &#9873;, &#9888;]&#10;      &#34;/xh&#34;: [ &#65290;, &#215;, &#10033;, &#9733;, &#9734;, &#10025;, &#10023;, &#10059;, &#10058;, &#10057;, &#10056;, &#10053;, &#10047;, &#10034;]&#10;    half_shape:&#10;      &#34;#&#34;: &#34;#&#34;&#10;      &#34;*&#34;: &#34;*&#34;&#10;      &#34;`&#34;: &#34;`&#34;&#10;      &#34;~&#34;: &#34;~&#34;&#10;      &#34;@&#34;: &#34;@&#34;&#10;      &#34;=&#34;: &#34;=&#34;&#10;      &#34;/&#34;: [&#34;/&#34;, &#34;&#247;&#34;,]&#10;      &#39;\&#39;: &#34;&#12289;&#34;&#10;      &#34;_&#34; : &#34;&#9472;&#9472;&#34;&#10;      &#34;&#39;&#34;: {pair: [&#34;&#12300;&#34;, &#34;&#12301;&#34;]}&#10;      &#34;[&#34;: [&#34;&#12304;&#34;, &#34;[&#34;]&#10;      &#34;]&#34;: [&#34;&#12305;&#34;, &#34;]&#34;]&#10;      &#34;$&#34;: [&#34;&#165;&#34;, &#34;$&#34;, &#34;&#8364;&#34;, &#34;&#163;&#34;, &#34;&#162;&#34;, &#34;&#164;&#34;]&#10;      &#34;&#60;&#34;: [&#34;&#12298;&#34;, &#34;&#12296;&#34;, &#34;&#171;&#34;, &#34;&#60;&#34;]&#10;      &#34;&#62;&#34;: [&#34;&#12299;&#34;, &#34;&#12297;&#34;, &#34;&#187;&#34;, &#34;&#62;&#34;]&#10;  recognizer/patterns/punct: &#34;^/([a-z]+|[0-9]0?)$&#34;&#10;&#10;# &#27169;&#31946;&#25340;&#38899;&#10;  &#39;speller/algebra&#39;:&#10;    - erase/^xx$/                      # &#31532;&#19968;&#34892;&#20445;&#30041;&#10;&#10;    # &#27169;&#31946;&#38899;&#23450;&#32681;&#10;    # &#38656;&#35201;&#21738;&#32068;&#23601;&#21034;&#21435;&#34892;&#39318;&#30340; # &#34399;&#65292;&#21934;&#38617;&#21521;&#20219;&#36984;&#10;    - derive/^([zcs])h/$1/             # zh, ch, sh =&#62; z, c, s&#10;    - derive/^([zcs])([^h])/$1h$2/     # z, c, s =&#62; zh, ch, sh&#10;&#10;    - derive/^n/l/                     # n =&#62; l&#10;    - derive/^l/n/                     # l =&#62; n&#10;&#10;    # &#36889;&#20841;&#32068;&#19968;&#33324;&#26159;&#21934;&#21521;&#30340;&#10;    #- derive/^r/l/                     # r =&#62; l&#10;&#10;    #- derive/^ren/yin/                 # ren =&#62; yin, reng =&#62; ying&#10;    #- derive/^r/y/                     # r =&#62; y&#10;&#10;    # &#19979;&#38754; hu &#60;=&#62; f &#36889;&#32068;&#23531;&#27861;&#35079;&#38620;&#19968;&#20123;&#65292;&#20998;&#24773;&#27841;&#35342;&#35542;&#10;    #- derive/^hu$/fu/                  # hu =&#62; fu&#10;    #- derive/^hong$/feng/              # hong =&#62; feng&#10;    #- derive/^hu([in])$/fe$1/          # hui =&#62; fei, hun =&#62; fen&#10;    #- derive/^hu([ao])/f$1/            # hua =&#62; fa, ...&#10;&#10;    #- derive/^fu$/hu/                  # fu =&#62; hu&#10;    #- derive/^feng$/hong/              # feng =&#62; hong&#10;    #- derive/^fe([in])$/hu$1/          # fei =&#62; hui, fen =&#62; hun&#10;    #- derive/^f([ao])/hu$1/            # fa =&#62; hua, ...&#10;&#10;    # &#38907;&#27597;&#37096;&#20221;&#10;    #- derive/^([bpmf])eng$/$1ong/      # meng = mong, ...&#10;    - derive/([ei])n$/$1ng/            # en =&#62; eng, in =&#62; ing&#10;    - derive/([ei])ng$/$1n/            # eng =&#62; en, ing =&#62; in&#10;&#10;    # &#27171;&#20363;&#36275;&#22816;&#20102;&#65292;&#20854;&#20182;&#35531;&#33258;&#24049;&#32317;&#32080;&#8230;&#8230;&#10;&#10;    # &#27169;&#31946;&#38899;&#23450;&#32681;&#20808;&#26044;&#31777;&#25340;&#23450;&#32681;&#65292;&#26041;&#21487;&#20196;&#31777;&#25340;&#25903;&#25345;&#20197;&#19978;&#27169;&#31946;&#38899;&#10;    - abbrev/^([a-z]).+$/$1/           # &#31777;&#25340;&#65288;&#39318;&#23383;&#27597;&#65289;&#10;    - abbrev/^([zcs]h).+$/$1/          # &#31777;&#25340;&#65288;zh, ch, sh&#65289;&#10;&#10;    # &#20197;&#19979;&#26159;&#19968;&#32068;&#23481;&#37679;&#25340;&#23531;&#65292;&#12298;&#28450;&#35486;&#25340;&#38899;&#12299;&#26041;&#26696;&#20197;&#21069;&#32773;&#29234;&#27491;&#10;    - derive/^([nl])ve$/$1ue/          # nve = nue, lve = lue&#10;    - derive/^([jqxy])u/$1v/           # ju = jv,&#10;    - derive/un$/uen/                  # gun = guen,&#10;    - derive/ui$/uei/                  # gui = guei,&#10;    - derive/iu$/iou/                  # jiu = jiou,&#10;&#10;    # &#33258;&#21205;&#31998;&#27491;&#19968;&#20123;&#24120;&#35211;&#30340;&#25353;&#37749;&#37679;&#35492;&#10;    - derive/([aeiou])ng$/$1gn/        # dagn =&#62; dang&#10;    - derive/([dtngkhrzcs])o(u|ng)$/$1o/  # zho =&#62; zhong|zhou&#10;    - derive/ong$/on/                  # zhonguo =&#62; zhong guo&#10;    - derive/ao$/oa/                   # hoa =&#62; hao&#10;    - derive/ua$/au/                   # shau =&#62; shua&#10;    - derive/([iu])a(o|ng?)$/a$1$2/    # tain =&#62; tian&#10;&#10;    # &#20998;&#23574;&#22296;&#24460; v =&#62; &#252; &#30340;&#25913;&#23531;&#26781;&#20214;&#20063;&#35201;&#30456;&#25033;&#22320;&#25844;&#20805;&#65306;&#10;    #&#39;translator/preedit_format&#39;:&#10;   #  - &#34;xform/([nljqxyzcs])v/$1&#252;/&#34;</span><br></pre></td></tr></table></figure></div></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orgec972bb&quot;&gt;1. About Rime&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orga5d6a0e&quot;&gt;2. ibus-rime&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org0961f0e&quot;&gt;2.1. installation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org25c7b0e&quot;&gt;2.2. issues&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org8f26adf&quot;&gt;3. squirrel&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orgf7dc5b4&quot;&gt;3.1. &lt;code&gt;squirrel.custom.yaml&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgcde26fd&quot;&gt;3.2. modified color scheme&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org0afb434&quot;&gt;3.3. &lt;code&gt;luna_pinyin.custom.yaml&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="linux" scheme="https://angry-bird.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://angry-bird.github.io/tags/linux/"/>
    
      <category term="rime" scheme="https://angry-bird.github.io/tags/rime/"/>
    
  </entry>
  
  <entry>
    <title>Marathon Training</title>
    <link href="https://angry-bird.github.io/2017/10/16/Marathon-Training/"/>
    <id>https://angry-bird.github.io/2017/10/16/Marathon-Training/</id>
    <published>2017-10-16T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#org88f7ada">1. 重拾跑步训练</a><ul><li><a href="#orga08df03">1.1. 停止训练后，身体发生了那些变化</a></li><li><a href="#orgf35fa25">1.2. 重拾跑步时，以何姿态应对</a></li></ul></li><li><a href="#orga6ccdb8">2. 主训 5K</a></li></ul></div></div><a id="more"></a><div id="outline-container-org88f7ada" class="outline-2"><h2 id="org88f7ada"><span class="section-number-2">1</span> 重拾跑步训练</h2><div class="outline-text-2" id="text-1"></div><div id="outline-container-orga08df03" class="outline-3"><h3 id="orga08df03"><span class="section-number-3">1.1</span> 停止训练后，身体发生了那些变化</h3><div class="outline-text-3" id="text-1-1"><ul class="org-ul"><li>停止跑步的第 1 周，身体就会损失 5%的最大有氧量(vo2max)，对于一个 5 公里能 20 分钟完成(pb)的跑者，也就是最大有氧量减 2，5 公里的 pb 将慢 8 秒；</li><li>停止训练的第 2-3 周，将累计损失 12%的最大有氧量，也是减 5，5 公里 pb 将慢 60 秒，运动能力的大幅降低，是因为身体的肌肉细胞开始萎缩变小，数量也开始减少；</li><li>停止跑步的第 4-7 周，将累计损失 12-15%最大有氧量，也就是再减 1，5 公里 pb 将慢出 3 分钟，这一个月里运动能力因为肌肉持续缩水而以更大幅度的下降；</li><li>停止跑步的 2 个月后，将累计损失 26%的最大有氧量，也就是再减 6，这是的你基本无法像样地跑完 5 公里了。</li></ul></div></div><div id="outline-container-orgf35fa25" class="outline-3"><h3 id="orgf35fa25"><span class="section-number-3">1.2</span> 重拾跑步时，以何姿态应对</h3><div class="outline-text-3" id="text-1-2"><p>也许重上跑道的你，会尝试原先习惯的训练强度，也可能跑几步就放弃了，这都将伤害你的身体和情绪。真正适合你的恢复训练，必须遵循你当前的身体状态，从而制定合适的训练计划而非照搬原先的。</p><p>当初你放弃跑步，一般是遇见了更重要或紧急的事情，它们挤占了跑步的位置，所以重拾跑步也必须审视生活中，其他重要的部分是否分配了足够的时间精力，自己是否处于生活的平衡态。</p></div></div></div><div id="outline-container-orga6ccdb8" class="outline-2"><h2 id="orga6ccdb8"><span class="section-number-2">2</span> 主训 5K</h2><div class="outline-text-2" id="text-2"><p>5 公里是比较合适的恢复训练阶段的训练主项和测试标识，从而准确评估身体恢复进展。</p></div><div id="outline-container-org9d95120" class="outline-4"><h4 id="org9d95120">训练原则</h4><div class="outline-text-4" id="text-org9d95120"><ul class="org-ul"><li>make the hard days hard | 在强度训练日上够强度</li><li>Strength is speed | 力量是速度的一个维度</li></ul></div></div><div id="outline-container-org07eb562" class="outline-4"><h4 id="org07eb562">训练阶段</h4><div class="outline-text-4" id="text-org07eb562"><p>训练阶段以大周期（一般为 3 个月，即一个季度）划分，由 4 个小周期组成。4 个大周期循环构成一年乃至一生的训练计划（一年一般是 3-4 个大周期，需根据季节，并参考自身状态和时间，适应性调整大周期的训练重心和细节。不过各大周期的子周期循环不变）。</p><ol class="org-ol"><li>基础/调整阶段<dl class="org-dl"><dt>周期长度</dt><dd>4 周</dd><dt>训练重心</dt><dd>恢复或建立有氧耐力，洗净海绵般的身体，以吸纳后期的速度耐力训练。</dd><dt>训练项目</dt><dd>最大有氧心率跑（MAF，略低于 80%最大心率）为主，每周 2-4 次 / 3-6 公里，再加 1 次 15-20 分钟快速跑（tempo，略低于乳酸阈值速度）</dd><dt>Tips</dt><dd>周期长度建议一个月，若基础好可缩短为 2-3 周。每周是可自由调整强度和总量的，比如每周增加 10-20%的跑量，或增加 Tempo 的长度或速度。</dd><dt>ps</dt><dd>有些人从来不练，或是几天时间临阵磨枪，结果跑得更快更轻松也没伤病。那是因为我们只能看到阶段性的短暂表现，而并不清楚别人从小到大的身体发展历史和潜力，所以是毫无对比意义的。真正的、唯一可信的对比，是自己身体素质的发展历史，而制定并执行训练计划是唯一可信的务实办法。其它玄虚的东西，按自己偏好去折腾吧。</dd></dl></li><li>提升阶段<dl class="org-dl"><dt>训练周期</dt><dd>4 周</dd><dt>训练重心</dt><dd>干净海绵般身体吸收速度耐力</dd><dt>训练项目</dt><dd>最大有氧心率跑占周跑量的 60-80%，每周 2-3 次 / 4-8 公里；Tempo 1-2 次/15-30 分钟；新加一次间歇跑（400/800 米间歇训练，快速部分 3-6 公里）</dd><dt>Tips</dt><dd>周期建议是 1 个月，参看身体速度耐力的提高趋势，可缩短或延长</dd></dl></li><li>高台阶段<dl class="org-dl"><dt>训练周期</dt><dd>4 周</dd><dt>训练重心</dt><dd>稳定已吸收的速度，冲击该距离跑纪录</dd><dt>训练项目</dt><dd>同提升阶段，MAF 可换为轻松跑 EasyRun，作为强度训练日后的调整；把 1 次 Tempo 作为比赛模拟（Trial），以目标配速完成一次 5K 测试。</dd></dl></li><li><p>比赛周</p><dl class="org-dl"><dt>训练周期</dt><dd>不到 1 周</dd><dt>训练重心</dt><dd>维持训练强度和身体高峰状态，略降低周跑量（减少 10-20%）</dd><dt>训练项目</dt><dd>仅保留 MAF 和 Tempo</dd><dt>Tips</dt><dd>不空腹不饱食即可，如果考核时间点容易饿，备点儿坚果、水果等零食，或是泡面、燕麦提前 30-60 分钟吃。</dd></dl><p>全力以赴吧！</p></li><li>恢复/调整阶段，同 1，为下一周期第 1 小周期</li></ol></div></div><div id="outline-container-org485e11e" class="outline-4"><h4 id="org485e11e">训练计划</h4><div class="outline-text-4" id="text-org485e11e"><p>训练计划的制定，是需要参看自身状态和时间，设定训练目标，然后才可以制定出一个大致的训练计划。但训练计划本质是估计的，而且是动态适应性的，所以最后还需要在执行的时候，对强度和总量进行适应性调整。这个最后是最考究的，也是普通教练和牛逼教练的分水岭。若是自我训练，除了这个重要的教练角色，运动员角色的执行能力则是整个训练最关键的部分。</p><table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides"><colgroup><col class="org-left"><col class="org-left"><col class="org-left"></colgroup><thead><tr><th scope="col" class="org-left">训练阶段</th><th scope="col" class="org-left">训练项目</th><th scope="col" class="org-left">备注</th></tr></thead><tbody><tr><td class="org-left">调整阶段</td><td class="org-left">Mon-MAF-3K</td><td class="org-left">最大心率是最高效的有氧训练</td></tr><tr><td class="org-left">&#xa0;</td><td class="org-left">Wed-Tempo-15'</td><td class="org-left">感受节奏跑/快速跑的速度</td></tr><tr><td class="org-left">&#xa0;</td><td class="org-left">Thu-MAF-5K</td><td class="org-left">逐渐调高距离</td></tr><tr><td class="org-left">&#xa0;</td><td class="org-left">Sat-MAF-6K</td><td class="org-left">计心率，速度自然练上来</td></tr></tbody><tbody><tr><td class="org-left">提升阶段</td><td class="org-left">Mon-MAF-5K</td><td class="org-left">提升阶段慢跑仅用来调整</td></tr><tr><td class="org-left">&#xa0;</td><td class="org-left">Wed-Tempo-20'</td><td class="org-left">节奏跑是提升耐力的关键</td></tr><tr><td class="org-left">&#xa0;</td><td class="org-left">Thu-MAF-5K</td><td class="org-left">间歇跑是提升速度的关键</td></tr><tr><td class="org-left">&#xa0;</td><td class="org-left">Fri-Interval-400/800m * 8-10rep</td><td class="org-left">间歇组合花式太多</td></tr><tr><td class="org-left">&#xa0;</td><td class="org-left">Sat-EasyRun-5K</td><td class="org-left">间歇后一天要跑</td></tr></tbody><tbody><tr><td class="org-left">高台阶段</td><td class="org-left">Mon-MAF-5K</td><td class="org-left">高台阶段仍维持一定慢跑</td></tr><tr><td class="org-left">&#xa0;</td><td class="org-left">Tue-Interval-400/800m * 8-10rep</td><td class="org-left">间歇组合可任意</td></tr><tr><td class="org-left">&#xa0;</td><td class="org-left">Wed-EasyRun-5K</td><td class="org-left">调整性轻松跑</td></tr><tr><td class="org-left">&#xa0;</td><td class="org-left">Fri-Tempo-30'</td><td class="org-left">略低于乳酸阈值</td></tr><tr><td class="org-left">&#xa0;</td><td class="org-left">Sun-Trial-5K</td><td class="org-left">五公里测试</td></tr></tbody><tbody><tr><td class="org-left">比赛周</td><td class="org-left">比赛日-Race-5K</td><td class="org-left">全力以赴</td></tr></tbody></table></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org88f7ada&quot;&gt;1. 重拾跑步训练&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orga08df03&quot;&gt;1.1. 停止训练后，身体发生了那些变化&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgf35fa25&quot;&gt;1.2. 重拾跑步时，以何姿态应对&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orga6ccdb8&quot;&gt;2. 主训 5K&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="runner" scheme="https://angry-bird.github.io/categories/runner/"/>
    
    
      <category term="marathon" scheme="https://angry-bird.github.io/tags/marathon/"/>
    
      <category term="training" scheme="https://angry-bird.github.io/tags/training/"/>
    
  </entry>
  
  <entry>
    <title>spacemacs config</title>
    <link href="https://angry-bird.github.io/2017/10/15/spacemacs-config/"/>
    <id>https://angry-bird.github.io/2017/10/15/spacemacs-config/</id>
    <published>2017-10-15T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>my <code>.spacemacs</code></p><a id="more"></a><div id="outline-container-orgd214e9b" class="outline-2"><h2 id="orgd214e9b"><span class="section-number-2">1</span> part of my <code>.spacemacs</code> content</h2><div class="outline-text-2" id="text-1"></div><div id="outline-container-orgc56cf2d" class="outline-3"><h3 id="orgc56cf2d"><span class="section-number-3">1.1</span> layers</h3><div class="outline-text-3" id="text-1-1"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">version-control&#10;deft&#10;semantic&#10;(auto-completion :variables&#10;                  auto-completion-return-key-behavior &#39;complete&#10;                  auto-completion-tab-key-behavior &#39;cycle&#10;                  auto-completion-complete-with-key-sequence nil&#10;                  auto-completion-complete-with-key-sequence-delay 0.1&#10;                  auto-completion-enable-snippets-in-popup t&#10;                  auto-completion-enable-help-tooltip t&#10;                  auto-completion-enable-sort-by-usage t&#10;                  )&#10;(spell-checking :variables&#10;                 spell-checking-enable-by-default nil&#10;                 )&#10;(syntax-checking :variables&#10;                  syntax-checking-enable-by-default nil&#10;                  syntax-checking-enable-tooltips nil&#10;                  )&#10;(org :variables&#10;        org-enable-github-support t&#10;        org-download-screenshot-method &#39;screencapture&#10;        )&#10;(git :variables&#10;     git-magit-status-fullscreen t&#10;     magit-push-always-verify nil&#10;     magit-save-repository-buffers &#39;dontask&#10;     magit-revert-buffers &#39;silent&#10;     magit-refs-show-commit-count &#39;all&#10;     magit-revision-show-gravatars nil&#10;     )&#10;(latex :variables&#10;       ;; LaTeX and TeX-engine xetex can work well together, other settings are tricky.&#10;       latex-build-command &#34;LaTeX&#34;&#10;       latex-enable-auto-fill t&#10;       latex-enable-folding t&#10;       )&#10;bibtex&#10;shell-scripts&#10;javascript&#10;(colors :variables&#10;        ;; colors-enable-rainbow-identifiers t&#10;        colors-enable-nyan-cat-progress-bar t&#10;        )&#10;(shell :variables&#10;       shell-default-shell &#39;multi-term&#10;       shell-enable-smart-eshell t&#10;       shell-default-term-shell &#34;/bin/zsh&#34;&#10;       shell-default-height 30&#10;       shell-default-position &#39;bottom&#10;   )</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgf008fad" class="outline-3"><h3 id="orgf008fad"><span class="section-number-3">1.2</span> init</h3><div class="outline-text-3" id="text-1-2"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line"> dotspacemacs-startup-lists &#39;((recents . 3)&#10;                             (todos . 4)&#10;                             (agenda . 7)&#10;                             )&#10;&#10;dotspacemacs-default-font &#39;(&#34;Sauce Code Powerline&#34;&#10;                            :size 14&#10;                            :weight normal&#10;                            :width normal&#10;                            :powerline-scale 1.1)&#10;&#10;dotspacemacs-line-numbers&#10;&#39;(:relative t&#10;  :disabled-for-modes dired-mode&#10;                      doc-view-mode&#10;                      markdown-mode&#10;                      org-mode&#10;                      pdf-view-mode&#10;  :size-limit-kb 1000)</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgaa87361" class="outline-3"><h3 id="orgaa87361"><span class="section-number-3">1.3</span> user-init</h3><div class="outline-text-3" id="text-1-3"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">;; elisp freeze while parsing emacs files&#10;(setq tramp-ssh-controlmaster-options&#10;      &#34;-o ControlMaster=auto -o ControlPath=&#39;tramp.%%C&#39; -o ControlPersist=no&#34;)</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orga11e517" class="outline-3"><h3 id="orga11e517"><span class="section-number-3">1.4</span> user-config</h3><div class="outline-text-3" id="text-1-4"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">  (setq warning-minimum-level :emergency)&#10;  ;; key-binding custom here&#10;  (define-key global-map [(meta f11)] &#39;toggle-frame-maximized)&#10;  ;; helm-yank is much better than other yank/paste&#10;  (define-key global-map [(meta y)] &#39;helm-show-kill-ring)&#10;  ;; these default bindings are not working correctly, use hook here to fix&#10;  (add-hook &#39;term-mode-hook&#10;            (lambda ()&#10;              (add-to-list &#39;term-bind-key-alist &#39;(&#34;M-[&#34; . multi-term-prev))&#10;              (add-to-list &#39;term-bind-key-alist &#39;(&#34;M-]&#34; . multi-term-next))))&#10;  ;; default settings&#10;  ;; transparency on startup 85--&#62;active, 50--&#62;inactive&#10;  (set-frame-parameter (selected-frame) &#39;alpha &#39;(85 . 50))&#10;  ;; latex previw doc, will auto update pdf&#10;  ;; (add-hook &#39;doc-view-mode-hook &#39;auto-revert-mode)&#10;;; search engine&#10;;; (setq browse-url-browser-function &#39;browse-url-generic&#10;;;       engine/browser-function &#39;browse-url-generic&#10;;;       browse-url-generic-program &#34;google-chrome&#34;)&#10;;; chrome&#10;(setq edit-server-url-major-mode-alist&#10;      &#39;((&#34;github\\.com&#34; . org-mode)))&#10;;; (add-hook &#39;edit-server-done-hook (lambda () (shell-command &#34;open -a \&#34;Google Chrome\&#34;&#34;)))&#10;;; read-aloud&#10;(setq read-aloud-engine &#34;say&#34;)&#10;(define-key global-map [(f6)] &#39;read-aloud-this)&#10;;; deft&#10;(setq deft-directory &#34;~/alpha/deft&#34;)&#10;(setq deft-extensions &#39;(&#34;org&#34; &#34;md&#34;))&#10;(setq deft-auto-save-interval 2.5)&#10;;; solve the freeze problem when editing elisp files&#10;(eval-after-load &#39;semantic&#10;  (add-hook &#39;semantic-mode-hook&#10;            (lambda ()&#10;              (dolist (x (default-value &#39;completion-at-point-functions))&#10;                (when (string-prefix-p &#34;semantic-&#34; (symbol-name x))&#10;                (remove-hook &#39;completion-at-point-functions x))))))&#10;;; org fontification error&#10;(setq org-src-fontify-natively nil)&#10;;; here goes your Org config :)&#10;(with-eval-after-load &#39;org&#10;  ;; org path &#38; agenda file&#10;  (setq org-directory &#34;~/alpha/deft/&#34;&#10;        org-default-notes-file (concat org-directory &#34;/0x10-journal.org&#34;)&#10;        org-agenda-files (list &#34;~/alpha/deft/0x10-todo.org&#34;&#10;                               &#34;~/alpha/deft/0x10-graveyard.org&#34;&#10;                               &#34;~/alpha/deft/0x12-notes.org&#34;))&#10;  (setq org-refile-targets (quote ((nil :maxlevel . 4) (org-agenda-files :maxlevel . 5))))&#10;  (setq org-refile-use-outline-path (quote file))&#10;  (setq org-outline-path-complete-in-steps nil)&#10;  ;; org bullets&#10;  (setq org-bullets-bullet-list &#39;(&#34;&#9632;&#34; &#34;&#9670;&#34; &#34;&#9650;&#34; &#34;&#9654;&#34;))&#10;  ;; mode line of org clock&#10;  (setq spaceline-org-clock-p t)&#10;  ;; gscholar-bibtex-database-file&#10;    (setq gscholar-bibtex-database-file &#34;~/alpha/deft/references.bib&#34;)&#10;    ;; org-ref&#10;    (setq org-ref-bibliography-notes &#34;~/alpha/deft/0x12-notes.org&#34;&#10;          org-ref-default-bibliography &#39;(&#34;~/alpha/deft/refs.bib&#34;)&#10;          org-ref-pdf-directory &#34;~/Documents/book/&#34;)&#10;    (setq org-ref-note-title-format&#10;          &#34;** TODO %y - %t&#10; :PROPERTIES:&#10;  :Custom_ID: %k&#10;  :AUTHOR: %9a&#10;  :JOURNAL: %j&#10;  :YEAR: %y&#10;  :VOLUME: %v&#10;  :PAGES: %p&#10;  :DOI: %D&#10;  :URL: %U&#10;  :PDF: [[file:%F][%f]]&#10;  :END:&#10;  %l&#10;&#34;)&#10;;; saving macro&#10;(fset &#39;sub-add-empty-line&#10;   [?y ?y ?P ?f ?D ?v ?e ?d ?i ?S ?a ?u ?r ?c ?e escape ?j ?1 ?1 ?l ?D ?j])&#10;(fset &#39;org-tab-copy-item&#10;   &#34;vt|y&#34;)&#10;;; capture i/t/j templates customize&#10;    (setq org-capture-templates (quote (&#10;                                        (&#34;l&#34; &#34;Link&#34; entry (file &#34;~/alpha/deft/0x09-Links-of-Mook-and-Ted.org&#34;)&#10;                                         &#34;* TODO %?\n%U\n&#34;)&#10;                                        (&#34;d&#34; &#34;Diary&#34; entry (file+headline &#34;~/alpha/deft/0x10-diary.org&#34; &#34;Sands&#34;)&#10;                                         &#34;* Enter on %U\n- %? :: &#34;)&#10;                                        (&#34;s&#34; &#34;Subscribe&#34; entry (file+headline &#34;~/alpha/deft/0x14-subscribe.org&#34; &#34;Push&#34;)&#10;                                         &#34;* Enter on %U %?\n&#34;)&#10;                                        (&#34;e&#34; &#34;Extracts&#34; entry (file+headline &#34;~/alpha/deft/0x01-extracts.org&#34; &#34;Stars&#34;)&#10;                                         &#34;* Extract on %U\n- %?&#34;)&#10;                                        (&#34;k&#34; &#34;keybings&#34; entry (file+headline &#34;~/alpha/deft/0x03-shortcuts.org&#34; &#34;Drops&#34;)&#10;                                         &#34;* Enter on %U\n|%?&#34;)&#10;                                        (&#34;t&#34; &#34;Todo&#34; entry (file+headline &#34;~/alpha/deft/0x10-todo.org&#34; &#34;Inbox&#34;)&#10;                                         &#34;* TODO %?\nSCHEDULED: %T%i\n&#34;)&#10;                                        (&#34;r&#34; &#34;Running-Logs&#34; entry (file+headline &#34;~/alpha/deft/0x14-running-log.org&#34; &#34;Logs&#34;)&#10;                                         &#34;* RUN %?K on %U%i\n&#34;)&#10;                                        (&#34;j&#34; &#34;Journal&#34; entry (file+datetree &#34;~/alpha/deft/0x10-journal.org&#34;)&#10;                                         &#34;* %?\n%U\n %i\n&#34;)))))</span><br></pre></td></tr></table></figure></div></div></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;
my &lt;code&gt;.spacemacs&lt;/code&gt;
&lt;/p&gt;
    
    </summary>
    
      <category term="hexo" scheme="https://angry-bird.github.io/categories/hexo/"/>
    
    
      <category term="emacs" scheme="https://angry-bird.github.io/tags/emacs/"/>
    
      <category term="spacemacs" scheme="https://angry-bird.github.io/tags/spacemacs/"/>
    
  </entry>
  
  <entry>
    <title>hexo on coding and github</title>
    <link href="https://angry-bird.github.io/2017/10/14/hexo-on-coding-and-github/"/>
    <id>https://angry-bird.github.io/2017/10/14/hexo-on-coding-and-github/</id>
    <published>2017-10-14T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#orga429c28">1. about coding &#x2013; gitcafe</a></li><li><a href="#org8046480">2. hexo deploy to both github and coding</a></li><li><a href="#org70b0d5a">3. coding webhook</a></li></ul></div></div><a id="more"></a><div id="outline-container-orga429c28" class="outline-2"><h2 id="orga429c28"><span class="section-number-2">1</span> about coding &#x2013; gitcafe</h2><div class="outline-text-2" id="text-1"><p>Coding is a home server, which is much stable than github. Also it's convenient that baidu.com can get this blog.</p></div></div><div id="outline-container-org8046480" class="outline-2"><h2 id="org8046480"><span class="section-number-2">2</span> hexo deploy to both github and coding</h2><div class="outline-text-2" id="text-2"><p>Publishing hexo static blog for both github and coding can be done with one addtional line in blog's <i>_config.xml</i>.</p><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">deploy:&#10;  type: git&#10;  message: [message]&#10;  repo:&#10;    github: git@github.com:angry-bird/angry-bird.github.io.git,master&#10;    coding: &#60;repository url&#62;,[branch]</span><br></pre></td></tr></table></figure></div><p>Test ssh connection to coding and github</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@git.coding.net</span><br><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-org70b0d5a" class="outline-2"><h2 id="org70b0d5a"><span class="section-number-2">3</span> coding webhook</h2></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#orga429c28&quot;&gt;1. about coding &amp;#x2013; gitcafe&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org8046480&quot;&gt;2. hexo deploy to both github and coding&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org70b0d5a&quot;&gt;3. coding webhook&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="hexo" scheme="https://angry-bird.github.io/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://angry-bird.github.io/tags/hexo/"/>
    
      <category term="coding" scheme="https://angry-bird.github.io/tags/coding/"/>
    
      <category term="github" scheme="https://angry-bird.github.io/tags/github/"/>
    
  </entry>
  
  <entry>
    <title>light weight server</title>
    <link href="https://angry-bird.github.io/2017/10/13/light-server/"/>
    <id>https://angry-bird.github.io/2017/10/13/light-server/</id>
    <published>2017-10-13T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#org25efa12">1. Lightweight web sever</a></li><li><a href="#org1b8c45e">2. Lightweight app server</a></li></ul></div></div><a id="more"></a><div id="outline-container-org25efa12" class="outline-2"><h2 id="org25efa12"><span class="section-number-2">1</span> Lightweight web sever</h2><div class="outline-text-2" id="text-1"><p><code>Apache</code>, <code>lighttpd</code>, <code>nginx</code> are the most widely used websevers, and lighttpd can be the best choice for personal server. But there are actually more great options available, like <code>minihttpd</code>, <code>litespeed</code>, <code>mongrel</code>, <code>thttpd</code>, and <code>ihttpd</code>, <code>im-httpd</code>, <code>fnord</code>, <code>mattows</code>, <code>darkhttpd</code>, <code>Yaws</code> are extremely small servers.</p><p>Here is a <a href="https://en.wikipedia.org/wiki/Comparison_of_web_server_software" target="_blank" rel="noopener"><b>comparison of web server software</b></a>.</p><p>The easiest way is running this command in your terminal, if python 3 has installed.</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">python -m http.server <span class="number">8080</span></span><br></pre></td></tr></table></figure></div><p>I prefer lighttpd and configed it according to this <a href="https://wiki.archlinux.org/index.php/Lighttpd#Configuration" target="_blank" rel="noopener"> <b>archlinux wiki</b> </a>.</p><ol class="org-ol"><li><p>Install lighttpd</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew install lighttpd</span><br></pre></td></tr></table></figure></div></li><li><p>Modify <code>server_root</code>It is equal to <code>server.document_root</code></p><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">var.server_root = &#34;path/to/my/website&#34;</span><br></pre></td></tr></table></figure></div></li><li><p>Run lighttpd as service</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew services start lighttpd</span><br><span class="line"><span class="comment"># if you modify any lighttpd conf file, restart this service</span></span><br><span class="line">brew services restart lighttpd</span><br></pre></td></tr></table></figure></div></li><li><p>View your website on browser<br></p><p><code>localhost:8080</code> is the default website address.</p></li></ol></div></div><div id="outline-container-org1b8c45e" class="outline-2"><h2 id="org1b8c45e"><span class="section-number-2">2</span> Lightweight app server</h2><div class="outline-text-2" id="text-2"><p>Pow is a even better choice as Rack server for Mac OSX, because it is zero-config according to its <a href="http://pow.cx/" target="_blank" rel="noopener"> <b>website</b> </a>.</p><ol class="org-ol"><li><p>install pow</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl get.pow.cx | sh</span><br></pre></td></tr></table></figure></div></li><li><p>Symlink your Rack app to <code>~/.pow</code></p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.pow</span><br><span class="line">ln <span class="operator">-s</span> /path/to/myapp</span><br></pre></td></tr></table></figure></div></li><li>Your app is running at <span class="underline"><a href="http://myapp.dev/" target="_blank" rel="noopener">http://myapp.dev/</a></span></li><li><p>Uninstall pow with this cmd</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl get.pow.cx/uninstall.sh | sh</span><br></pre></td></tr></table></figure></div></li></ol></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org25efa12&quot;&gt;1. Lightweight web sever&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org1b8c45e&quot;&gt;2. Lightweight app server&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="webserver" scheme="https://angry-bird.github.io/categories/webserver/"/>
    
    
      <category term="lighttpd" scheme="https://angry-bird.github.io/tags/lighttpd/"/>
    
      <category term="appserver" scheme="https://angry-bird.github.io/tags/appserver/"/>
    
      <category term="pow" scheme="https://angry-bird.github.io/tags/pow/"/>
    
  </entry>
  
  <entry>
    <title>Write the damn blog</title>
    <link href="https://angry-bird.github.io/2017/10/12/write-the-damn-blog/"/>
    <id>https://angry-bird.github.io/2017/10/12/write-the-damn-blog/</id>
    <published>2017-10-12T00:00:00.000Z</published>
    <updated>2018-05-11T12:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents"><h2>Table of Contents</h2><div id="text-table-of-contents"><ul><li><a href="#org369a91b">1. hexo</a></li><li><a href="#org6005f8f">2. blog-admin</a></li><li><a href="#orgca3188b">3. other options</a></li></ul></div></div><a id="more"></a><div id="outline-container-org369a91b" class="outline-2"><h2 id="org369a91b"><span class="section-number-2">1</span> hexo</h2><div class="outline-text-2" id="text-1"><dl class="org-dl"><dt>install hexo</dt><dd><code>npm install -g hexo</code></dd><dt>generate static webpage</dt><dd><code>hexo g</code></dd><dt>run local server</dt><dd><code>hexo s</code></dd><dt>deploy to github</dt><dd><code>hexo d -g</code></dd></dl></div><div id="outline-container-orgda4cfad" class="outline-3"><h3 id="orgda4cfad"><span class="section-number-3">1.1</span> config</h3><div class="outline-text-3" id="text-1-1"><p>modify your <a href="file:///Users/zuoshi/Dropbox/blog/_config.yml#%20Hexo%20Configuration" target="_blank" rel="noopener">_config.yml</a> or create <a href="file:///Users/zuoshi/Dropbox/blog/my_config.yml#%20Hexo%20Configuration" target="_blank" rel="noopener">my_config.yml</a> according <a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="noopener">offical manual</a></p></div></div><div id="outline-container-orgd1c1b3e" class="outline-3"><h3 id="orgd1c1b3e"><span class="section-number-3">1.2</span> theme</h3><div class="outline-text-3" id="text-1-2"><p>There is many great <a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="noopener">themes available</a>. I like TKL the most.After download theme, change <code>theme</code> to <code>maupassant</code> in root <i>_config.yml</i>. Also theme's <i>_config.yml</i> can be modified.</p><ol class="org-ol"><li><p>TKL</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/SuperKieran/TKL.git themes/TKL</span><br><span class="line"><span class="built_in">cd</span> themes/TKL</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure></div></li><li><p>maupassant<code>If encounter error while install sass, use taobao.</code></p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/tufu9441/maupassant-hexo.git themes/maupassant</span><br><span class="line">npm install hexo-renderer-jade --save</span><br><span class="line">npm install -g cnpm --registry=http://registry.npm.taobao.org</span><br><span class="line">cnpm install hexo-renderer-sass --save</span><br></pre></td></tr></table></figure></div></li><li><p>air</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/litten/hexo-theme-yilia.git themes/yilia</span><br><span class="line"><span class="comment"># Update from github</span></span><br><span class="line"><span class="built_in">cd</span> themes/yilia</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure></div></li></ol></div></div><div id="outline-container-org0021be3" class="outline-3"><h3 id="org0021be3"><span class="section-number-3">1.3</span> github</h3><div class="outline-text-3" id="text-1-3"><ol class="org-ol"><li><p>Modify <code>deploy</code> in <i>_config.yml</i> according to next lines.</p><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">deploy:&#10;  type: git&#10;  repo: https://github.com/angry-bird/angry-bird.github.io.git&#10;  branch: master</span><br></pre></td></tr></table></figure></div></li><li><p>Deploy local repo to github.</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm -i --save hexo-deployer-git</span><br><span class="line">git remote add origin https://github.com/angry-bird/angry-bird.github.io.git</span><br><span class="line"><span class="comment"># git remote add origin git@github.com:angry-bird/angry-bird.github.io.git</span></span><br><span class="line">git checkout -b <span class="built_in">source</span></span><br><span class="line">git push origin <span class="built_in">source</span></span><br><span class="line">hexo g <span class="operator">-d</span></span><br></pre></td></tr></table></figure></div></li><li><p>Deploy on both coing and github</p><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">deploy:&#10;- type: git&#10;  repo: https://github.com/angry-bird/angry-bird.github.io.git&#10;  branch: master&#10;- type: git&#10;  repo: https://git.coding.net/zuoshi/angry-bird.github.io.git&#10;  branch: master</span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">deploy:&#10;  type: git&#10;  repo:&#10;      github: git@github.com:angry-bird/angry-bird.github.io.git, master&#10;      coding: git@git.coding.net:zuoshi/zuoshi.git, master</span><br></pre></td></tr></table></figure></div></li><li><a href="https://help.github.com/articles/connecting-to-github-with-ssh/" target="_blank" rel="noopener">connecting-to-github-with-ssh</a></li></ol></div></div><div id="outline-container-org18278ed" class="outline-3"><h3 id="org18278ed"><span class="section-number-3">1.4</span> hexo-renderer-org</h3><div class="outline-text-3" id="text-1-4"><ol class="org-ol"><li><p>Install hexo-renderer-org for emacs</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-renderer-org<span class="comment">#emacs --save</span></span><br></pre></td></tr></table></figure></div></li><li><p>Modify root _config.yml</p><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">org:&#10;  emacs: &#39;/usr/local/Cellar/emacs-plus/25.2/Emacs.app/Contents/MacOS/Emacs&#39;&#10;  common: |&#10;          #+OPTIONS: toc:1 num:2 ^:{} creator:nil author:nil email:nil date:nil timestamp:nil&#10;          #+BIND: org-html-validation-link nil&#10;  cachedir: &#39;./hexo-org-cache/&#39;</span><br></pre></td></tr></table></figure></div></li><li><p>Misc<br>Setting caption of image</p><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+ATTR_HTML:  :alt caption&#10;image url</span><br></pre></td></tr></table></figure></div><p>Add Read more button, <code>insert before first headline, and Table of Contents will be fine.</code></p><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">#+BEGIN_EXPORT html&#10;&#60;!--more--&#62;&#10;#+END_EXPORT</span><br></pre></td></tr></table></figure></div></li></ol></div></div><div id="outline-container-orgaebc0aa" class="outline-3"><h3 id="orgaebc0aa"><span class="section-number-3">1.5</span> plugins</h3><div class="outline-text-3" id="text-1-5"><ol class="org-ol"><li>plugins like sitemap, feed/rss, about, disqus/gitalk<ul class="org-ul"><li><p>about.html will generated from <code>source/about.md</code></p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap -save</span><br><span class="line">npm install hexo-generator-feed -save</span><br></pre></td></tr></table></figure></div></li><li>all plugins will generate to <span class="underline">public/</span></li></ul></li><li>Disqus/duoshuo/Gitalk, but <code>duoshuo</code> is not available since July 2017, <code>Gitalk</code> is the substitution.<ul class="org-ul"><li>disqus shortname</li><li><p>install gitalk</p><div class="org-src-container"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i --save gitalk</span><br></pre></td></tr></table></figure></div><div class="org-src-container"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'gitalk/dist/gitalk.css'</span></span><br><span class="line"><span class="keyword">import</span> Gitalk <span class="keyword">from</span> <span class="string">'gitalk'</span></span><br></pre></td></tr></table></figure></div></li><li><p><a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">github application</a></p><div class="org-src-container"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gitalk = <span class="keyword">new</span> Gitalk({</span><br><span class="line">  clientID: <span class="string">'your-client-id'</span>,</span><br><span class="line">  clientSecret: <span class="string">'your-client-secret'</span>,</span><br><span class="line">  repo: <span class="string">'angry-bird.github.io'</span>,</span><br><span class="line">  owner: <span class="string">'angry-bird'</span>,</span><br><span class="line">  admin: [<span class="string">'angry-bird'</span>],</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">gitalk.render(<span class="string">'gitalk-container'</span>)</span><br></pre></td></tr></table></figure></div><p>Note that <code>application name</code> set as <code>gitalk</code>, <code>homepage url</code> is your blog's domain url, and <code>authorization callback url</code> is blog's github address. After that, copy <code>Client ID</code> and <code>Client Secret</code>, <code>repo</code> is <code>owner</code>.github.io</p></li><li>theme's <i>_config.yml</i></li></ul></li></ol></div></div><div id="outline-container-org83c71cc" class="outline-3"><h3 id="org83c71cc"><span class="section-number-3">1.6</span> widges on theme <code>TKL</code></h3><div class="outline-text-3" id="text-1-6"><ol class="org-ol"><li>widges like weibo, facebook, search, category, tagcloud</li><li><p>baidustatic</p><div class="org-src-container"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> _hmt = _hmt || [];</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> hm = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">  hm.src = <span class="string">"https://hm.baidu.com/hm.js?c65795c17436c80c4127ae64076e5746"</span>;</span><br><span class="line">  <span class="keyword">var</span> s = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"script"</span>)[<span class="number">0</span>];</span><br><span class="line">  s.parentNode.insertBefore(hm, s);</span><br><span class="line">})();</span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></div></li></ol></div></div></div><div id="outline-container-org6005f8f" class="outline-2"><h2 id="org6005f8f"><span class="section-number-2">2</span> blog-admin</h2><div class="outline-text-2" id="text-2"><div class="org-src-container"><figure class="highlight"><table><tr><td class="code"><pre><span class="line">(add-hook &#39;blog-admin-backend-after-new-post-hook &#39;find-file)&#10;(setq blog-admin-backend-path &#34;~/.blog&#34;)&#10;(setq blog-admin-backend-type &#39;hexo)&#10;(setq blog-admin-backend-new-post-in-drafts t)&#10;(setq blog-admin-backend-new-post-with-same-name-dir t)&#10;(setq blog-admin-backend-hexo-config-file &#34;_config.yml&#34;)</span><br></pre></td></tr></table></figure></div></div></div><div id="outline-container-orgca3188b" class="outline-2"><h2 id="orgca3188b"><span class="section-number-2">3</span> other options</h2><div class="outline-text-2" id="text-3"></div><div id="outline-container-org2bf6d4e" class="outline-3"><h3 id="org2bf6d4e"><span class="section-number-3">3.1</span> org-page</h3><div class="outline-text-3" id="text-3-1"><ol class="org-ol"><li>melpa install package, but failed because incompatible dependency packages</li><li>config repo and site</li><li>publish</li></ol></div></div><div id="outline-container-orgc9b4660" class="outline-3"><h3 id="orgc9b4660"><span class="section-number-3">3.2</span> nikola</h3></div></div><p class="validation"></p>]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#org369a91b&quot;&gt;1. hexo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#org6005f8f&quot;&gt;2. blog-admin&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#orgca3188b&quot;&gt;3. other options&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
    
    </summary>
    
      <category term="hexo" scheme="https://angry-bird.github.io/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://angry-bird.github.io/tags/hexo/"/>
    
      <category term="emacs" scheme="https://angry-bird.github.io/tags/emacs/"/>
    
      <category term="orgmode" scheme="https://angry-bird.github.io/tags/orgmode/"/>
    
  </entry>
  
</feed>
